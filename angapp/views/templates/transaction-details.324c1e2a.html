<div class="ui basic top-header segment" ng-cloak><h2 class="ui header" translate>transaction_details_main_header</h2></div><div class="mainbody-wrap admin-dashboard"><div class="ui page grid"><div class="column"><div class="transactions-wrap"><div class="ui breadcrumb"><a class="section" href="campaign-manager" translate>transaction_details_my_campaigns </a><i class="right arrow icon divider"></i><div class="active section" translate>transaction_details_transactions</div></div><div class="ui divider"></div><div class="campaign-header ui basic center aligned segment"><div class="image-wrap"><img ng-repeat="file in campaign.files | filter:{region_id: RESOURCE_REGIONS.campaign.thumbnail} | orderBy:'-file_id' | limitTo: 1" ng-if="campaign.files[0].path_external" ng-src="{{server + '/image/campaign_thumbnail_medium/' + file.path_external}}"> <img ng-if="!campaign.files[0].path_external" src="/images/placeholder-images/placeholder_campaign_thumb.png"></div><h3 class="ui header">{{campaign.name}}</h3></div><h3 class="ui header" translate>transaction_details_sumary</h3><div class="ui inverted divider"></div><div class="ui stackable two column grid"><div class="column"><table class="trans-stat ui small basic table"><thead><tr><th translate>transaction_details_sumary_status</th><th translate>transaction_details_sumary_total</th></tr></thead><tbody><tr><td translate>transaction_details_new_pre_auth</td><td>{{transaction_summary.total_pre_auth_new}}</td></tr><tr><td translate>transaction_details_pre_auth_success</td><td>{{transaction_summary.total_pre_auth_success}}</td></tr><tr><td translate>transaction_details_pre_auth_failure</td><td>{{transaction_summary.total_pre_auth_failure}}</td></tr><tr><td translate>transaction_details_new_capture</td><td>{{transaction_summary.total_capture_new}}</td></tr><tr><td translate>transaction_details_capture_success</td><td>{{transaction_summary.total_capture_success}}</td></tr><tr><td translate>transaction_details_capture_failure</td><td>{{transaction_summary.total_capture_failure}}</td></tr></tbody></table></div><div class="column"><canvas id="campaign-transaction-chart" width="400" height="400"></canvas></div></div><div ng-show="transaction_detail.length"><h3 class="ui header" translate>transaction_details_transactiontext</h3><p></p><div class="ui grid"><div class="three wide column"><i class="circular icon hide" data-content="Anonymous Contribution" data-variation="inverted"></i> {{'tab_campaign_transaction_details_anon' | translate}}</div><div class="six wide column"><i class="circular icon unhide" data-content="Partial Anonymous Contribution" data-variation="inverted"></i> {{'tab_campaign_transaction_details_partially_anon' | translate}}</div></div><p></p><div class="ui inverted divider"></div><table class="ui basic small table transactions-table"><thead><tr><th translate>transaction_details_transaction_id</th><th translate>transaction_details_reward</th><th translate>transaction_details_amount</th><th translate>tab_campaign_transaction_details_coupon</th><th translate>transaction_details_contributors</th><th translate>transaction_details_contributors_email</th><th translate>transaction_details_card_number</th><th translate>transaction_details_date</th><th ng-show="payment_gateway==1"></th><th ng-show="payment_gateway==1" translate>transaction_details_status</th></tr></thead><tbody><tr ng-repeat="trans in transaction_detail" ng-if="trans.backer.length"><td ng-show="payment_gateway==1">{{trans.stripe_transaction_id}}</td><td ng-show="payment_gateway==3">{{trans.paypal_transaction_id}}</td><td ng-show="payment_gateway==2">{{trans.widgetmakr_transaction_id}}</td><td><i ng-if="trans.backer[0].anonymous_contribution" class="circular icon hide" data-content="Anonymous Contribution" data-variation="inverted"></i> <i ng-if="trans.backer[0].anonymous_contribution_partial" class="circular icon unhide" data-content="Anonymous Contribution" data-variation="inverted"></i> <span ng-if="trans.backer[0].pledge_level.length"><span title="{{trans.backer[0].pledge_level[0].name}}">{{(trans.backer[0].pledge_level[0].name).slice(0,30)}} </span><span ng-show="(trans.backer[0].pledge_level[0].name).length>30">&nbsp;...</span> </span><span ng-hide="trans.backer[0].pledge_level.length">{{'transaction_details_na' | translate}}</span></td><td ng-bind-html="trans.backer[0].amount | formatCurrency:campaign.currencies[0].code_iso4217_alpha:public_setting.site_campaign_decimal_option"></td><td ng-if="trans.coupon && trans.coupon.length > 0">{{trans.coupon[0].code}}</td><td ng-if="!(trans.coupon && trans.coupon.length > 0)">-</td><td><span ng-if="trans.backer.length &&  trans.backer[0].person.length" title="{{trans.backer[0].person[0].first_name +''+ trans.backer[0].person[0].last_name}}">{{(trans.backer[0].person[0].first_name +" "+ trans.backer[0].person[0].last_name).slice(0,18)}} </span><span ng-show="(trans.backer[0].person[0].first_name + trans.backer[0].person[0].last_name).length>18">&nbsp;...</span> <span ng-if="!trans.backer[0].person.length && trans.backer.length">{{'transaction_details_backer_deleted'| translate}}</span></td><td><span title="{{trans.backer[0].person[0].email}}">{{(trans.backer[0].person[0].email).slice(0,25)}}</span><span ng-show="(trans.backer[0].person[0].email).length>25">&nbsp;...</span></td><td ng-show="trans.card[0].last4">**** **** **** {{trans.card[0].last4}}</td><td ng-show="!trans.card[0].last4" translate>{{trans.reference_no}}</td><td id="col_date">{{trans.created | dateconv }}</td><td ng-show="payment_gateway==1"><span class="ui small green button" id="addressbtn" ng-class="{'disabled':!trans.backer[0].person[0].person_shipping_address}" ng-click="showContact($index)" translate>transaction_details_view_contact</span></td><td ng-show="payment_gateway==1" ng-class="{'error':trans.stripe_transaction_status_id==4, 'warning':trans.backer[0].disabled,'positive':trans.stripe_transaction_status_id==3}"><span title="{{trans.stripe_transaction_status}}" ng-show="!trans.backer[0].disabled && trans.card[0].last4" translate>{{(trans.stripe_transaction_status).slice(0,31)}}</span><span ng-show="(trans.stripe_transaction_status).length>31 && !trans.backer[0].disabled ">&nbsp;...</span> <span ng-show="trans.backer[0].disabled">{{'transaction_details_withdrawn'| translate}}</span> <span ng-show="!trans.card[0].last4 && !trans.backer[0].disabled" translate>tab_campaign_Manual_Transaction</span></td></tr></tbody></table><div><button type="button" ng-csv="createTransactionCSV(campaign.entry_id)" lazy-load="true" filename="transactionDetail.csv" add-bom="true" class="ui green button">{{'transaction_details_export'|translate}}</button></div><div class="ui basic segment center aligned" style="margin-top:3rem"><div semantic-pagination ng-model="transaction_pagination.page" total-pages="transaction_pagination.numpages" update-function="getTransactions(campaign.entry_id)"></div></div></div></div></div></div></div><div class="ui small test modal"><i class="close icon"></i><div class="header" translate>transaction_details_shipping_contact</div><div class="content" id="content-address" ng-if="!alt_shipping"><div><h4 id="backername"></h4></div><div id="street"></div><div id="main_address"></div><div id="country_name"></div><br><div ng-show="shippingPhoneNumber">{{shippingPhoneNumber}} | {{shippingPhoneType | translate}}</div></div><div class="content" id="content-address" ng-if="alt_shipping"><div><h4 id="backername"></h4></div><div id="country_name"></div><div><span translate="tab_address_setting_postalcode_symbol"></span><span id="postcode"></span></div><div id="main_address"></div><div id="street"></div><br><div ng-show="shippingPhoneNumber">{{shippingPhoneNumber}} | {{shippingPhoneType | translate}}</div></div><div class="actions"><div class="ui negative right aligned red button" id="shipbtn" translate>transaction_details_dismiss</div></div></div>