/*!
 * froala_editor v2.6.2 (https://www.froala.com/wysiwyg-editor)
 * License https://froala.com/wysiwyg-editor/terms/
 * Copyright 2014-2017 Froala Labs
 */
!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=function(t,a){return void 0===a&&(a="undefined"!=typeof window?require("jquery"):require("jquery")(t)),e(a)}:e(window.jQuery)}(function(e){var t,a,i,s;e.extend(e.FE.POPUP_TEMPLATES,{"image.insert":"[_BUTTONS_][_UPLOAD_LAYER_][_BY_URL_LAYER_][_PROGRESS_BAR_]","image.edit":"[_BUTTONS_]","image.alt":"[_BUTTONS_][_ALT_LAYER_]","image.size":"[_BUTTONS_][_SIZE_LAYER_]"}),e.extend(e.FE.DEFAULTS,{imageInsertButtons:["imageBack","|","imageUpload","imageByURL"],imageEditButtons:["imageReplace","imageAlign","imageRemove","|","imageLink","linkOpen","linkEdit","linkRemove","-","imageDisplay","imageStyle","imageAlt","imageSize"],imageAltButtons:["imageBack","|"],imageSizeButtons:["imageBack","|"],imageUploadURL:"https://i.froala.com/upload",imageUploadParam:"file",imageUploadParams:{},imageUploadToS3:!1,imageUploadMethod:"POST",imageMaxSize:10485760,imageAllowedTypes:["jpeg","jpg","png","gif","svg+xml"],imageResize:!0,imageResizeWithPercent:!1,imageRoundPercent:!1,imageDefaultWidth:300,imageDefaultAlign:"center",imageDefaultDisplay:"block",imageSplitHTML:!1,imageStyles:{"fr-rounded":"Rounded","fr-bordered":"Bordered"},imageMove:!0,imageMultipleStyles:!0,imageTextNear:!0,imagePaste:!0,imagePasteProcess:!1,imageMinWidth:16,imageOutputSize:!1,imageDefaultMargin:5}),e.FE.PLUGINS.image=function(r){var n,o,l,f,p,d,g=!1,u=1,c=2,m=3,h=4,v=5,b=6,y={};function E(){var e=r.popups.get("image.insert").find(".fr-image-by-url-layer input");e.val(""),n&&e.val(n.attr("src")),e.trigger("change")}function w(){var e=r.popups.get("image.edit");if(e||(e=O()),e){r.popups.setContainer("image.edit",r.$sc),r.popups.refresh("image.edit");var t=n.offset().left+n.outerWidth()/2,a=n.offset().top+n.outerHeight();r.popups.show("image.edit",t,a,n.outerHeight())}}function C(){B()}function A(e){e.hasClass("fr-dii")||e.hasClass("fr-dib")||(e.addClass("fr-fi"+ue(e)[0]),e.addClass("fr-di"+ce(e)[0]),e.css("margin",""),e.css("float",""),e.css("display",""),e.css("z-index",""),e.css("position",""),e.css("overflow",""),e.css("vertical-align",""))}function S(e){ge(e,e.hasClass("fr-dib")?"block":e.hasClass("fr-dii")?"inline":null,e.hasClass("fr-fil")?"left":e.hasClass("fr-fir")?"right":ue(e)),e.removeClass("fr-dib fr-dii fr-fir fr-fil")}function R(){for(var t="IMG"==r.el.tagName?[r.el]:r.el.querySelectorAll("img"),a=0;a<t.length;a++){var i=e(t[a]);!r.opts.htmlUntouched&&r.opts.useClasses?((r.opts.imageEditButtons.indexOf("imageAlign")>=0||r.opts.imageEditButtons.indexOf("imageDisplay")>=0)&&A(i),r.opts.imageTextNear||i.removeClass("fr-dii").addClass("fr-dib")):r.opts.htmlUntouched||r.opts.useClasses||(r.opts.imageEditButtons.indexOf("imageAlign")>=0||r.opts.imageEditButtons.indexOf("imageDisplay")>=0)&&S(i),r.opts.iframe&&i.on("load",r.size.syncIframe)}}function D(t){void 0===t&&(t=!0);var a,i=Array.prototype.slice.call(r.el.querySelectorAll("img")),s=[];for(a=0;a<i.length;a++)s.push(i[a].getAttribute("src")),e(i[a]).toggleClass("fr-draggable",r.opts.imageMove),""===i[a].getAttribute("class")&&i[a].removeAttribute("class"),""===i[a].getAttribute("style")&&i[a].removeAttribute("style");if(p)for(a=0;a<p.length;a++)s.indexOf(p[a].getAttribute("src"))<0&&r.events.trigger("image.removed",[e(p[a])]);if(p&&t){var n=[];for(a=0;a<p.length;a++)n.push(p[a].getAttribute("src"));for(a=0;a<i.length;a++)n.indexOf(i[a].getAttribute("src"))<0&&r.events.trigger("image.loaded",[e(i[a])])}p=i}function x(){if(o||function(){var t;r.shared.$image_resizer?(o=r.shared.$image_resizer,f=r.shared.$img_overlay,r.events.on("destroy",function(){o.removeClass("fr-active").appendTo(e("body:first"))},!0)):(r.shared.$image_resizer=e('<div class="fr-image-resizer"></div>'),o=r.shared.$image_resizer,r.events.$on(o,"mousedown",function(e){e.stopPropagation()},!0),r.opts.imageResize&&(o.append($("nw")+$("ne")+$("sw")+$("se")),r.shared.$img_overlay=e('<div class="fr-image-overlay"></div>'),f=r.shared.$img_overlay,t=o.get(0).ownerDocument,e(t).find("body:first").append(f)));r.events.on("shared.destroy",function(){o.html("").removeData().remove(),o=null,r.opts.imageResize&&(f.remove(),f=null)},!0),r.helpers.isMobile()||r.events.$on(e(r.o_win),"resize",function(){n&&!n.hasClass("fr-uploading")?le(!0):n&&(x(),me(),_(!1))});if(r.opts.imageResize){t=o.get(0).ownerDocument,r.events.$on(o,r._mousedown,".fr-handler",I),r.events.$on(e(t),r._mousemove,k),r.events.$on(e(t.defaultView||t.parentWindow),r._mouseup,T),r.events.$on(f,"mouseleave",T);var a=1,i=null,s=0;r.events.on("keydown",function(t){if(n){var o=-1!=navigator.userAgent.indexOf("Mac OS X")?t.metaKey:t.ctrlKey,l=t.which;(l!==i||t.timeStamp-s>200)&&(a=1),(l==e.FE.KEYCODE.EQUALS||r.browser.mozilla&&l==e.FE.KEYCODE.FF_EQUALS)&&o&&!t.altKey?a=ee.call(this,t,1,1,a):(l==e.FE.KEYCODE.HYPHEN||r.browser.mozilla&&l==e.FE.KEYCODE.FF_HYPHEN)&&o&&!t.altKey?a=ee.call(this,t,2,-1,a):r.keys.ctrlKey(t)||l!=e.FE.KEYCODE.ENTER||(n.before("<br>"),U(n)),i=l,s=t.timeStamp}},!0),r.events.on("keyup",function(){a=1})}}(),!n)return!1;var t=r.$wp||r.$sc;t.append(o),o.data("instance",r);var a=t.scrollTop()-("static"!=t.css("position")?t.offset().top:0),i=t.scrollLeft()-("static"!=t.css("position")?t.offset().left:0);i-=r.helpers.getPX(t.css("border-left-width")),a-=r.helpers.getPX(t.css("border-top-width")),r.$el.is("img")&&r.$sc.is("body")&&(a=0,i=0),o.css("top",(r.opts.iframe?n.offset().top:n.offset().top+a)-1).css("left",(r.opts.iframe?n.offset().left:n.offset().left+i)-1).css("width",n.get(0).getBoundingClientRect().width).css("height",n.get(0).getBoundingClientRect().height).addClass("fr-active")}function $(e){return'<div class="fr-handler fr-h'+e+'"></div>'}function I(t){if(!r.core.sameInstance(o))return!0;if(t.preventDefault(),t.stopPropagation(),r.$el.find("img.fr-error").left)return!1;r.undo.canDo()||r.undo.saveStep();var a=t.pageX||t.originalEvent.touches[0].pageX;if("mousedown"==t.type){var i=r.$oel.get(0).ownerDocument,s=i.defaultView||i.parentWindow,p=!1;try{p=s.location!=s.parent.location}catch(e){}p&&s.frameElement&&(a+=r.helpers.getPX(e(s.frameElement).offset().left)+s.frameElement.clientLeft)}(l=e(this)).data("start-x",a),l.data("start-width",n.width()),l.data("start-height",n.height());var d=n.width();if(r.opts.imageResizeWithPercent){var g=n.parentsUntil(r.$el,r.html.blockTagsQuery()).get(0)||r.el;n.css("width",(d/e(g).outerWidth()*100).toFixed(2)+"%")}else n.css("width",d);f.show(),r.popups.hideAll(),de()}function k(t){if(!r.core.sameInstance(o))return!0;var a;if(l&&n){if(t.preventDefault(),r.$el.find("img.fr-error").left)return!1;var i=t.pageX||(t.originalEvent.touches?t.originalEvent.touches[0].pageX:null);if(!i)return!1;var s=i-l.data("start-x"),f=l.data("start-width");if((l.hasClass("fr-hnw")||l.hasClass("fr-hsw"))&&(s=0-s),r.opts.imageResizeWithPercent){var p=n.parentsUntil(r.$el,r.html.blockTagsQuery()).get(0)||r.el;f=((f+s)/e(p).outerWidth()*100).toFixed(2),r.opts.imageRoundPercent&&(f=Math.round(f)),n.css("width",f+"%"),(a=(r.helpers.getPX(n.css("width"))/e(p).outerWidth()*100).toFixed(2))!==f&&n.css("width",a+"%"),n.css("height","").removeAttr("height")}else f+s>=r.opts.imageMinWidth&&n.css("width",f+s),(a=r.helpers.getPX(n.css("width")))!==f+s&&n.css("width",a),n.css("height",l.data("start-height")*n.width()/l.data("start-width"));x(),r.events.trigger("image.resize",[ve()])}}function T(e){if(!r.core.sameInstance(o))return!0;if(l&&n){if(e&&e.stopPropagation(),r.$el.find("img.fr-error").left)return!1;l=null,f.hide(),x(),w(),r.undo.saveStep(),r.events.trigger("image.resizeEnd",[ve()])}}function F(e,t,a){r.edit.on(),n&&n.addClass("fr-error"),function(e){_();var t=r.popups.get("image.insert").find(".fr-image-progress-bar-layer");t.addClass("fr-error");var a=t.find("h3");a.text(e),r.events.disableBlur(),a.focus()}(r.language.translate("Something went wrong. Please try again.")),!n&&a&&te(a),r.events.trigger("image.error",[{code:e,message:y[e]},t,a])}function O(e){if(e)return r.$wp&&r.events.$on(r.$wp,"scroll",function(){n&&r.popups.isVisible("image.edit")&&(r.events.disableBlur(),U(n))}),!0;var t="";if(r.opts.imageEditButtons.length>0){t+='<div class="fr-buttons">',t+=r.button.buildList(r.opts.imageEditButtons);var a={buttons:t+="</div>"};return r.popups.create("image.edit",a)}return!1}function _(e){var t=r.popups.get("image.insert");if(t||(t=G()),t.find(".fr-layer.fr-active").removeClass("fr-active").addClass("fr-pactive"),t.find(".fr-image-progress-bar-layer").addClass("fr-active"),t.find(".fr-buttons").hide(),n){r.popups.setContainer("image.insert",r.$sc);var a=n.offset().left+n.width()/2,i=n.offset().top+n.height();r.popups.show("image.insert",a,i,n.outerHeight())}void 0===e&&P(r.language.translate("Uploading"),0)}function B(e){var t=r.popups.get("image.insert");if(t&&(t.find(".fr-layer.fr-pactive").addClass("fr-active").removeClass("fr-pactive"),t.find(".fr-image-progress-bar-layer").removeClass("fr-active"),t.find(".fr-buttons").show(),e||r.$el.find("img.fr-error").length)){if(r.events.focus(),r.$el.find("img.fr-error").length&&(r.$el.find("img.fr-error").remove(),r.undo.saveStep(),r.undo.run(),r.undo.dropRedo()),!r.$wp&&n){var a=n;le(!0),r.selection.setAfter(a.get(0)),r.selection.restore()}r.popups.hide("image.insert")}}function P(e,t){var a=r.popups.get("image.insert");if(a){var i=a.find(".fr-image-progress-bar-layer");i.find("h3").text(e+(t?" "+t+"%":"")),i.removeClass("fr-error"),t?(i.find("div").removeClass("fr-indeterminate"),i.find("div > span").css("width",t+"%")):i.find("div").addClass("fr-indeterminate")}}function U(e){oe.call(e.get(0))}function N(){var t=e(this);r.popups.hide("image.insert"),t.removeClass("fr-uploading"),t.next().is("br")&&t.next().remove(),U(t),r.events.trigger("image.loaded",[t])}function M(e,t,a,i,s){r.edit.off(),P(r.language.translate("Loading image")),t&&(e=r.helpers.sanitizeURL(e));var n=new Image;n.onload=function(){var t,n;if(i){r.undo.canDo()||i.hasClass("fr-uploading")||r.undo.saveStep();var o=i.data("fr-old-src");i.data("fr-image-pasted")&&(o=null),r.$wp?((t=i.clone().removeData("fr-old-src").removeClass("fr-uploading").removeAttr("data-fr-image-pasted")).off("load"),o&&i.attr("src",o),i.replaceWith(t)):t=i;for(var l=t.get(0).attributes,f=0;f<l.length;f++){var p=l[f];0===p.nodeName.indexOf("data-")&&t.removeAttr(p.nodeName)}if(void 0!==a)for(n in a)a.hasOwnProperty(n)&&"path_external"!=n&&"path_internal"!=n&&t.attr("data-"+n,a[n]);t.on("load",N),t.attr("src",e),r.edit.on(),D(!1),r.undo.saveStep(),r.$el.blur(),r.events.trigger(o?"image.replaced":"image.inserted",[t,s])}else t=W(e,a,N),D(!1),r.undo.saveStep(),r.events.trigger("image.inserted",[t,s])},n.onerror=function(){F(u)},_(r.language.translate("Loading image")),n.src=e}function z(a){P(r.language.translate("Loading image"));var i=this.status,n=this.response,o=this.responseXML,l=this.responseText;try{if(r.opts.imageUploadToS3)if(201==i){var f=function(t){try{var a=e(t).find("Location").text(),i=e(t).find("Key").text();return!1===r.events.trigger("image.uploadedToS3",[a,i,t],!0)?(r.edit.on(),!1):a}catch(e){return F(h,t),!1}}(o);f&&M(f,!1,[],a,n||o)}else F(h,n||o,a);else if(i>=200&&i<300){var p,d=function(t){try{if(!1===r.events.trigger("image.uploaded",[t],!0))return r.edit.on(),!1;var a=e.parseJSON(t);return a.path_external||a.data.path_external?a:(F(c,t),!1)}catch(e){return F(h,t),!1}}(l);if(d)"admin"!=s&&"campaign-setup"!=s&&"campaign-manager"!=s&&"rewards"!=s||(d.path_external?p=t+"/static/images/"+d.path_external:d.data.path_external&&(p=t+"/static/images/"+d.data.path_external)),M(p,!1,d,a,n||l)}else F(m,n||l,a)}catch(e){F(h,n||l,a)}}function L(){F(h,this.response||this.responseText||this.responseXML)}function K(e){if(e.lengthComputable){var t=e.loaded/e.total*100|0;P(r.language.translate("Uploading"),t)}}function W(t,a,i){var s,n="";if(a&&void 0!==a)for(s in a)a.hasOwnProperty(s)&&"link"!=s&&"path_internal"!=s&&(n+=" data-"+s+'="'+a[s]+'"');var o=r.opts.imageDefaultWidth;o&&"auto"!=o&&(o+=r.opts.imageResizeWithPercent?"%":"px");var l=e('<img src="'+t+'"'+n+(o?' style="width: '+o+';"':"")+">");ge(l,r.opts.imageDefaultDisplay,r.opts.imageDefaultAlign),l.on("load",i),r.edit.on(),r.events.focus(!0),r.selection.restore(),r.undo.saveStep(),r.opts.imageSplitHTML?r.markers.split():r.markers.insert();var f=r.$el.find(".fr-marker");return f.length?(f.parent().is("hr")&&f.parent().after(f),r.node.isLastSibling(f)&&f.parent().hasClass("fr-deletable")&&f.insertAfter(f.parent()),f.replaceWith(l)):r.$el.append(l),r.html.wrap(),r.selection.clear(),l}function H(o,l){if(void 0!==o&&o.length>0){if(!1===r.events.trigger("image.beforeUpload",[o]))return!1;var f,p=o[0];if(p.name||(p.name=(new Date).getTime()+".jpg"),p.size>r.opts.imageMaxSize)return F(v),!1;if(r.opts.imageAllowedTypes.indexOf(p.type.replace(/image\//g,""))<0)return F(b),!1;if(r.drag_support.formdata&&(f=r.drag_support.formdata?new FormData:null),f){var d;if(!1!==r.opts.imageUploadToS3)for(d in f.append("key",r.opts.imageUploadToS3.keyStart+(new Date).getTime()+"-"+(p.name||"untitled")),f.append("success_action_status","201"),f.append("X-Requested-With","xhr"),f.append("Content-Type",p.type),r.opts.imageUploadToS3.params)r.opts.imageUploadToS3.params.hasOwnProperty(d)&&f.append(d,r.opts.imageUploadToS3.params[d]);for(d in r.opts.imageUploadParams)r.opts.imageUploadParams.hasOwnProperty(d)&&f.append(d,r.opts.imageUploadParams[d]);f.append(r.opts.imageUploadParam,p);r.opts.imageUploadURL;r.opts.imageUploadToS3&&(r.opts.imageUploadToS3.uploadURL?r.opts.imageUploadToS3.uploadURL:"https://"+r.opts.imageUploadToS3.region+".amazonaws.com/"+r.opts.imageUploadToS3.bucket),t=e("textarea[data-server]").attr("data-server"),a=e("textarea[data-server]").attr("data-loc"),i=window.location.href.replace(document.getElementsByTagName("base")[0].href,""),s=i.split("/")[0];var g=new XMLHttpRequest,u=new FormData;if(u.append("success_action_status","200"),u.append("X-Requested-With","xhr"),u.append("Content-Type",p.type),"admin"==s){var c=t+a+"portal/resource/file";g.open("POST",c,!0),u.append("resource_type","file"),u.append("resource_content_type","image"),u.append("resource",p),u.append("region_id","1")}else if("campaign-setup"==s||"rewards"==s||"campaign-manager"==s){var m;m="campaign-manager"==s?i.split("/")[2]:i.split("/")[1];c=t+a+"campaign/"+m+"/resource/file";g.open("POST",c,!0),u.append("entry_id",m),u.append("resource_type","file"),u.append("resource_content_type","image"),u.append("resource",p),u.append("region_id","2")}g.withCredentials=!0;var h=n,y=function(e){for(var t=e+"=",a=document.cookie.split(";"),i=0;i<a.length;i++){for(var s=a[i];" "==s.charAt(0);)s=s.substring(1,s.length);if(0==s.indexOf(t))return s.substring(t.length,s.length)}return null}("current.user");y&&(y=JSON.parse(decodeURIComponent(y)),g.setRequestHeader("X-Auth-Token",y.auth_token)),g.onload=function(){z.call(g,h)},g.onerror=L,g.upload.onprogress=K,_(),r.edit.off(),g.send(u)}}}function Y(t){var a=t.originalEvent.dataTransfer;if(a&&a.files&&a.files.length){var i=a.files[0];if(i&&i.type&&-1!==i.type.indexOf("image")){r.markers.remove(),r.markers.insertAtPoint(t.originalEvent),r.$el.find(".fr-marker").replaceWith(e.FE.MARKERS),0===r.$el.find(".fr-marker").length&&r.selection.setAtEnd(r.el),r.popups.hideAll();var s=r.popups.get("image.insert");s||(s=G()),r.popups.setContainer("image.insert",r.$sc);var n=t.originalEvent.pageX,o=t.originalEvent.pageY;return r.opts.iframe&&(o+=r.$iframe.offset().top,n+=r.$iframe.offset().left),r.popups.show("image.insert",n,o),_(),r.opts.imageAllowedTypes.indexOf(i.type.replace(/image\//g,""))>=0?(le(!0),H(a.files)):F(b),t.preventDefault(),t.stopPropagation(),!1}}}function X(){var t,a,i=r.selection.ranges(0);i.collapsed&&i.startContainer.nodeType==Node.ELEMENT_NODE&&(i.startContainer.childNodes.length==i.startOffset?(t=i.startContainer.childNodes[i.startOffset-1])&&"IMG"==t.tagName&&"block"==e(t).css("display")&&((a=r.node.blockParent(t))&&r.html.defaultTag()?a.nextSibling||(["TD","TH"].indexOf(a.tagName)<0?e(a).after("<"+r.html.defaultTag()+"><br>"+e.FE.MARKERS+"</"+r.html.defaultTag()+">"):e(t).after("<br>"+e.FE.MARKERS),r.selection.restore()):a||(e(t).after("<br>"+e.FE.MARKERS),r.selection.restore())):0===i.startOffset&&i.startContainer.childNodes.length>i.startOffset&&(t=i.startContainer.childNodes[i.startOffset])&&"IMG"==t.tagName&&"block"==e(t).css("display")&&((a=r.node.blockParent(t))&&r.html.defaultTag()?a.previousSibling||(["TD","TH"].indexOf(a.tagName)<0?e(a).before("<"+r.html.defaultTag()+"><br>"+e.FE.MARKERS+"</"+r.html.defaultTag()+">"):e(t).before("<br>"+e.FE.MARKERS),r.selection.restore()):a||(e(t).before(e.FE.MARKERS+"<br>"),r.selection.restore())))}function G(t){if(t)return r.popups.onRefresh("image.insert",E),r.popups.onHide("image.insert",C),!0;var a,i="";r.opts.imageInsertButtons.length>1&&(i='<div class="fr-buttons">'+r.button.buildList(r.opts.imageInsertButtons)+"</div>");var s=r.opts.imageInsertButtons.indexOf("imageUpload"),o=r.opts.imageInsertButtons.indexOf("imageByURL"),l="";s>=0&&(a=" fr-active",o>=0&&s>o&&(a=""),l='<div class="fr-image-upload-layer'+a+' fr-layer" id="fr-image-upload-layer-'+r.id+'"><strong>'+r.language.translate("Drop image")+"</strong><br>("+r.language.translate("or click")+')<div class="fr-form"><input type="file" accept="image/'+r.opts.imageAllowedTypes.join(", image/").toLowerCase()+'" tabIndex="-1" aria-labelledby="fr-image-upload-layer-'+r.id+'" role="button"></div></div>');var f="";o>=0&&(a=" fr-active",s>=0&&o>s&&(a=""),f='<div class="fr-image-by-url-layer'+a+' fr-layer" id="fr-image-by-url-layer-'+r.id+'"><div class="fr-input-line"><input id="fr-image-by-url-layer-text-'+r.id+'" type="text" placeholder="http://" tabIndex="1" aria-required="true"></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-submit" data-cmd="imageInsertByURL" tabIndex="2" role="button">'+r.language.translate("Insert")+"</button></div></div>");var p={buttons:i,upload_layer:l,by_url_layer:f,progress_bar:'<div class="fr-image-progress-bar-layer fr-layer"><h3 tabIndex="-1" class="fr-message">Uploading</h3><div class="fr-loader"><span class="fr-progress"></span></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-dismiss" data-cmd="imageDismissError" tabIndex="2" role="button">OK</button></div></div>'},d=r.popups.create("image.insert",p);return r.$wp&&r.events.$on(r.$wp,"scroll",function(){n&&r.popups.isVisible("image.insert")&&me()}),function(t){r.events.$on(t,"dragover dragenter",".fr-image-upload-layer",function(){return e(this).addClass("fr-drop"),!1}),r.events.$on(t,"dragleave dragend",".fr-image-upload-layer",function(){return e(this).removeClass("fr-drop"),!1}),r.events.$on(t,"drop",".fr-image-upload-layer",function(a){a.preventDefault(),a.stopPropagation(),e(this).removeClass("fr-drop");var i=a.originalEvent.dataTransfer;if(i&&i.files){var s=t.data("instance")||r;s.events.disableBlur(),s.image.upload(i.files),s.events.enableBlur()}}),r.events.$on(t,"change",'.fr-image-upload-layer input[type="file"]',function(){if(this.files){var a=t.data("instance")||r;a.events.disableBlur(),t.find("input:focus").blur(),a.events.enableBlur(),a.image.upload(this.files)}e(this).val("")})}(d),d}function j(){n&&r.popups.get("image.alt").find("input").val(n.attr("alt")||"").trigger("change")}function q(){var e=r.popups.get("image.alt");e||(e=V()),B(),r.popups.refresh("image.alt"),r.popups.setContainer("image.alt",r.$sc);var t=n.offset().left+n.width()/2,a=n.offset().top+n.height();r.popups.show("image.alt",t,a,n.outerHeight())}function V(e){if(e)return r.popups.onRefresh("image.alt",j),!0;var t={buttons:'<div class="fr-buttons">'+r.button.buildList(r.opts.imageAltButtons)+"</div>",alt_layer:'<div class="fr-image-alt-layer fr-layer fr-active" id="fr-image-alt-layer-'+r.id+'"><div class="fr-input-line"><input id="fr-image-alt-layer-text-'+r.id+'" type="text" placeholder="'+r.language.translate("Alternate Text")+'" tabIndex="1"></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-submit" data-cmd="imageSetAlt" tabIndex="2" role="button">'+r.language.translate("Update")+"</button></div></div>"},a=r.popups.create("image.alt",t);return r.$wp&&r.events.$on(r.$wp,"scroll.image-alt",function(){n&&r.popups.isVisible("image.alt")&&q()}),a}function Q(){if(n){var e=r.popups.get("image.size");e.find('input[name="width"]').val(n.get(0).style.width).trigger("change"),e.find('input[name="height"]').val(n.get(0).style.height).trigger("change")}}function J(){var e=r.popups.get("image.size");e||(e=Z()),B(),r.popups.refresh("image.size"),r.popups.setContainer("image.size",r.$sc);var t=n.offset().left+n.width()/2,a=n.offset().top+n.height();r.popups.show("image.size",t,a,n.outerHeight())}function Z(e){if(e)return r.popups.onRefresh("image.size",Q),!0;var t={buttons:'<div class="fr-buttons">'+r.button.buildList(r.opts.imageSizeButtons)+"</div>",size_layer:'<div class="fr-image-size-layer fr-layer fr-active" id="fr-image-size-layer-'+r.id+'"><div class="fr-image-group"><div class="fr-input-line"><input id="fr-image-size-layer-width-'+r.id+'" type="text" name="width" placeholder="'+r.language.translate("Width")+'" tabIndex="1"></div><div class="fr-input-line"><input id="fr-image-size-layer-height'+r.id+'" type="text" name="height" placeholder="'+r.language.translate("Height")+'" tabIndex="1"></div></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-submit" data-cmd="imageSetSize" tabIndex="2" role="button">'+r.language.translate("Update")+"</button></div></div>"},a=r.popups.create("image.size",t);return r.$wp&&r.events.$on(r.$wp,"scroll.image-size",function(){n&&r.popups.isVisible("image.size")&&J()}),a}function ee(e,t,a,i){return e.pageX=t,I.call(this,e),e.pageX=e.pageX+a*Math.floor(Math.pow(1.1,i)),k.call(this,e),T.call(this,e),++i}function te(t){(t=t||n)&&!1!==r.events.trigger("image.beforeRemove",[t])&&(r.popups.hideAll(),he(),le(!0),r.undo.canDo()||r.undo.saveStep(),t.get(0)==r.el?t.removeAttr("src"):("A"==t.get(0).parentNode.tagName?(r.selection.setBefore(t.get(0).parentNode)||r.selection.setAfter(t.get(0).parentNode)||t.parent().after(e.FE.MARKERS),e(t.get(0).parentNode).remove()):(r.selection.setBefore(t.get(0))||r.selection.setAfter(t.get(0))||t.after(e.FE.MARKERS),t.remove()),r.html.fillEmptyBlocks(),r.selection.restore()),r.undo.saveStep())}function ae(t){var a=t.which;if(n&&(a==e.FE.KEYCODE.BACKSPACE||a==e.FE.KEYCODE.DELETE))return t.preventDefault(),t.stopPropagation(),te(),!1;if(n&&a==e.FE.KEYCODE.ESC){var i=n;return le(!0),r.selection.setAfter(i.get(0)),r.selection.restore(),t.preventDefault(),!1}if(n&&(a==e.FE.KEYCODE.ARROW_LEFT||a==e.FE.KEYCODE.ARROW_RIGHT)){var s=n.get(0);return le(!0),a==e.FE.KEYCODE.ARROW_LEFT?r.selection.setBefore(s):r.selection.setAfter(s),r.selection.restore(),t.preventDefault(),!1}return n&&a!=e.FE.KEYCODE.F10&&!r.keys.isBrowserAction(t)?(t.preventDefault(),t.stopPropagation(),!1):void 0}function ie(e){if(e&&"IMG"==e.tagName)r.node.hasClass(e,"fr-uploading")||r.node.hasClass(e,"fr-error")?e.parentNode.removeChild(e):r.node.hasClass(e,"fr-draggable")&&e.classList.remove("fr-draggable");else if(e&&e.nodeType==Node.ELEMENT_NODE)for(var t=e.querySelectorAll("img.fr-uploading, img.fr-error, img.fr-draggable"),a=0;a<t.length;a++)ie(t[a])}function se(){r.opts.imagePaste?r.$el.find("img[data-fr-image-pasted]").each(function(t,a){if(r.opts.imagePasteProcess){var i=r.opts.imageDefaultWidth;i&&"auto"!=i&&(i+=r.opts.imageResizeWithPercent?"%":"px"),e(a).css("width",i),e(a).removeClass("fr-dii fr-dib fr-fir fr-fil").addClass((r.opts.imageDefaultDisplay?"fr-di"+r.opts.imageDefaultDisplay[0]:"")+(r.opts.imageDefaultAlign&&"center"!=r.opts.imageDefaultAlign?" fr-fi"+r.opts.imageDefaultAlign[0]:""))}if(0===a.src.indexOf("data:")){if(!1===r.events.trigger("image.beforePasteUpload",[a]))return!1;n=e(a),x(),w(),me(),_(),r.edit.off();for(var s=atob(e(a).attr("src").split(",")[1]),o=[],l=0;l<s.length;l++)o.push(s.charCodeAt(l));H([new Blob([new Uint8Array(o)],{type:"image/jpeg"})])}else 0!==a.src.indexOf("http")||0===a.src.indexOf("https://mail.google.com/mail")?(r.selection.save(),e(a).remove(),r.selection.restore()):e(a).removeAttr("data-fr-image-pasted")}):r.$el.find("img[data-fr-image-pasted]").remove()}function re(e){if(e&&e.clipboardData&&e.clipboardData.items&&e.clipboardData.items[0]){var t=e.clipboardData.items[0].getAsFile();if(t){var a=new FileReader;return a.onload=function(e){var t=e.target.result,a=r.opts.imageDefaultWidth;a&&"auto"!=a&&(a+=r.opts.imageResizeWithPercent?"%":"px"),r.html.insert('<img data-fr-image-pasted="true" class="'+(r.opts.imageDefaultDisplay?"fr-di"+r.opts.imageDefaultDisplay[0]:"")+(r.opts.imageDefaultAlign&&"center"!=r.opts.imageDefaultAlign?" fr-fi"+r.opts.imageDefaultAlign[0]:"")+'" src="'+t+'"'+(a?' style="width: '+a+';"':"")+">"),r.events.trigger("paste.after")},a.readAsDataURL(t),!1}}}function ne(e){return e=e.replace(/<img /gi,'<img data-fr-image-pasted="true" ')}function oe(t){if("false"==e(this).parents("[contenteditable]:not(.fr-element):not(body):first").attr("contenteditable"))return!0;if(t&&"touchend"==t.type&&d)return!0;if(t&&r.edit.isDisabled())return t.stopPropagation(),t.preventDefault(),!1;for(var a=0;a<e.FE.INSTANCES.length;a++)e.FE.INSTANCES[a]!=r&&e.FE.INSTANCES[a].events.trigger("image.hideResizer");r.toolbar.disable(),t&&(t.stopPropagation(),t.preventDefault()),r.helpers.isMobile()&&(r.events.disableBlur(),r.$el.blur(),r.events.enableBlur()),r.opts.iframe&&r.size.syncIframe(),n=e(this),he(),x(),w(),r.selection.clear(),r.button.bulkRefresh(),r.events.trigger("video.hideResizer")}function le(e){n&&(fe||!0===e)&&(r.toolbar.enable(),o.removeClass("fr-active"),r.popups.hide("image.edit"),n=null,de())}y[u]="Image cannot be loaded from the passed link.",y[c]="No link in upload response.",y[m]="Error during file upload.",y[h]="Parsing response failed.",y[v]="File is too large.",y[b]="Image file type is invalid.",y[7]="Files can be uploaded only to same domain in IE 8 and IE 9.";var fe=!1;function pe(){fe=!0}function de(){fe=!1}function ge(e,t,a){!r.opts.htmlUntouched&&r.opts.useClasses?(e.removeClass("fr-fil fr-fir fr-dib fr-dii"),a&&e.addClass("fr-fi"+a[0]),t&&e.addClass("fr-di"+t[0])):"inline"==t?(e.css({display:"inline-block",verticalAlign:"bottom",margin:r.opts.imageDefaultMargin}),"center"==a?e.css({float:"none",marginBottom:"",marginTop:"",maxWidth:"calc(100% - "+2*r.opts.imageDefaultMargin+"px)"}):"left"==a?e.css({float:"left",marginLeft:0,maxWidth:"calc(100% - "+r.opts.imageDefaultMargin+"px)"}):e.css({float:"right",marginRight:0,maxWidth:"calc(100% - "+r.opts.imageDefaultMargin+"px)"})):"block"==t&&(e.css({display:"block",float:"none",verticalAlign:"top",margin:r.opts.imageDefaultMargin+"px auto"}),"left"==a?e.css({marginLeft:0}):"right"==a&&e.css({marginRight:0}))}function ue(e){if(void 0===e&&(e=n),e){if(e.hasClass("fr-fil"))return"left";if(e.hasClass("fr-fir"))return"right";if(e.hasClass("fr-dib")||e.hasClass("fr-dii"))return"center";var t=e.css("float");if(e.css("float","none"),"block"==e.css("display")){if(e.css("float",""),e.css("float")!=t&&e.css("float",t),0===parseInt(e.css("margin-left"),10))return"left";if(0===parseInt(e.css("margin-right"),10))return"right"}else{if(e.css("float",""),e.css("float")!=t&&e.css("float",t),"left"==e.css("float"))return"left";if("right"==e.css("float"))return"right"}}return"center"}function ce(e){void 0===e&&(e=n);var t=e.css("float");return e.css("float","none"),"block"==e.css("display")?(e.css("float",""),e.css("float")!=t&&e.css("float",t),"block"):(e.css("float",""),e.css("float")!=t&&e.css("float",t),"inline")}function me(){var e=r.popups.get("image.insert");e||(e=G()),r.popups.isVisible("image.insert")||(B(),r.popups.refresh("image.insert"),r.popups.setContainer("image.insert",r.$sc));var t=n.offset().left+n.width()/2,a=n.offset().top+n.height();r.popups.show("image.insert",t,a,n.outerHeight())}function he(){if(n){r.selection.clear();var e=r.doc.createRange();e.selectNode(n.get(0)),r.selection.get().addRange(e)}}function ve(){return n}return{_init:function(){var t;r.events.$on(r.$el,r._mousedown,"IMG"==r.el.tagName?null:'img:not([contenteditable="false"])',function(t){if("false"==e(this).parents("[contenteditable]:not(.fr-element):not(body):first").attr("contenteditable"))return!0;r.helpers.isMobile()||r.selection.clear(),g=!0,r.popups.areVisible()&&r.events.disableBlur(),r.browser.msie&&(r.events.disableBlur(),r.$el.attr("contenteditable",!1)),r.draggable||t.preventDefault(),t.stopPropagation()}),r.events.$on(r.$el,r._mouseup,"IMG"==r.el.tagName?null:'img:not([contenteditable="false"])',function(t){if("false"==e(this).parents("[contenteditable]:not(.fr-element):not(body):first").attr("contenteditable"))return!0;g&&(g=!1,t.stopPropagation(),r.browser.msie&&(r.$el.attr("contenteditable",!0),r.events.enableBlur()))}),r.events.on("keyup",function(t){if(t.shiftKey&&""===r.selection.text().replace(/\n/g,"")){var a=r.selection.element(),i=r.selection.endElement();a&&"IMG"==a.tagName?U(e(a)):i&&"IMG"==i.tagName&&U(e(i))}},!0),r.events.on("drop",Y),r.events.on("mousedown window.mousedown",pe),r.events.on("window.touchmove",de),r.events.on("mouseup window.mouseup",function(){if(n)return le(),!1;de()}),r.events.on("commands.mousedown",function(e){e.parents(".fr-toolbar").length>0&&le()}),r.browser.edge||r.events.on("mouseup",X),r.events.on("blur image.hideResizer commands.undo commands.redo element.dropped",function(){g=!1,le(!0)}),r.events.on("modals.hide",function(){n&&(he(),r.selection.clear())}),"IMG"==r.el.tagName&&r.$el.addClass("fr-view"),r.events.$on(r.$el,r.helpers.isMobile()&&!r.helpers.isWindowsPhone()?"touchend":"click","IMG"==r.el.tagName?null:'img:not([contenteditable="false"])',oe),r.helpers.isMobile()&&(r.events.$on(r.$el,"touchstart","IMG"==r.el.tagName?null:'img:not([contenteditable="false"])',function(){d=!1}),r.events.$on(r.$el,"touchmove",function(){d=!0})),r.$wp?(r.events.on("window.keydown keydown",ae,!0),r.events.on("keyup",function(t){if(n&&t.which==e.FE.KEYCODE.ENTER)return!1},!0)):r.events.$on(r.$win,"keydown",ae),r.events.on("toolbar.esc",function(){if(n){if(r.$wp)r.events.disableBlur(),r.events.focus();else{var e=n;le(!0),r.selection.setAfter(e.get(0)),r.selection.restore()}return!1}},!0),r.events.on("toolbar.focusEditor",function(){if(n)return!1},!0),r.events.on("window.cut window.copy",function(e){n&&r.popups.isVisible("image.edit")&&!r.popups.get("image.edit").find(":focus").length&&(he(),r.paste.saveCopiedText(n.get(0).outerHTML,"\n"),"copy"==e.type?setTimeout(function(){U(n)}):(le(!0),r.undo.saveStep(),setTimeout(function(){r.undo.saveStep()},0)))},!0),r.events.$on(e(r.o_win),"keydown",function(t){var a=t.which;if(n&&a==e.FE.KEYCODE.BACKSPACE)return t.preventDefault(),!1}),r.events.$on(r.$win,"keydown",function(t){var a=t.which;n&&n.hasClass("fr-uploading")&&a==e.FE.KEYCODE.ESC&&n.trigger("abortUpload")}),r.events.on("destroy",function(){n&&n.hasClass("fr-uploading")&&n.trigger("abortUpload")}),r.events.on("paste.before",re),r.events.on("paste.beforeCleanup",ne),r.events.on("paste.after",se),r.events.on("html.set",R),r.events.on("html.inserted",R),R(),r.events.on("destroy",function(){p=[]}),r.events.on("html.processGet",ie),r.opts.imageOutputSize&&r.events.on("html.beforeGet",function(){t=r.el.querySelectorAll("img");for(var a=0;a<t.length;a++){var i=t[a].style.width||e(t[a]).width(),s=t[a].style.height||e(t[a]).height();i&&t[a].setAttribute("width",(""+i).replace(/px/,"")),s&&t[a].setAttribute("height",(""+s).replace(/px/,""))}}),r.opts.iframe&&r.events.on("image.loaded",r.size.syncIframe),r.$wp&&(D(),r.events.on("contentChanged",D)),r.events.$on(e(r.o_win),"orientationchange.image",function(){setTimeout(function(){n&&U(n)},100)}),O(!0),G(!0),Z(!0),V(!0),r.events.on("node.remove",function(e){if("IMG"==e.get(0).tagName)return te(e),!1})},showInsertPopup:function(){var e=r.$tb.find('.fr-command[data-cmd="insertImage"]'),t=r.popups.get("image.insert");if(t||(t=G()),B(),!t.hasClass("fr-active"))if(r.popups.refresh("image.insert"),r.popups.setContainer("image.insert",r.$tb),e.is(":visible")){var a=e.offset().left+e.outerWidth()/2,i=e.offset().top+(r.opts.toolbarBottom?10:e.outerHeight()-10);r.popups.show("image.insert",a,i,e.outerHeight())}else r.position.forSelection(t),r.popups.show("image.insert")},showLayer:function(e){var t,a,i=r.popups.get("image.insert");if(n||r.opts.toolbarInline)n&&(a=n.offset().top+n.outerHeight());else{var s=r.$tb.find('.fr-command[data-cmd="insertImage"]');t=s.offset().left+s.outerWidth()/2,a=s.offset().top+(r.opts.toolbarBottom?10:s.outerHeight()-10)}!n&&r.opts.toolbarInline&&(a=i.offset().top-r.helpers.getPX(i.css("margin-top")),i.hasClass("fr-above")&&(a+=i.outerHeight())),i.find(".fr-layer").removeClass("fr-active"),i.find(".fr-"+e+"-layer").addClass("fr-active"),r.popups.show("image.insert",t,a,n?n.outerHeight():0),r.accessibility.focusPopup(i)},refreshUploadButton:function(e){r.popups.get("image.insert").find(".fr-image-upload-layer").hasClass("fr-active")&&e.addClass("fr-active").attr("aria-pressed",!0)},refreshByURLButton:function(e){r.popups.get("image.insert").find(".fr-image-by-url-layer").hasClass("fr-active")&&e.addClass("fr-active").attr("aria-pressed",!0)},upload:H,insertByURL:function(){var e=r.popups.get("image.insert").find(".fr-image-by-url-layer input");e.val().length>0&&(_(),P(r.language.translate("Loading image")),M(e.val(),!0,[],n),e.val(""),e.blur())},align:function(e){n.removeClass("fr-fir fr-fil"),!r.opts.htmlUntouched&&r.opts.useClasses?"left"==e?n.addClass("fr-fil"):"right"==e&&n.addClass("fr-fir"):ge(n,ce(),e),he(),x(),w(),r.selection.clear()},refreshAlign:function(e){n&&e.find("> *:first").replaceWith(r.icon.create("image-align-"+ue()))},refreshAlignOnShow:function(e,t){n&&t.find('.fr-command[data-param1="'+ue()+'"]').addClass("fr-active").attr("aria-selected",!0)},display:function(e){n.removeClass("fr-dii fr-dib"),!r.opts.htmlUntouched&&r.opts.useClasses?"inline"==e?n.addClass("fr-dii"):"block"==e&&n.addClass("fr-dib"):ge(n,e,ue()),he(),x(),w(),r.selection.clear()},refreshDisplayOnShow:function(e,t){n&&t.find('.fr-command[data-param1="'+ce()+'"]').addClass("fr-active").attr("aria-selected",!0)},replace:me,back:function(){n?(r.events.disableBlur(),e(".fr-popup input:focus").blur(),U(n)):(r.events.disableBlur(),r.selection.restore(),r.events.enableBlur(),r.popups.hide("image.insert"),r.toolbar.showInline())},get:ve,insert:M,showProgressBar:_,remove:te,hideProgressBar:B,applyStyle:function(e,t,a){if(void 0===t&&(t=r.opts.imageStyles),void 0===a&&(a=r.opts.imageMultipleStyles),!n)return!1;if(!a){var i=Object.keys(t);i.splice(i.indexOf(e),1),n.removeClass(i.join(" "))}"object"==typeof t[e]?(n.removeAttr("style"),n.css(t[e].style)):n.toggleClass(e),U(n)},showAltPopup:q,showSizePopup:J,setAlt:function(e){if(n){var t=r.popups.get("image.alt");n.attr("alt",e||t.find("input").val()||""),t.find("input:focus").blur(),U(n)}},setSize:function(e,t){if(n){var a=r.popups.get("image.size");e=e||a.find('input[name="width"]').val()||"",t=t||a.find('input[name="height"]').val()||"";var i=/^[\d]+((px)|%)*$/g;e.match(i)?n.css("width",e):n.css("width",""),t.match(i)?n.css("height",t):n.css("height",""),a.find("input:focus").blur(),U(n)}},exitEdit:le,edit:U}},e.FE.DefineIcon("insertImage",{NAME:"image"}),e.FE.RegisterShortcut(e.FE.KEYCODE.P,"insertImage",null,"P"),e.FE.RegisterCommand("insertImage",{title:"Insert Image",undo:!1,focus:!0,refreshAfterCallback:!1,popup:!0,callback:function(){this.popups.isVisible("image.insert")?(this.$el.find(".fr-marker").length&&(this.events.disableBlur(),this.selection.restore()),this.popups.hide("image.insert")):this.image.showInsertPopup()},plugin:"image"}),e.FE.DefineIcon("imageUpload",{NAME:"upload"}),e.FE.RegisterCommand("imageUpload",{title:"Upload Image",undo:!1,focus:!1,toggle:!0,callback:function(){this.image.showLayer("image-upload")},refresh:function(e){this.image.refreshUploadButton(e)}}),e.FE.DefineIcon("imageByURL",{NAME:"link"}),e.FE.RegisterCommand("imageByURL",{title:"By URL",undo:!1,focus:!1,toggle:!0,callback:function(){this.image.showLayer("image-by-url")},refresh:function(e){this.image.refreshByURLButton(e)}}),e.FE.RegisterCommand("imageInsertByURL",{title:"Insert Image",undo:!0,refreshAfterCallback:!1,callback:function(){this.image.insertByURL()},refresh:function(e){this.image.get()?e.text(this.language.translate("Replace")):e.text(this.language.translate("Insert"))}}),e.FE.DefineIcon("imageDisplay",{NAME:"star"}),e.FE.RegisterCommand("imageDisplay",{title:"Display",type:"dropdown",options:{inline:"Inline",block:"Break Text"},callback:function(e,t){this.image.display(t)},refresh:function(e){this.opts.imageTextNear||e.addClass("fr-hidden")},refreshOnShow:function(e,t){this.image.refreshDisplayOnShow(e,t)}}),e.FE.DefineIcon("image-align",{NAME:"align-left"}),e.FE.DefineIcon("image-align-left",{NAME:"align-left"}),e.FE.DefineIcon("image-align-right",{NAME:"align-right"}),e.FE.DefineIcon("image-align-center",{NAME:"align-justify"}),e.FE.DefineIcon("imageAlign",{NAME:"align-justify"}),e.FE.RegisterCommand("imageAlign",{type:"dropdown",title:"Align",options:{left:"Align Left",center:"None",right:"Align Right"},html:function(){var t='<ul class="fr-dropdown-list" role="presentation">',a=e.FE.COMMANDS.imageAlign.options;for(var i in a)a.hasOwnProperty(i)&&(t+='<li role="presentation"><a class="fr-command fr-title" tabIndex="-1" role="option" data-cmd="imageAlign" data-param1="'+i+'" title="'+this.language.translate(a[i])+'">'+this.icon.create("image-align-"+i)+'<span class="fr-sr-only">'+this.language.translate(a[i])+"</span></a></li>");return t+="</ul>"},callback:function(e,t){this.image.align(t)},refresh:function(e){this.image.refreshAlign(e)},refreshOnShow:function(e,t){this.image.refreshAlignOnShow(e,t)}}),e.FE.DefineIcon("imageReplace",{NAME:"exchange"}),e.FE.RegisterCommand("imageReplace",{title:"Replace",undo:!1,focus:!1,popup:!0,refreshAfterCallback:!1,callback:function(){this.image.replace()}}),e.FE.DefineIcon("imageRemove",{NAME:"trash"}),e.FE.RegisterCommand("imageRemove",{title:"Remove",callback:function(){this.image.remove()}}),e.FE.DefineIcon("imageBack",{NAME:"arrow-left"}),e.FE.RegisterCommand("imageBack",{title:"Back",undo:!1,focus:!1,back:!0,callback:function(){this.image.back()},refresh:function(e){this.image.get()||this.opts.toolbarInline?(e.removeClass("fr-hidden"),e.next(".fr-separator").removeClass("fr-hidden")):(e.addClass("fr-hidden"),e.next(".fr-separator").addClass("fr-hidden"))}}),e.FE.RegisterCommand("imageDismissError",{title:"OK",undo:!1,callback:function(){this.image.hideProgressBar(!0)}}),e.FE.DefineIcon("imageStyle",{NAME:"magic"}),e.FE.RegisterCommand("imageStyle",{title:"Style",type:"dropdown",html:function(){var e='<ul class="fr-dropdown-list" role="presentation">',t=this.opts.imageStyles;for(var a in t)if(t.hasOwnProperty(a)){var i=t[a];"object"==typeof i&&(i=i.title),e+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="imageStyle" data-param1="'+a+'">'+this.language.translate(i)+"</a></li>"}return e+="</ul>"},callback:function(e,t){this.image.applyStyle(t)},refreshOnShow:function(t,a){var i=this.image.get();i&&a.find(".fr-command").each(function(){var t=e(this).data("param1"),a=i.hasClass(t);e(this).toggleClass("fr-active",a).attr("aria-selected",a)})}}),e.FE.DefineIcon("imageAlt",{NAME:"info"}),e.FE.RegisterCommand("imageAlt",{undo:!1,focus:!1,popup:!0,title:"Alternate Text",callback:function(){this.image.showAltPopup()}}),e.FE.RegisterCommand("imageSetAlt",{undo:!0,focus:!1,title:"Update",refreshAfterCallback:!1,callback:function(){this.image.setAlt()}}),e.FE.DefineIcon("imageSize",{NAME:"arrows-alt"}),e.FE.RegisterCommand("imageSize",{undo:!1,focus:!1,popup:!0,title:"Change Size",callback:function(){this.image.showSizePopup()}}),e.FE.RegisterCommand("imageSetSize",{undo:!0,focus:!1,title:"Update",refreshAfterCallback:!1,callback:function(){this.image.setSize()}})});
