app.controller("CreatorInviteCtrl",["$scope","UserService","CreatorInviteService","CreateCampaignService","$routeParams",function($scope,UserService,CreatorInviteService,CreateCampaignService,$routeParams){$scope.emails={},$scope.campaign_id=$routeParams.campaign_id,$scope.loading="not started",$("#invitedParticipants").progress({total:6,text:{active:"{value} invited participants",success:"{total} invited particpants"}}),CreateCampaignService.load($routeParams.campaign_id).then(data=>{$scope.campaign_name=data.name}).catch(error=>{console.error(error)}),$scope.sendEmails=function(emails){let sendObj=emails;if($scope.loading="started","started"===$scope.loading)return UserService.getPaidStatus(UserService.email).then(response=>{for(let person=1;person<7;person++)void 0!==emails["email"+person]&&void 0!==emails["name"+person]&&""!==emails["email"+person]&&""!==emails["name"+person]&&(person%2==0?(sendObj["campaign_id"+person]=$routeParams.campaign_id,sendObj["campaign_name"+person]=$scope.campaign_name):(sendObj["campaign_id"+person]=response.data.info.inviterInformation.campaign_id,sendObj["campaign_name"+person]=response.data.info.inviterInformation.campaign_name));sendObj.uid=response.data.info.id,CreatorInviteService.sendEmails(sendObj).then(invitationResponse=>{"email/successfulSend"===invitationResponse.data.info.code&&$("#invitedParticipants").progress("increment",parseInt(invitationResponse.data.info.successfulSends)),$scope.loading="finished"}).catch(err=>{})}).catch(err=>{console.error(err)})}}]);