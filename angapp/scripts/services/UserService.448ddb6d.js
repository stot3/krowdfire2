app.service("UserService",["$location","$http","$browser","APIRegister","ipCookie","Restangular","$timeout","redirectService","$translate",function($location,$http,$browser,APIRegister,ipCookie,Restangular,$timeout,redirectService,$translate){var User={email:"",first_name:"",last_name:"",auth_token:""};function copyObjectProperties(srcObj,destObj){for(var key in srcObj)destObj[key]=srcObj[key]}return User.updateUserData=function(data){if(!data)return!1;copyObjectProperties(data,User),ipCookie("current.user",User,{expires:1440,expirationUnit:"minutes",path:"/"})},User.isLoggedIn=function(){return!!ipCookie("current.user")&&(copyObjectProperties(ipCookie("current.user"),User),User.auth_token)},User.setLoggedIn=function(data,redirect){if(data.attributes&&delete data.attributes,redirect||(redirect=!1),!(data=data||ipCookie("current.user")))return!1;copyObjectProperties(data,User),ipCookie("current.user",data,{expires:1440,expirationUnit:"minutes",path:"/"});var url=redirectService.getUrl();return 0==redirect&&(url&&"/login"!=url&&"register"!=url.split("/")[1]&&"authenticate"!=url.split("/")[1]?$location.path(url):$location.path("/")),!0},User.setLoggedOut=function(okta_settings=null){ipCookie("current.user")&&ipCookie("current.user").auth_token?(ipCookie.remove("current.user",{path:"/"}),Restangular.one("logout").customPOST().then((function(success){User.email="",User.first_name="",User.last_name="",User.auth_token="",$location.path("/login")}),(function(failure){}))):(User.email="",User.first_name="",User.last_name="",User.auth_token="")},User}]);