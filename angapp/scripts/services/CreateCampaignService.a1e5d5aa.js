app.service("CreateCampaignService",["$q","$location","Restangular","PortalSettingsService",function($q,$location,Restangular,PortalSettingsService){var portalsetting,Campaign={campaign:{}};return PortalSettingsService.getSettingsObj().then((function(success){portalsetting=success.public_setting})),Campaign.load=function(campaignID){return Restangular.one("campaign",campaignID).customGET().then((function(success){return Campaign.cacheIn(success.plain()),success}),(function(failure){$location.path("404")}))},Campaign.cacheIn=function(campaignData){angular.forEach(campaignData,(function(value,key){Campaign[key]=value}))},Campaign.save=function(campaign){Campaign.copy(campaign),Restangular.one("campaign",campaign.id).customPUT(campaign)},Campaign.sendForReview=function(){if(1==portalsetting.site_payment_gateway)var data={entry_status_id:10};else if(3==portalsetting.site_payment_gateway)data={entry_status_id:10,use_paypal:1};else data={entry_status_id:10,use_widgetmakr:1};return Restangular.one("campaign",Campaign.entry_id).customPUT(data).then((function(success){Restangular.one("campaign",Campaign.entry_id).one("note").customGET().then((function(notes){notes&&angular.forEach(notes,(function(value){Restangular.one("campaign",Campaign.entry_id).one("note",value.id).customPUT({value:{name:""}})}))}))}))},Campaign}]);