app.directive("match",(function(){return{require:"ngModel",restrict:"A",scope:{match:"="},link:function(scope,elem,attrs,ctrl){scope.$watch("match",(function(pass){ctrl.$validate()})),ctrl.$validators.match=function(modelValue){return ctrl.$pristine&&(angular.isUndefined(modelValue)||""===modelValue)||modelValue===scope.match}}}})),app.directive("validateEmail",(function(){var EMAIL_REGEXP=/^[_a-z0-9]+(\.[_a-z0-9]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,4})$/;return{link:function(scope,elm){elm.on("keyup",(function(){var isMatchRegex=EMAIL_REGEXP.test(elm.val());isMatchRegex&&elm.hasClass("email-error")||""==elm.val()?elm.removeClass("email-error"):0!=isMatchRegex||elm.hasClass("email-error")||elm.addClass("email-error")}))}}})),app.directive("dropdown",["$timeout",function($timeout){return{restrict:"C",require:"?ngModel",link:function(scope,elm,attr,modelCtrl){elm.hasClass("ui")&&(modelCtrl&&(scope.$watch((function(){return modelCtrl.$modelValue}),(function(value){value&&$timeout((function(){elm.dropdown("set selected",value)}))})),elm.dropdown({onChange:function(value,text){modelCtrl.$setViewValue(value)}})),void 0!==attr.defaultValue&&void 0!==scope.default_card&&void 0!==scope.defaultindex?(elm.dropdown("set text",["<img src='images/cards/"+scope.default_card.stripe_account_card_type+".png'/>**** **** **** <span>"+scope.default_card.last4+"</span>"]).dropdown("set value",scope.default_card.last4),scope.cardSelected(scope.default_card,scope.defaultindex)):elm.dropdown())}}}]),app.directive("checkbox",["$timeout",function($timeout){return{restrict:"C",require:"?ngModel",link:function(scope,elm,attr,modelCtrl){if(elm.hasClass("ui"))if(elm.hasClass("radio"))if(modelCtrl){var radio_value=elm.find("input").attr("value");scope.$watch((function(){return modelCtrl.$modelValue}),(function(value){value&&value==radio_value&&$timeout((function(){elm.checkbox("check")}))})),elm.checkbox({onChange:function(){!!elm.checkbox("is checked")&&modelCtrl.$setViewValue(radio_value)}})}else elm.checkbox();else modelCtrl?(scope.$watch((function(){return modelCtrl.$modelValue}),(function(value){value&&$timeout((function(){elm.checkbox("check")}))})),elm.checkbox({onChange:function(){var temp=!!elm.checkbox("is checked");modelCtrl.$setViewValue(temp)}})):elm.checkbox()}}}]),app.directive("progress",["$timeout",function($timeout){return{restrict:"C",link:function(scope,elm,attr){elm.hasClass("ui")&&scope.$watch((function(){return attr.percent}),(function(value){isNaN(value)||elm.progress()}))}}}]),app.directive("suiPopup",["$timeout",function($timeout){return{restrict:"A",link:function(scope,elm,attr){elm.popup({context:"body .pusher"})}}}]),app.directive("ngAccord",["$timeout",function($timeout){return{restrict:"A",link:function(scope,elm,attr){elm.hasClass("sort-cat")?elm.accordion({selector:{exclusive:!1,trigger:".title .dropdown.icon"}}):elm.accordion({exclusive:!1})}}}]),app.directive("phoneNumberOnly",(function(){return{require:"ngModel",link:function(scope,element,attr,modelCtrl){var regex=/[^0-9 ]+/g;modelCtrl.$parsers.push((function(inputValue){if(null==inputValue)return"";var res=inputValue.match(regex),transformedInput=inputValue.replace(res,"");return transformedInput!=inputValue&&(modelCtrl.$setViewValue(transformedInput),modelCtrl.$render()),transformedInput}))}}})),app.directive("numbersOnly",(function(){return{require:"ngModel",link:function(scope,element,attrs,modelCtrl){var regex=/[^0-9]/g;attrs.allowDecimal&&(regex=/[^0-9]+(\.[0-9]{1,2})/g),modelCtrl.$parsers.push((function(inputValue){if(null==inputValue)return"";var res=inputValue.match(regex),transformedInput=inputValue.replace(res,"");return transformedInput!=inputValue&&(modelCtrl.$setViewValue(transformedInput),modelCtrl.$render()),transformedInput}))}}})),app.directive("numberWithDecimals",(function(){return{require:"ngModel",link:function(scope,element,attrs,modelCtrl){var regex=/[^0-9]/g;attrs.allowDecimal&&(regex=/[0-9]+(\.[0-9]{1,2})/g),modelCtrl.$parsers.push((function(inputValue){if(null==inputValue)return"";var res=inputValue.match(regex);if(regex==/[^0-9]/g)var transformedInput=inputValue.replace(res,"");else{var object_size=0;for(key in res)res.hasOwnProperty(key)&&object_size++;if(object_size>0)transformedInput=res[0];else transformedInput=inputValue}return transformedInput!=inputValue&&(modelCtrl.$setViewValue(transformedInput),modelCtrl.$render()),transformedInput}))}}})),app.directive("365Only",(function(){return{require:"ngModel",link:function(scope,element,attrs,modelCtrl){modelCtrl.$parsers.push((function(inputValue){if(null==inputValue)return"";var transformedInput=inputValue.replace(/[^0-9]/g,"")>365?"365":inputValue.replace(/[^0-9]/g,"");return transformedInput!=inputValue&&(modelCtrl.$setViewValue(transformedInput),modelCtrl.$render()),transformedInput}))}}})),app.directive("keyboardPoster",["$parse","$timeout",function($parse,$timeout){return function(scope,elem,attrs){var element=angular.element(elem)[0],currentTimeout=null;element.oninput=function(){var poster=$parse(attrs.postFunction)(scope);currentTimeout&&$timeout.cancel(currentTimeout),currentTimeout=$timeout((function(){poster(angular.element(element).val())}),300)}}}]),app.directive("validateSubmit",["$parse",function($parse){return{restrict:"A",require:"form",link:function(scope,formElement,attributes,formController){var fn=$parse(attributes.rcSubmit);formElement.bind("submit",(function(event){if(!formController.$valid)return!1;scope.$apply((function(){fn(scope,{$event:event})}))}))}}}]),app.directive("accessibleForm",(function(){return{scope:!0,link:function(scope,element,attrs){var form=scope[attrs.name];element.bind("click",(function(event){var field=null;for(field in form)form[field].hasOwnProperty("$pristine")&&form[field].$pristine&&(form[field].$dirty=!0);var invalid_elements=$("form, ng-form").find(".ng-invalid,.has-error");invalid_elements.length>0&&$("html,body").animate({scrollTop:$(invalid_elements[0]).offset().top},500,(function(){invalid_elements[0].focus()}))}))}}})),app.directive("myMaxlength",(function(){return{require:"ngModel",link:function(scope,element,attrs,ngModelCtrl){var maxlength=Number(attrs.myMaxlength);ngModelCtrl.$parsers.push((function(text){if(text.length>maxlength){var transformedInput=text.substring(0,maxlength);return ngModelCtrl.$setViewValue(transformedInput),ngModelCtrl.$render(),transformedInput}return text}))}}})),app.directive("addthisToolbox",["$timeout",function($timeout){return{restrict:"A",transclude:!0,replace:!0,template:"<div ng-transclude></div>",link:function($scope,element,attrs){$timeout((function(){addthis.init(),addthis.toolbox($(element).get(),{},{title:attrs.title})}))}}}]),app.directive("dragDropList",(function(){return function(scope,element,attrs){var toUpdate,startIndex=-1;scope.$watch(attrs.dragDropList,(function(value){toUpdate=value}),!0),$(element[0]).sortable({items:"li",start:function(event,ui){startIndex=$(ui.item).index()},stop:function(event,ui){var newIndex=$(ui.item).index(),toMove=toUpdate[startIndex];toUpdate.splice(startIndex,1),toUpdate.splice(newIndex,0,toMove),scope.$apply(scope.model)},axis:"y"})}})),app.directive("loading",["$http",function($http){return{restrict:"A",link:function(scope,elm,attrs){scope.isLoading=function(){return $http.pendingRequests.length>0},scope.$watch(scope.isLoading,(function(v){v?elm.show():elm.hide()}))}}}]),app.directive("htmlRender",["$compile",function($compile){return{restrict:"EA",scope:{html:"=html"},link:function(scope,element,attrs){scope.$watch("html",(function(value){if(value){value="<div>"+value+"</div>",element.hasClass("reward-desc")&&(value=value.replace(/<\/?iframe[^>]*>/g,""));var markup=$compile(value)(scope);element.empty(),element.append(markup)}}))}}}]),app.directive("webuiPgwslider",["$timeout",function($timeout){return{scope:{options:"=options"},link:function(scope,element,attrs){scope.listPosition;var options={displayList:!1,transitionEffect:"sliding",displayControls:!1,touchControls:!0};if(scope.options&&(options=scope.options),attrs&&attrs.length>0){var lst=$.parseJSON(attrs.webuiPgwslider);$.each(lst,(function(key,value){options[key]=value}))}$timeout((function(){$(".pgwSlider").pgwSlider(options);$(".fr-view:first").height(options.maxHeight)}))}}}]),app.directive("sticky",["$window","$compile","$timeout",function($window,$compile,$timeout){return function(scope,element,attrs){scope.stickyClass;var $elem=element,elem=$elem[0],isSticking=(scope.offSet,!1),elemTop=getElementTop(elem);function getElementTop(elem){var pixels=0;if(elem.offsetParent)do{pixels+=elem.offsetTop,elem=elem.offsetParent}while(elem);return pixels}!function($elem){var clone=$elem.removeAttr("sticky");clone=clone[0],$compile(clone)(scope,(function(cloned,scope){cloned.insertAfter($elem).addClass("cloned").removeClass("stackable").hide()}))}($elem),scope.$watch((function(){return isSticking?elemTop:elemTop=getElementTop(elem)}),(function(newVal,oldVal){newVal!==oldVal&&(elemTop=newVal)})),$(window).scroll((function(){var windowTop=$(window).scrollTop();$elem.is(":visible")&&function(windowTop){elemTop<windowTop&&!isSticking?(isSticking=!0,$elem.attr("id","custom-sticky-top"),$(".cloned").show().css("visibility","hidden")):elemTop>=windowTop&&isSticking&&(isSticking=!1,$elem.removeAttr("id"),$(".cloned").hide())}(windowTop)}))}}]),app.directive("jsColor",["$timeout",function($timeout){return function(scope,element,attrs){$timeout((function(){jscolor.init()}),200)}}]),app.directive("autoLink",["$location",function($location){return{require:"?ngModel",link:function(scope,element,attrs,ngModel){var $elem=element,elem=$elem[0];elem.onblur=function(){var input=$elem.val().trim();if(input){var chek_http=new RegExp("http");if(input.match(chek_http))(function(input){return regex=new RegExp("^https"),!!input.match(regex)})(input)||scope.$apply((function(){var inp=input.substring(7);$elem.val("https://"+inp),ngModel.$setViewValue("https://"+inp)}));else scope.$apply((function(){$elem.val("https://"+input),ngModel.$setViewValue("https://"+input)}))}}}}}]),app.directive("checkLink",["$location",function($location){return{require:"?ngModel",link:function(scope,element,attrs,ngModel){var $elem=element,elem=$elem[0];elem.onblur=function(){var input=$elem.val().trim();input&&(function(input){return regex=new RegExp("^http"),!!input.match(regex)}(input)||scope.$apply((function(){$elem.val("http://"+input),ngModel.$setViewValue("http://"+input)})))}}}}]),app.directive("wpPost",["API_URL","Restangular","$http","$sce","wpService",function(API_URL,Restangular,$http,$sce,wpService){return{restrict:"E",scope:{options:"@"},link:function(scope,element,attrs){scope.list_limit=2,scope.posts=[],wpService.getPosts([],(function(){scope.posts=wpService.posts}),[],2)},templateUrl:"views/templates/partials/wordpress/wp-post-list-footer.e44b9120.html"}}]),app.directive("wpIndividualPost",(function(){return{restrict:"E",scope:{},link:function(scope,element,attrs){},templateUrl:"views/templates/wp-post.e44b9120.html",controller:"WPCtrl"}})),app.directive("wpPostList",["API_URL","Restangular","$http","$sce","wpService","$location","BLOG_SETTINGS","$routeParams",function(API_URL,Restangular,$http,$sce,wpService,$location,BLOG_SETTINGS,$routeParams){return{restrict:"E",scope:{},link:function(scope,element,attrs){var para=$location.search();scope.category_filter=[],scope.tag_filter=[],para.category&&scope.category_filter.push(para.category),para.tag&&scope.tag_filter.push(para.tag),para.s&&(scope.s=para.s),scope.current_page=1,"page"in $location.search()&&(scope.current_page=$location.search().page),scope.list_limit=BLOG_SETTINGS.posts_per_page,wpService.getPosts(scope.category_filter,(function(){scope.posts=wpService.posts,scope.totalPage=wpService.totalPage}),scope.tag_filter,scope.list_limit,scope.current_page,scope.s),wpService.categories&&wpService.categories.length?scope.categories=wpService.categories:wpService.getCategories((function(){scope.categories=wpService.categories}))},templateUrl:"views/templates/partials/wordpress/wp-post-list.e44b9120.html",controller:"wpListCtrl"}}]),app.directive("semanticPagination",(function(){return{restrict:"EA",require:"?ngModel",scope:{pageUpdate:"&updateFunction",totalPages:"="},link:function(scope,element,attrs,ngModel){function render(){scope.currentPage=parseInt(ngModel.$viewValue)||1,scope.pages=function(currentPage){scope.itemsPerPage=5,scope.totalPages<scope.itemsPerPage&&(scope.itemsPerPage=scope.totalPages);var end_num=Number(start_num)+Number(scope.itemsPerPage)-1,pages=[];currentPage>end_num&&(start_num=currentPage-scope.itemsPerPage+1,end_num=currentPage);currentPage<start_num&&(start_num=currentPage,end_num=currentPage+scope.itemsPerPage-1);if(start_num>1){var more=makePage(start_num-1,"...",!1);pages.push(more)}for(var num=start_num;num<=end_num;num++){var page=makePage(num,num,num===currentPage);pages.push(page)}if(end_num<scope.totalPages){more=makePage(end_num+1,"...",!1);pages.push(more)}return pages}(scope.currentPage)}scope.$watch("totalPages",(function(value){value&&render()}));var start_num=1;function makePage(number,text,isActive){return{number:number,text:text,active:isActive}}scope.selectPage=function(page){page<1&&(page=1),page>scope.totalPages&&(page=scope.totalPages),page>=1&&page<=scope.totalPages&&(ngModel.$setViewValue(page),render(),scope.pageUpdate(),attrs.paginationName&&"rewards"==attrs.paginationName?window.scrollTo(0,$(".rewards").offset().top):$("#comment").offset()?window.scrollTo(0,$("#comment").offset().top):$("table").length&&$("table").offset().top&&window.scrollTo(0,$("table").offset().top))}},template:'<div class="ui pagination menu" ng-show="pages.length > 1 && totalPages"><a class="icon item" ng-show="currentPage != 1" ng-click="selectPage(currentPage-1)"><i class="angle left icon"></i></a><a class="item" ng-repeat="page in pages track by $index" ng-class="{active: page.active}" ng-click="selectPage(page.number)">{{page.text}}</a><a class="icon item" ng-click="selectPage(currentPage+1)" ng-show="currentPage < totalPages"><i class="angle right icon"></i></a></div>'}})),app.directive("twitterTimeline",["twitterWidgetService","$sce","$timeout",function(twitterWidgetService,$sce,$timeout){return{restrict:"E",link:function(scope,elm,attr){twitterWidgetService.widget_code.length?(scope.widget=twitterWidgetService.widget_code,scope.widget=$sce.trustAsHtml(scope.widget)):twitterWidgetService.getWidgetCode((function(){scope.widget=twitterWidgetService.widget_code,scope.widget=$sce.trustAsHtml(scope.widget)}))},template:'<div ng-bind-html="widget"></div>'}}]),app.directive("htmlConvertToText",(function(){return{restrict:"A",scope:{html:"=htmlConvertToText",max_char:"=maxChar"},link:function(scope,elm,attr){var html,tmp,sourceStr=scope.html,max_char=scope.max_char;elm.text(function(string,max_char){if(string.length>max_char){var pos=(string=string.substr(0,max_char)).lastIndexOf("\n\n");pos>-1||(pos=string.lastIndexOf("\n"))>-1?string=string.substr(0,pos):string+=" ... View More"}return string}((html=sourceStr,(tmp=document.createElement("div")).innerHTML=html,tmp.textContent||tmp.innerText||""),max_char))}}})),app.directive("onEnter",(function(){return{restrict:"A",link:function(scope,elem,attrs){elem.bind("keydown keypress",(function(event){13===event.which&&(scope.$apply((function(){scope.$eval(attrs.onEnter)})),event.preventDefault())}))}}})),app.directive("imageonload",(function(){return{restrict:"A",link:function(scope,element,attrs){element.bind("load",(function(){$(".ui.loader.download-loader").fadeOut(),$(".ui.progress.upload-bar").fadeOut(),$(".imagePlace .dimmer").dimmer("hide"),$(".uploadImage").fadeOut()}))}}})),app.directive("campaignPlaceHolder",(function(){return{link:function(scope,element,attrs){$(element).next().css({opacity:0,visibility:"hidden",position:"absolute",top:0})}}})),app.directive("semanticUiTabs",(function(){return{link:function(scope,element,attrs){$(element).find(".tabular .item").tab()}}})),app.directive("mediaElement",(function(){return{link:function(scope,element,attrs){$(element).mediaelementplayer({alwaysShowControls:!1})}}})),app.directive("mediaElement",(function(){return{link:function(scope,element,attrs){$(element).mediaelementplayer({alwaysShowControls:!1})}}})),app.directive("youtubeVideo",["$window","$q","$timeout",function($window,$q,$timeout){return{restrict:"AE",link:function(scope,element,attrs){scope.$watch((function(){return element[0].childNodes.length}),(function(newValue,oldValue){var onReady=function(event){};!attrs.mute||"true"!=attrs.mute||(onReady=function(event){event.target.mute()});for(var count=0;count<5;count++)try{setTimeout((function(){new YT.Player(attrs.id,{playerVars:{autoplay:attrs.autoplay&&"true"==attrs.autoplay?1:0,controls:attrs.controls&&"true"==attrs.controls?1:0,modestbranding:attrs.modestBranding&&"true"==attrs.modestBranding?1:0,showinfo:attrs.showinfo&&"true"==attrs.showinfo?1:0,loop:attrs.loop&&"true"==attrs.loop?1:0,iv_load_policy:3,playlist:attrs.videoId},videoId:attrs.videoId,events:{onReady:onReady}})}),300);break}catch(e){if(++count>=5)break}}))}}}]),app.directive("myTarget",(function(){return{restrict:"A",link:function($scope,$element,$attrs){$attrs.myTarget||$element.attr("target","_blank")}}})),app.directive("setVideoThumbHeight",["$timeout",function($timeout){return{restrict:"A",link:function(scope,element,attrs){$timeout((function(){var VidThumbResize=function(){var screenSize=$(window).width(),imgHeight=element.find(".placeholder-img").height();screenSize>0&&$(".video-container").css("height",imgHeight)};VidThumbResize(),$(window).resize((function(){VidThumbResize()}))}))}}}]),app.directive("onScrollBottom",(function(){return{restrict:"A",link:function(scope,element,attrs){element.bind("scroll",(function(){element[0].scrollTop+element[0].offsetHeight>element[0].scrollHeight&&scope.$apply(attrs.onScrollBottom)}))}}})),app.directive("enterKeyPress",(function(){return function(scope,element,attrs){element.bind("keydown keypress",(function(event){if(13===event.which)return scope.$apply((function(){"function"==typeof attrs.enterKeyPress&&scope.$eval(attrs.enterKeyPress)})),event.preventDefault(),!1}))}})),app.directive("inputColor",["$timeout",function($timeout){return{restrict:"A",link:function(scope,element,attribute){scope.$watch((function(){return $(element).val()}),(function(newValue,oldValue){if(newValue!=oldValue&&newValue){$(element).css("background-color","#"+$(element).val());var rgb=(bgColor=$(element).val(),r=bgColor.substr(0,2),g=bgColor.substr(2,2),b=bgColor.substr(4,2),{R:parseInt(r,16),G:parseInt(g,16),B:parseInt(b,16)}),fgColor=255-(.299*rgb.R+.587*rgb.G+.114*rgb.B)<105?"#000":"#FFF";$(element).css("color",fgColor)}var bgColor,r,g,b}))}}}]),app.directive("widgetCodeSelect",["$timeout",function($timeout){return{restrict:"A",link:function(scope,element,attribute){$timeout((function(){function selectEmbedCode(){$("#selectable-code").val($("#embed-code").text()).show(),$("#embed-code").hide(),$("#selectable-code").focus().select()}$("#embed-code br").remove(),selectEmbedCode(),$("#embed-code").click((function(){selectEmbedCode()})),$("#selectable-code").blur((function(){$("#embed-code").val($("#embed-code").text()).show(),$("#selectable-code").hide()}))}))}}}]),app.directive("scrollTo",["ScrollTo",function(ScrollTo){return{restrict:"AC",compile:function(){return function(scope,element,attr){element.bind("click",(function(event){ScrollTo.idOrName(attr.scrollTo,attr.offset)}))}}}}]).service("ScrollTo",["$window","ngScrollToOptions",function($window,ngScrollToOptions){this.idOrName=function(idOrName,offset,focus){var document=$window.document;idOrName||$window.scrollTo(0,0),void 0===focus&&(focus=!0);var el=document.getElementById(idOrName);el||(el=(el=document.getElementsByName(idOrName))&&el.length?el[0]:null),el&&(focus&&el.focus(),ngScrollToOptions.handler(el,offset))}}]).provider("ngScrollToOptions",(function(){this.options={handler:function(el,offset){if(offset){var top=$(el).offset().top-offset;window.scrollTo(0,top)}else el.scrollIntoView()}},this.$get=function(){return this.options},this.extend=function(options){this.options=angular.extend(this.options,options)}})),app.directive("disableLink",(function(){return{restrict:"A",scope:{enabled:"=disableLink"},link:function(scope,elem,attr){elem.click((function(event){scope.enabled&&event.preventDefault()}))}}})),app.directive("dynFbCommentBox",(function(){return{restrict:"A",scope:{},link:function(scope,elem,attrs){attrs.$observe("pageHref",(function(newValue){var href=newValue,numposts=attrs.numposts||5,colorscheme=attrs.colorscheme||"light";elem.html(function(href,numposts,colorscheme){return'<div class="fb-comments" data-href="'+href+'" data-numposts="'+numposts+'" data-colorsheme="'+colorscheme+'"></div>'}(href,numposts,colorscheme)),FB.XFBML.parse(elem[0])}))}}})),app.directive("thrinaciaFileUpload",(function(){return{restrict:"E",scope:{uploadFile:"&",uploadId:"="},template:'<label for="{{uploadId}}_{{index}}" class="ui {{additionalClasses}} labeled icon button {{disabled}}"><i class="upload icon"></i> {{uploadTranslate|translate}}</label><input id="{{uploadId}}_{{index}}" type="file" data-index="{{index}}" onchange="angular.element(this).scope().fileNameChanged()" style="display:none" {{disabled}}/>',link:function(scope,elem,attr){scope.uploadId=attr.uploadId,scope.uploadTranslate=attr.uploadTranslate,scope.index=attr.uploadIndex,1==attr.uploadDisabled?scope.disabled="disabled":scope.disabled="",attr.additionalClasses?scope.additionalClasses=attr.additionalClasses:scope.additionalClasses="",scope.fileNameChanged=function(event){if(scope.index){var file=angular.element("#"+attr.uploadId+"_"+scope.index)[0].files,index=angular.element("#"+attr.uploadId+"_"+scope.index)[0].getAttribute("data-index");scope.uploadFile()(file,index)}else{file=angular.element("#"+attr.uploadId+"_")[0].files;scope.uploadFile()(file)}}}}}));