!function(a){a.fn.pgwSlider=function(n){var g={mainClassName:"pgwSlider",listPosition:"right",selectionMode:"click",transitionEffect:"fading",autoSlide:!0,displayList:!0,displayControls:!1,touchControls:!0,verticalCentering:!1,adaptiveHeight:!1,maxHeight:null,beforeSlide:null,afterSlide:null,adaptiveDuration:200,transitionDuration:500,intervalDuration:3e3};if(0==this.length)return this;if(this.length>1)return this.each((function(){a(this).pgwSlider(n)})),this;var l=this;l.plugin=this,l.data=[],l.config={},l.currentSlide=0,l.slideCount=0,l.resizeEvent=null,l.intervalEvent=null,l.touchFirstPosition=null,l.transitionInProgress=!1,l.window=a(window);var f=function(o,p){return l.config.maxHeight&&(l.plugin.width()>480&&o>l.config.maxHeight?o=l.config.maxHeight:l.plugin.width()<=480&&o+l.plugin.find(".ps-list").height()>l.config.maxHeight&&(o=l.config.maxHeight-l.plugin.find(".ps-list").height())),clearTimeout(l.resizeEvent),l.resizeEvent=setTimeout((function(){var q=(o-6*(l.slideCount-1))/l.slideCount,r=100/l.slideCount;l.plugin.find(".ps-list > li").css({width:r+"%"}),void 0!==p&&p&&null==l.config.maxHeight&&"function"==typeof l.plugin.find(".ps-current").animate?l.plugin.find(".ps-current").animate({height:o},l.config.adaptiveDuration,(function(){l.plugin.find(".ps-list > li").animate({height:q},l.config.adaptiveDuration)})):(l.plugin.find(".ps-current").css("height",o),l.plugin.find(".ps-list > li").css("height",q)),l.config.verticalCentering&&(l.plugin.find(".ps-list > li").each((function(){if(q>50&&a(this).find("img").height()>q){var s=Math.round((a(this).find("img").height()-q)/2);a(this).find("img").css("margin-top",-s)}else if(a(this).find("img").height()<q){s=Math.round((q-a(this).find("img").height())/2);a(this).find("img").css("margin-top",s)}else a(this).find("img").css("margin-top","")})),l.plugin.find(".ps-current > ul > li").each((function(){var s="none"!=a(this).css("display");if(s||a(this).show(),a(this).show().find("img").height()>o){var t=Math.round((a(this).find("img").height()-o)/2);a(this).find("img").css("margin-top",-t)}else if(a(this).show().find("img").height()<o){t=Math.round((o-a(this).find("img").height())/2);a(this).find("img").css("margin-top",t)}else a(this).find("img").css("margin-top","");s||a(this).hide()})))}),100),!0},c=function(){return l.plugin.width()<=480?l.plugin.addClass("narrow").removeClass("wide"):l.plugin.addClass("wide").removeClass("narrow"),!0},e=function(){if(l.plugin.removeClass(l.config.mainClassName).addClass("ps-list"),l.plugin.wrap('<div class="'+l.config.mainClassName+'"></div>'),l.plugin=l.plugin.parent(),l.plugin.prepend('<div class="ps-current"><ul></ul><span class="ps-caption"></span></div>'),l.slideCount=l.plugin.find(".ps-list > li").length,0==l.slideCount)throw new Error("PgwSlider - No slider item has been found");l.config.displayControls&&l.slideCount>1&&(l.plugin.find(".ps-current").prepend('<span class="ps-prev"><span class="ps-prevIcon"></span></span>'),l.plugin.find(".ps-current").append('<span class="ps-next"><span class="ps-nextIcon"></span></span>'),l.plugin.find(".ps-current .ps-prev").click((function(){l.previousSlide()})),l.plugin.find(".ps-current .ps-next").click((function(){l.nextSlide()}))),l.config.displayList||(l.plugin.find(".ps-current").css("width","100%"),l.plugin.find(".ps-list").hide());var o=1;return l.plugin.find(".ps-list > li").each((function(){var q=function(p){var q={},s=p.find("a").attr("href");if(void 0!==s&&""!=s){q.link=s;var v=p.find("a").attr("target");void 0!==v&&""!=v&&(q.linkTarget=v)}var o=p.find("img").attr("src");void 0!==o&&""!=o&&(q.thumbnail=o);var w=p.find("img").attr("data-large-src");void 0!==w&&""!=w&&(q.image=w);var t=p.find("span").text();if(void 0!==t&&""!=t&&null!=t)q.title=t;else{var r=p.find("img").attr("alt");void 0!==r&&""!=r&&(q.title=r)}var u=p.find("img").attr("data-description");return void 0!==u&&""!=u&&(q.description=u),q}(a(this));q.id=o,l.data.push(q),a(this).addClass("elt_"+q.id),q.title&&(1==a(this).find("span").length?""==a(this).find("span").text()&&a(this).find("span").text(q.title):a(this).find("img").after("<span>"+q.title+"</span>"));var p=a('<li class="elt_'+o+'"></li>');q.image?p.html('<img src="'+q.image+'" alt="'+(q.title?q.title:"")+'">'):q.thumbnail&&p.html('<img src="'+q.thumbnail+'" alt="'+(q.title?q.title:"")+'">'),q.link&&p.html('<a href="'+q.link+'"'+(q.linkTarget?' target="'+q.linkTarget+'"':"")+">"+p.html()+"</a>"),l.plugin.find(".ps-current > ul").append(p),"mouseOver"==l.config.selectionMode&&"fading"==l.config.transitionEffect?(a(this).css("cursor","default").click((function(r){r.preventDefault()})).bind("mouseenter",(function(r){i(q.id)})),a(this).find("a").css("cursor","default")):a(this).css("cursor","pointer").click((function(r){r.preventDefault(),i(q.id)})),o++})),"left"==l.config.listPosition&&l.plugin.addClass("listOnTheLeft"),l.config.autoSlide&&l.plugin.on("mouseenter",(function(){clearInterval(l.intervalEvent),l.intervalEvent=null})).on("mouseleave",(function(){h()})),i(1),l.plugin.find(".ps-current > ul > li.elt_1 img").on("load",(function(){c();var p=l.plugin.find(".ps-current > ul > li.elt_1 img").height();f(p),l.window.resize((function(){c();var q=l.plugin.find(".ps-current > ul > li.elt_"+l.currentSlide+" img").height();f(q,l.config.adaptiveHeight)}))})),l.config.touchControls&&l.slideCount>1&&(l.plugin.find(".ps-current").on("touchstart",(function(p){try{p.originalEvent.touches[0].clientX&&null==l.touchFirstPosition&&(l.touchFirstPosition=p.originalEvent.touches[0].clientX)}catch(p){l.touchFirstPosition=null}})),l.plugin.find(".ps-current").on("touchmove",(function(p){try{p.originalEvent.touches[0].clientX&&null!=l.touchFirstPosition&&(p.originalEvent.touches[0].clientX>l.touchFirstPosition+50?(l.touchFirstPosition=null,l.previousSlide()):p.originalEvent.touches[0].clientX<l.touchFirstPosition-50&&(l.touchFirstPosition=null,l.nextSlide()))}catch(p){l.touchFirstPosition=null}})),l.plugin.find(".ps-current").on("touchend",(function(p){l.touchFirstPosition=null}))),!0},j=function(o){var q="";if(o.title&&(q+="<b>"+o.title+"</b>"),o.description&&(""!=q&&(q+="<br>"),q+=o.description),""!=q&&(o.link&&(q='<a href="'+o.link+'"'+(o.linkTarget?' target="'+o.linkTarget+'"':"")+">"+q+"</a>"),"function"==typeof l.plugin.find(".ps-caption").fadeIn?(l.plugin.find(".ps-caption").html(q),l.plugin.find(".ps-caption").fadeIn(l.config.transitionDuration/2)):(l.plugin.find(".ps-caption").html(q),l.plugin.find(".ps-caption").show())),l.config.displayControls&&("function"==typeof l.plugin.find(".ps-current > .ps-prev").fadeIn?l.plugin.find(".ps-current > .ps-prev, .ps-current > .ps-next").fadeIn(l.config.transitionDuration/2):l.plugin.find(".ps-current > .ps-prev, .ps-current > .ps-next").show()),"function"==typeof l.config.afterSlide&&l.config.afterSlide(o.id),l.config.adaptiveHeight){var p=l.plugin.find(".ps-current .elt_"+o.id+" img").height();f(p,!0)}return!0},i=function(o,q,r){if(o==l.currentSlide)return!1;var p=l.data[o-1];if(void 0===p)throw new Error("PgwSlider - The element "+o+" is undefined");return void 0===r&&(r="left"),"function"==typeof l.config.beforeSlide&&l.config.beforeSlide(o),"function"==typeof l.plugin.find(".ps-caption").fadeOut?l.plugin.find(".ps-caption, .ps-prev, .ps-next").fadeOut(l.config.transitionDuration/2):l.plugin.find(".ps-caption, .ps-prev, .ps-next").hide(),"sliding"==l.config.transitionEffect?function(s,v){var r=l.plugin.find(".ps-current > ul");if(void 0===v&&(v="left"),0==l.currentSlide)r.find(".elt_1").css({position:"",left:"",opacity:1,"z-index":2}).show(),l.plugin.find(".ps-list > li.elt_1").css("opacity","1"),j(s);else{if(l.transitionInProgress)return!1;l.transitionInProgress=!0;var u=r.width();if("left"==v)var o=-u,t=u;else o=u,t=-u;var p=r.find(".elt_"+l.currentSlide);"function"!=typeof p.animate&&(p.animate=function(w,x,y){p.css(w),y&&y()}),p.css("position","absolute").animate({left:o},l.config.transitionDuration,(function(){p.css("position","").css("z-index",1).css("left","").css("opacity",0).hide()}));var q=r.find(".elt_"+s.id);"function"!=typeof q.animate&&(q.animate=function(w,x,y){q.css(w),y&&y()}),q.css("position","absolute").css("left",t).css("opacity",1).show().animate({left:0},l.config.transitionDuration,(function(){q.css("position","").css("left","").css("z-index",2).show(),l.transitionInProgress=!1,l.plugin.find(".ps-list > li").css("opacity","0.6"),l.plugin.find(".ps-list > li.elt_"+s.id).css("opacity","1"),j(s)}))}l.currentSlide=s.id}(p,r):function(r){var q=l.plugin.find(".ps-current > ul");if(l.plugin.find(".ps-list > li").css("opacity","0.6"),l.plugin.find(".ps-list > li.elt_"+r.id).css("opacity","1"),q.find("li").not(".elt_"+l.currentSlide).not(".elt_"+r.id).each((function(){"function"==typeof a(this).stop&&a(this).stop(),a(this).css("position","").css("z-index",1).hide()})),l.currentSlide>0){var o=q.find(".elt_"+l.currentSlide);"function"!=typeof o.animate&&(o.animate=function(s,t,u){o.css(s),u&&u()}),"function"==typeof o.stop&&o.stop(),o.css("position","absolute").animate({opacity:0},l.config.transitionDuration,(function(){o.css("position","").css("z-index",1).hide()}))}l.currentSlide=r.id;var p=q.find(".elt_"+r.id);"function"!=typeof p.animate&&(p.animate=function(s,t,u){p.css(s),u&&u()}),"function"==typeof p.stop&&p.stop(),p.css("position","absolute").show().animate({opacity:1},l.config.transitionDuration,(function(){p.css("position","").css("z-index",2).show(),j(r)}))}(p),void 0!==q&&l.config.autoSlide&&h(),!0},h=function(){return clearInterval(l.intervalEvent),l.slideCount>1&&l.config.autoSlide&&(l.intervalEvent=setInterval((function(){if(l.currentSlide+1<=l.slideCount)var o=l.currentSlide+1;else o=1;i(o)}),l.config.intervalDuration)),!0};return l.startSlide=function(){return l.config.autoSlide=!0,h(),!0},l.stopSlide=function(){return l.config.autoSlide=!1,clearInterval(l.intervalEvent),!0},l.getCurrentSlide=function(){return l.currentSlide},l.getSlideCount=function(){return l.slideCount},l.displaySlide=function(o){return i(o,!0),!0},l.nextSlide=function(){if(l.currentSlide+1<=l.slideCount)var o=l.currentSlide+1;else o=1;return i(o,!0,"left"),!0},l.previousSlide=function(){if(l.currentSlide-1>=1)var o=l.currentSlide-1;else o=l.slideCount;return i(o,!0,"right"),!0},l.destroy=function(o){return clearInterval(l.intervalEvent),void 0!==o?(l.plugin.find(".ps-list > li").each((function(){a(this).attr("style",null).removeClass().css("cursor","").unbind("click").unbind("mouseenter"),a(this).find("a").css("cursor",""),a(this).find("img").attr("style",null)})),l.plugin.find(".ps-list").addClass(l.config.mainClassName).removeClass("ps-list"),l.plugin.find(".ps-current").unwrap().remove(),l.hide()):l.parent().remove(),l.plugin=null,l.data=[],l.config={},l.currentSlide=0,l.slideCount=0,l.resizeEvent=null,l.intervalEvent=null,l.touchFirstPosition=null,l.transitionInProgress=!1,l.window=null,!0},l.reload=function(o){return l.destroy(!0),(l=this).plugin=this,l.window=a(window),l.plugin.show(),l.config=a.extend({},g,o),e(),l.config.autoSlide&&h(),!0},l.config=a.extend({},g,n),e(),l.config.autoSlide&&h(),this}}(window.Zepto||window.jQuery);