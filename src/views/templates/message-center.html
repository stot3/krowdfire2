<div class="ui basic top-header segment" ng-cloak>
	<h2 class="ui header" translate> message_center_main_heading </h2>
</div>
<div class="mainbody-wrap">
	<div class="background-wrap" id="msg-center">
		<div class="ui page grid">
			<div class="ui column">

				<div ng-include src="'views/templates/partials/response-message.html'"></div>

				<div id="message-tabs">
					<div class="msgs-menu menu-tabs ui secondary menu">

						<div class="menu " ng-controller="ContactMessageCtrl">
							<div ng-include src="'views/templates/partials/contact-message-modal.html'"></div>
							<a href="" class="item" ng-if="public_setting.site_person_public_view">
								<div class="menu-item-wrap" ng-click="showContactModal()">
									<i class="large write icon"></i>
									<span translate>  message_center_compose</span>
								</div>
							</a>
							<a href="" class="item active" data-tab="inbox" ng-click="messageDetail(inbox[0], 0, 'inbox')">
								<div class="menu-item-wrap">
									<i class="large inbox icon"></i>
									<span translate>  message_center_inbox</span>
									<div class="floating green ui label">{{inbox.length}}</div>
								</div>
							</a>
							<a href="" class="item" data-tab="sent" ng-click="messageDetail(sent[0], 0, 'sent')">
								<div class="menu-item-wrap">
									<i class="large send icon"></i>
									<span translate>message_center_sent</span>
									<div class="floating green ui label">{{sent.length}}</div>
								</div>
							</a>
						</div>
					</div>

					<div class="msg-tab ui tab segment active" data-tab="inbox">
						<div class="ui stackable grid" ng-class="{'two column' : hasMessage, 'one column' : !hasMessage}">
							<div class="msg-header">
								<h2 class="msg-header-title ui header" translate> message_center_inbox </h2>
							</div>
							<div class="sixteen wide column center aligned" ng-if="!hasMessage">
								<div class="ui warning  message" translate>
									message_center_inbox_empty
								</div>
							</div>
							<div class="left-col six wide column" ng-if="hasMessage && inbox.length > 0">
								<div class="msgs-sum ui fluid vertical menu">
									<a class="item" ng-class="{'active': $index == inboxSelected}" ng-repeat="message in inbox | orderBy:'-created'" ng-click="messageDetail(message, $index, 'inbox')">
										<div class="content">
											<h3 class="user-name ui header">{{message.person_first_name_sender}} {{message.person_last_name_sender}}</h3>
											<div class="date">{{message.created | formatDate:"MMMM DD YYYY"}}</div>
											<div class="msg-summary">{{message.subject}}</div>
										</div>
									</a>
								</div>
							</div>
							<div class="right-col ten wide column" ng-if="hasMessage && inbox.length > 0">
								<div class="full-msg">
									<div>
										<div class="full-msg-row1 ui two column grid">
											<div class="subject-col thirteen wide column">
												<h2 class="ui header">{{message.subject}}</h2>
											</div>
											<div class="action-col three wide column right aligned">
												<a href="" class="action-link text-link" ng-if="message.message_type == 'Message To'" ng-click="openModalById('reply-message');replyPrefill()"
													title="Reply To Sender">
													<i class="large reply icon"></i>
												</a>
												<a href="" class="action-link text-link" ng-click="openModalById('delete-message');" title="Delete Message">
													<i class="trash large icon"></i>
												</a>
											</div>
										</div>

										<div class="full-msg-row2 ui two column grid">
											<div class="user-col thirteen wide column">
												<img src="https://placehold.it/150x150" alt="" class="user-img ui circular image" ng-if="!files.length">
												<img ng-src="{{server +'/image/campaign_profile/' + imageurl}}" alt="" class="user-img ui circular image" ng-if="files.length">
												<div class="user-name">
													<span ng-if="message.message_type == 'Message To'">  {{'message_center_from' | translate}} {{message.person_first_name_sender}} {{message.person_last_name_sender}}</span>
													<span ng-if="message.message_type == 'Message From'"> {{'message_center_to' | translate}} {{message.person_first_name_receiver}} {{message.person_last_name_receiver}}</span>
													<span> {{'message_center_to_me' | translate}}</span>
												</div>

											</div>
											<div class="date-col three wide column right aligned">
												<div class="date">{{message.created | formatDate:"MMMM DD YYYY"}}</div>
											</div>
										</div>

										<div class="msg-body-wrap ui basic segment">
											<pre class="msg-body">{{message.body}}</pre>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>

					<div class="msg-tab ui tab segment" data-tab="sent">
						<div class="ui stackable grid" ng-class="{'two column' : hasMessage, 'one column' : !hasMessage}">
							<div class="msg-header">
								<h2 class="msg-header-title ui header" translate>message_center_sent </h2>
							</div>
							<div class="sixteen wide column center aligned" ng-if="!hasMessage">
								<div class="ui warning message" translate>
									message_center_no_sent_message
								</div>
							</div>
							<div class="left-col six wide column" ng-if="hasMessage">
								<div class="msgs-sum ui fluid vertical menu">
									<a class="item" ng-class="{'active': $index == sentSelected}" ng-repeat="message in sent | orderBy:'-created'" ng-click="messageDetail(message, $index, 'sent')">
										<div class="content">
											<h3 class="user-name ui header">{{message.person_first_name_receiver}} {{message.person_last_name_receiver}} </h3>
											<div class="date">{{message.created | formatDate:"MMMM DD YYYY"}}</div>
											<div class="msg-summary">{{message.subject}}</div>
										</div>
									</a>
								</div>
							</div>
							<div class="right-col ten wide column" ng-if="hasMessage">
								<div class="full-msg">
									<div class="full-msg-row1 ui two column grid">
										<div class="subject-col thirteen wide column">
											<h2 class="ui header">{{message.subject}}</h2>
										</div>
										<div class="action-col three wide column right aligned">
											<a href="" class="action-link text-link" ng-click="openModalById('delete-message');" title="Delete Message">
												<i class="trash large icon"></i>
											</a>
										</div>
									</div>

									<div class="full-msg-row2 ui two column grid">
										<div class="user-col thirteen wide column">
											<img src="https://placehold.it/150x150" alt="" class="user-img ui circular image" ng-if="!files.length">
											<img ng-src="{{server +'/image/campaign_profile/' + imageurl}}" alt="" class="user-img ui circular image" ng-if="files.length">
											<div class="user-name">
												<span ng-if="message.message_type == 'Message To'">	{{'message_center_to' | translate}} {{message.person_first_name_sender}} {{message.person_last_name_sender}}</span>
												<span ng-if="message.message_type == 'Message From'">	{{'message_center_to' | translate}} {{message.person_first_name_receiver}} {{message.person_last_name_receiver}}</span>
												<span>	{{'message_center_from_me' | translate}}</span>
											</div>

										</div>
										<div class="date-col three wide column right aligned">
											<div class="date">{{message.created | formatDate:"MMMM DD YYYY"}}</div>
										</div>
									</div>

									<div class="msg-body-wrap ui basic segment">
										<pre class="msg-body">{{message.body}}</pre>
									</div>
								</div>


							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>

<div class="ui modal" id="reply-message">
	<i class="close icon"></i>
	<div class="header">
		<h3 class="ui header"> {{'message_center_reply_message' | translate}} {{message.person_first_name_sender}} {{message.person_last_name_sender}}</h3>
	</div>
	<div class="content">
		<div class="fluid ui form">
			<label>
				<span class="ui header">To:</span> {{message.person_first_name_sender}} {{message.person_last_name_sender}}
			</label>
			<div class="field">
				<input type="text" ng-model="sendMessage.subject" placeholder="Subject" required>
			</div>
			<div class="field">
				<textarea placeholder="Message Content" ng-model="sendMessage.body" required></textarea>
			</div>
		</div>
	</div>
	<div class="actions">
		<div class="ui green button" ng-click="send()" translate> message_center_send_message </div>
	</div>
</div>

<div class="ui small modal" id="delete-message">
	<i class="close icon"></i>
	<div class="header">
		<h3 class="ui header" translate>message_center_delete_message</h3>
	</div>
	<div class="content" translate>
		message_center_are_you_sure
	</div>
	<div class="actions">
		<div class="ui green button" ng-click="messageDelete()" translate> message_center_are_you_sure_yes </div>
		<div class="ui red button" translate> message_center_are_you_sure_no </div>
	</div>
</div>