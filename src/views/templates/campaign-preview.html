<div class="mainbody-wrap" autoscroll="true" ng-cloak>
  <div class="background-wrap" id="campaign-details">
    <div class="ui page grid">
      <div class="column">
        <div class="campaign-creation-header">
          <div class="campaignsteps" ng-include src="'views/templates/partials/campaign/create/campaign-steps.html'"></div>
          <div class="ui center aligned basic segment">
            <h1 class="ui header" translate>campaign_preview_main_message </h1>
            <p translate> campaign_preview_main_text1 </p>
            <p translate> campaign_preview_main_text2 </p>
            <p>
              <span translate="campaign_preview_direct_url"></span>
              <a ng-href="{{fullUriPath}}" ng-bind="fullUriPath" target="_blank"></a>
            </p>
            <div class="header-footer">
              <div class="header-prev-action" ng-if="displayPrevButtonHeader" ng-include src="'views/templates/partials/campaign/create/campaign-previous.html'"></div>
            </div>
          </div>
        </div>
        <div class="ui top attached tabular menu" ng-show="public_settings.site_enable_advanced_widget">
          <div class="item active preview-tab-button" data-tab="default-preview" translate>campaign_preview_widget_tab_default</div>
          <div class="item preview-tab-button" data-tab="widget-preview" ng-click='setIframeWidgetHeight()' translate>campaign_preview_widget_tab_widget</div>
        </div>
      </div>
    </div>
    <!-- campaign-creation-header end -->
    <div class="ui tab active" data-tab="default-preview">
      <div id="user-view" ng-class="{'hide-border-top':public_settings.site_enable_advanced_widget}">
        <div class="campaign-top-section">
          <div class="ui page grid">
            <div class="column">
              <div class="campaign-top-header ui two column stackable grid">
                <div class="creator-info-top-left three wide column" ng-if="public_settings.site_campaign_creator_info_display_left_header">
                  <div ng-repeat="manager in campaign.managers">
                    <a ng-if="!site_campaign_hide_creator_info && !isCreatorNameOnly" class="user-img-wrap" href=""
                      ng-click="showManager()">
                      <img width="200" height="200" class="ui circular image pp_placeholder" ng-hide="manager.person_files[0]"
                        src="images/placeholder-images/placeholder_profile_photo.png">
                      <img width="200" height="200" ng-if="manager.person_files[0]" ng-src="{{server + '/image/campaign_profile/' + manager.person_files[0].path_external}}"
                        class="ui circular image" id="campaign-user-pic">
                    </a>
                    <p class="name top">By {{manager.first_name}}</p>
                    <p class="name">{{manager.last_name}}</p>
                    <p ng-if="managerInfo.addresses.length>0" class="location">{{managerInfo.addresses[0].city}}</p>
                  </div>
                </div>
                <div class="campaign-description nine wide column">
                  <div class="mobile-only img-wrap campaign-image">
                    <embed-video ng-if="campaign.video && campaign.video_type != 'custom'" class="campaign-video"
                      ng-href="{{campaign.video}}"></embed-video>
                    <video ng-if="campaign.video && campaign.video_type == 'custom'" style="width:100%;height:100%;background:#000000;"
                      id="custom-video-player" controls>
                      <source ng-src="{{campaign.video}}">
                      </source>
                    </video>
                    <img ng-hide="campaign.video" ng-if="campaign.files.length" ng-repeat="file in campaign.files | filter:{region_id: RESOURCE_REGIONS.campaign.thumbnail} | orderBy:'-file_id' | limitTo: 1"
                      ng-src="{{server + '/image/campaign_detail_large/' + file.path_external}}" class="ui image" />
                    <img ng-hide="campaign.video" ng-if="noMainImage" src="images/placeholder-images/placeholder_campaign.png"
                      class="ui image" />
                  </div>
                  <h2 class="campaign-user-business" ng-if="!site_campaign_hide_creator_info && isCreatorNameOnly">
                    <span>{{campaign.managers[0].first_name}} {{campaign.managers[0].last_name}}</span>
                  </h2>
                  <h1 class="campaign-name ui header" ng-show="!in_revision">{{campaign.name}}</h1>
                  <h1 class="campaign-name ui header" ng-show="in_revision">{{revision.name}}</h1>
                  <p class="campaign-blurb" ng-if="!isBlurbInSidebar && !in_revision" html-render html=campaign.blurb></p>
                  <p class="campaign-blurb" ng-if="!isBlurbInSidebar && in_revision" html-render html=revision.blurb></p>
                  <div class="ui campaign-link list" ng-show="campaign.cities">
                    <div class="item-wrap">
                      <i class="map marker icon"></i>
                      <a ng-repeat="city in campaign.cities" ng-href="explore?location={{city.id}}" class="city-link text-link">{{city.city_full}}{{$last
                        ? '' : ', '}}</a>
                    </div>
                  </div>
                  <div class="ui campaign-link list" ng-show="campaign.categories">
                    <div class="item-wrap">
                      <i class="tags icon"></i>
                      <a ng-repeat="category in campaign.categories" ng-href="explore?category={{category.id}}" class="category-link text-link">{{category.name}}{{$last
                        ? '' : ', '}} </a>
                    </div>
                  </div>

                  <div class="mobile-only">
                    <div class="funding-wrap">

                      <div class="desktop-only ui funding-info list verbal-info" ng-if="public_settings.site_campaign_page_verbose_campaign_info">
                        <p>
                          <span class="amountpledged">{{campaign.funded_amount | formatCurrency:campaign.currencies[0].code_iso4217_alpha:public_setting.site_campaign_decimal_option}}
                            {{'campaign_pledge_verbal_pledged' | translate}}</span>
                          <span>{{'campaign_pledge_verbal_of' | translate}} {{campaign.funding_goal | formatCurrency:campaign.currencies[0].code_iso4217_alpha:public_setting.site_campaign_decimal_option}}
                            {{'campaign_pledge_verbal_goal' | translate}}</span>
                        </p>

                        <p>
                          <span>{{'campaign_pledge_verbal_from' | translate}} {{backer_length}}
                            {{'campaign_pledge_verbal_supporters_with'
                            | translate}}</span>
                        </p>
                        <p>
                          <span>{{days_rem}} {{'campaign_pledge_verbal_days_to_go' | translate}}</span>
                        </p>


                      </div>

                      <div class="ui funding-info list" ng-if="!public_settings.site_campaign_page_verbose_campaign_info">
                        <div class="item r-mode" ng-if="!hideRaiseMode">
                          <strong class="c-raise-mode">
                            <div class="ui label black" translate>campaign_pledge_raise_mode</div>
                            <span ng-if="campaign.raise_mode_id == 1" translate>campaign_pledge_all_nothing </span>
                            <span ng-if="campaign.raise_mode_id == 2" translate>campaign_pledge_keep_all </span>
                          </strong>
                        </div>

                        <div class="item item-backer">
                          <div class="item item-value">
                            <span class="c-value">{{backer_length}}</span>
                          </div>

                          <div class="item item-label">
                            <em class="c-meta" ng-show="backer_length != 1">{{'campaign_pledge_campaign_backer' | translate}}</em>
                            <em class="c-meta" ng-show="backer_length == 1">{{'campaign_pledge_campaign_backer_singular'
                              | translate}}</em>
                          </div>
                        </div>

                        <div class="item item-funded">
                          <div class="item item-value" ng-if="campaign.funded_amount != null">
                            <span class="c-value" ng-bind-html="campaign.funded_amount | formatCurrency:campaign.currencies[0].code_iso4217_alpha:public_setting.site_campaign_decimal_option"></span>
                          </div>

                          <div class="item item-label">
                            <em> {{'campaign_pledge_campaign_raisedof' | translate}}
                              <span ng-hide="dateInPast(campaign.ends,campaign.seconds_remaining)">
                                {{duration}} {{dtype | translate}}</span>
                              <span ng-hide="!dateInPast(campaign.ends,campaign.seconds_remaining)">
                                {{duration}} {{dtype | translate}}</span>
                            </em>
                          </div>
                        </div>
                        <div class="item item-progress" ng-if="!progressHide">
                          <div class="bar-progress ui indicating progress" data-percent="{{temp = campaign.funded_amount / (campaign.funding_goal || 1) * 100; temp >= 100 ? 100 : temp < 1 ? 0 : temp}}">
                            <div class="bar"></div>
                          </div>

                          <div class="item">
                            <span class="c-value" ng-show="(campaign.funded_amount / (campaign.funding_goal || 1) * 100) < 99 || (campaign.funded_amount / (campaign.funding_goal || 1) * 100) > 100"
                              ng-bind="(campaign.funded_amount / (campaign.funding_goal || 1) * 100 | number:0) + '%'"></span>
                            <span class="c-value" ng-show="(campaign.funded_amount / (campaign.funding_goal || 1) * 100) > 99 && (campaign.funded_amount / (campaign.funding_goal || 1) * 100) < 100">
                              99% </span>
                            <span class="c-value" ng-show="(campaign.funded_amount / (campaign.funding_goal || 1) * 100) == 100">
                              100%
                            </span>
                          </div>

                          <div class="item item-label">
                            <em> {{'campaign_pledge_campaign_funded'|translate}}
                              <span ng-bind-html="campaign.funding_goal | formatCurrency:campaign.currencies[0].code_iso4217_alpha:public_setting.site_campaign_decimal_option"></span>
                              {{'campaign_pledge_campaign_raisedof_goal'| translate}}
                            </em>
                          </div>
                        </div>

                        <div class="ui positive message charity-amount" ng-if="public_settings.site_campaign_charity_helper_enable && campaign.charity_id">
                          {{'campaign_pledge_gift_aid_collected'|translate}}
                          <span ng-bind-html="campaign.charity_helper_amount_total | formatCurrency:campaign.currencies[0].code_iso4217_alpha:public_setting.site_campaign_decimal_option"></span>
                        </div>
                        <div ng-show="campaign.runtime_days" class="f-runtime">
                          <div class="item" ng-show="campaign.campaign_started=='t' && campaign.ever_published">
                            <span class="c-value" ng-if="dateInPast(campaign.ends,campaign.seconds_remaining)"
                              translate="campaign_pledge_closed"></span>
                            <span ng-show="campaign.ends!=null" ng-if="!campaign.settings.days_to_go_hide" class="c-value"
                              ng-class="{'time-closed' : dateInPast(campaign.ends,campaign.seconds_remaining)}">{{days_rem }}
                              {{day_text | translate}}</span>
                          </div>
                          <div class="item f-duration ui large label" ng-if="daysEndDateInPast(campaign.settings.days_to_go_hide, campaign.ends, campaign.seconds_remaining)">
                            <div ng-show="public_settings.site_theme_campaign_show_start_date">
                              <div class="campaign-start-date">
                                <span ng-show="campaign.campaign_started=='t'">{{'campaign_pledge_campaign_start_date' |
                                  translate}}
                                </span>
                                <span ng-show="campaign.campaign_started=='f'">{{'campaign_pledge_campaign_start_date1' |
                                  translate}}
                                </span>
                                <span ng-hide="public_settings.site_theme_campaign_display_iso_date">{{campaign.starts_date_time
                                  | formatDate:"MMM DD YYYY"}} {{campaign.starts_date_time | formatDate:"h:mm A"}}
                                  {{campaign.timezoneText}}
                                </span>
                                <span ng-show="public_settings.site_theme_campaign_display_iso_date" class="alt-data-layout">{{campaign.starts_date_time
                                  | formatDate:"YYYY/MM/DD"}} {{campaign.starts_date_time | formatDate:"H:mm"}}
                                  {{campaign.timezoneText}}
                                </span>
                              </div>
                              <div class="campaign-end-date">
                                <div ng-hide="public_settings.site_theme_campaign_display_iso_date">
                                  <span ng-hide="campaign.ends==null">{{'campaign_pledge_campaign_end_date' | translate}}
                                    {{campaign.ends | formatDate:"MMM DD YYYY"}} {{campaign.ends | formatDate:"h:mm A"}}
                                    {{campaign.timezoneText}}
                                  </span>
                                </div>
                                <div ng-show="public_settings.site_theme_campaign_display_iso_date">
                                  <span class="alt-data-layout" ng-hide="campaign.ends==null">{{'campaign_pledge_campaign_end_date'
                                    | translate}} {{campaign.ends | formatDate:"YYYY/MM/DD"}} {{campaign.ends | formatDate:"H:mm"}}
                                    {{campaign.timezoneText}}
                                  </span>
                                </div>
                              </div>
                            </div>
                            <div class="campaign-start-date" ng-show="!public_settings.site_theme_campaign_display_iso_date && campaign.ends">
                              <span ng-show="!public_settings.site_theme_campaign_show_start_date">{{'campaign_pledge_campaign_end_date_show'
                                | translate}} {{campaign.ends | formatDate:"MMM DD YYYY"}} {{campaign.timezoneText}}.
                              </span>
                            </div>
                            <div class="campaign-end-date" ng-show="public_settings.site_theme_campaign_display_iso_date && campaign.ends">
                              <span ng-show="!public_settings.site_theme_campaign_show_start_date">{{'campaign_pledge_campaign_end_date_show'
                                | translate}} {{campaign.ends | formatDate:"YYYY/MM/DD"}} {{campaign.timezoneText}}.
                              </span>
                            </div>
                          </div>
                          <div class="item f-duration ui large red label" ng-if="dateInPast(campaign.ends,campaign.seconds_remaining)">
                            {{'campaign_pledge_campaign_end_message'
                            | translate}}</div>
                        </div>
                        <span ng-show="campaign.ends == null" ng-if="!public_settings.site_campaign_end_hide" class="item f-duration no-end-date-text"
                          style="font-weight: 600;font-size: larger" translate="campaign_pledge_campaign_Continuous_Campaign"></span>
                      </div>

                      <a class="fluid ui massive button contribute-button" ng-if="!(dateInPast(campaign.ends,campaign.seconds_remaining) || campaign.entry_status_id != 2 || thresholdallowedbtn || campaign.campaign_started=='f') || !hideThisContribButton"
                        ng-click="dateInPast(campaign.ends,campaign.seconds_remaining) || campaign.entry_status_id != 2 || thresholdallowedbtn|| miniContributeReward()"
                        id="pledgelink" ng-show=" !campaign.pledges || public_settings.site_theme_campaign_min_button_show ||campaign.entry_status_id == 10 || campaign.entry_status_id == 1">{{'campaign_pledge_campaign_contribute'|
                        translate}}
                        <div class="ui label" style="background: none;" ng-show="!public_settings.site_theme_campaign_hide_min_contribute_message">{{'campaign_pledge_campaign_contribute_minimum'|
                          translate}}
                          <span ng-bind-html=" minamount| formatCurrency:campaign.currencies[0].code_iso4217_alpha:public_setting.site_campaign_decimal_option"></span>
                        </div>
                      </a>
                    </div>

                    <div id="scroll-to-rewards" ng-if="campaign.pledges && !displayRewardsMobileTab" ng-click="scrollToRewards()"
                      class="ui huge fluid green button">{{'scroll_to_rewards_label'
                      | translate}}</div>
                    <div id="scroll-to-rewards" ng-if="campaign.pledges && displayRewardsMobileTab" ng-click="scrollToMobileRewardsTab()"
                      class="ui huge fluid green button">{{'scroll_to_rewards_label'
                      | translate}}</div>

                    <div class="admin-explainer-text ui accordion" ng-Accord ng-if="campaign.settings.explainer_text.message && campaign.settings.explainer_text.title && isExplainerTextEnabled">
                      <h3 class="sidebar-heading ui inverted block header title">{{campaign.settings.explainer_text.title}}
                        <i class="collapse-indicator icon"></i>
                      </h3>
                      <div class="content" ng-bind-html="campaign.settings.explainer_text.message"></div>
                    </div>

                    <div id="sm-share-wrap" class="ui basic segment center aligned" ng-if="is_sharing_available">
                      <div class="specific-share-buttons" ng-if="displayOnlyFbTwitterEmailShare">
                        <div class="a2a_kit a2a_kit_size_32 a2a_default_style social-media-share" data-a2a-url="{{shortenedUrl}}"
                          ng-show="!share">
                          <span class="share-text-cta" translate>campaign_social_media_text_cta</span>
                          <a class="a2a_button_facebook">
                            <span class="label" translate>campaign_social_media_button_text_label</span>
                            <i class="fa fa-facebook"></i>
                            </i>
                          </a>
                          <div class="extra-share-buttons">
                            <div class="share-text" translate>campaign_or_share_text</div>
                            <a class="a2a_button_twitter">
                              <i class="fa fa-twitter"></i>
                            </a>
                            <a class="a2a_button_email">
                              <i class="fa fa-envelope"></i>
                            </a>
                          </div>
                        </div>
                      </div>
                      <div class="share-campaign ui top left pointing dropdown green button huge fluid" style="text-align:center;"
                        ng-if="!displayOnlyFbTwitterEmailShare">
                        <span class="text" translate>campaign_page_share_this_campaign</span>
                        <div class="menu">
                          <div class="a2a_kit a2a_kit_size_32 a2a_default_style social-media-share" ng-show="!share">
                            <a class="a2a_button_facebook"></a>
                            <a class="a2a_button_twitter"></a>
                            <a class="a2a_button_email"></a>
                            <a class="a2a_button_google_plus"></a>
                            <a class="a2a_dd" href="https://www.addtoany.com/share_save"></a>
                          </div>

                          <script type="text/javascript" src="https://static.addtoany.com/menu/page.js"></script>
                        </div>
                      </div>
                      <div ng-if="!moveEmbedBelowCommentsAccordionMobile && !displayOnlyFbTwitterEmailShare" class="embed-campaign ui floating dropdown huge labeled icon button"
                        id="mob-view1">
                        <i class="code icon"></i>
                        <span class="text" translate>campaign_page_embed</span>
                        <div class="menu">
                          <textarea rows="4" cols="50"><iframe width="260" height="650" src="{{$location.protocol()}}://{{$location.host()}}/embed/card-view/{{campaign.id}}" frameborder="0" scrolling="no"></iframe></textarea>
                        </div>
                      </div>
                    </div>

                    <div ng-if="campaign.campaign_links.length && !isRemoveCampaignLinks" class="campaign-links-wrap">
                      <div class="ui center aligned  bulleted horizontal list campaign-links">
                        <a class="item" ng-repeat="link in campaign.campaign_links | limitTo: 5" ng-href="{{link.uri}}"
                          target="_blank">
                          <span ng-if="link.uri_text">{{link.uri_text}}</span>
                          <span ng-if="!link.uri_text">{{link.uri}}</span>
                        </a>
                      </div>
                    </div>
                  </div>

                  <div class="campaign-top-header-image" ng-if="campaign.files.length">
                    <a ng-if="campaign.settings.top_header_link" ng-href="{{campaign.settings.top_header_link}}">
                      <img ng-repeat="file in campaign.files | filter:{region_id: RESOURCE_REGIONS.campaign.top_header} | orderBy:'-file_id' | limitTo: 1"
                        ng-src="{{server + '/image/campaign_top_header_image/' + file.path_external}}" class="ui image" />
                    </a>
                    <img ng-if="!campaign.settings.top_header_link" ng-repeat="file in campaign.files | filter:{region_id: RESOURCE_REGIONS.campaign.top_header} | orderBy:'-file_id' | limitTo: 1"
                      ng-src="{{server + '/image/campaign_top_header_image/' + file.path_external}}" class="ui image" />
                  </div>
                </div>
                <!-- column end -->

                <div class="right-col seven wide column" ng-show="(!isCreatorInfoOnMainBlock || isCreatorInfoTopBottomOfCampaign) && !public_settings.site_campaign_creator_info_display_left_header && !isCreatorNameOnly">
                  <div class="cp-menu-tabs ui top attached tabular menu" ng-show="!site_campaign_hide_creator_info && !isCreatorNameOnly">
                    <a class="item" data-tab="personal-profile" ng-class="{active: campaign.profile_type_id == 1 && !campaign.toggle_profile_type_view_advance || !campaign.business_organizations || (campaign.toggle_profile_type_view_advance && campaign.profile_type_view_id == 2)|| (campaign.toggle_profile_type_view_advance && campaign.profile_type_view_id == 0 && campaign.profile_type_id == 1)}"
                      ng-show="!(campaign.toggle_profile_type_view_advance && campaign.profile_type_view_id == 1)"
                      translate>campaign_page_creator</a>
                    <a class="item" data-tab="business-profile" ng-class="{active: campaign.profile_type_id == 2 && campaign.business_organizations || (campaign.toggle_profile_type_view_advance && campaign.profile_type_view_id == 1)}"
                      ng-show="(campaign.business_organizations && !campaign.toggle_profile_type_view_advance) || (campaign.toggle_profile_type_view_advance && campaign.business_organizations && (campaign.profile_type_view_id == 0 || campaign.profile_type_view_id == 1))"
                      translate>campaign_page_company</a>
                  </div>
                  <div class="ui bottom attached tab" ng-class="{active: (campaign.profile_type_id == 1 && !campaign.toggle_profile_type_view_advance) || !campaign.business_organizations || (campaign.toggle_profile_type_view_advance && campaign.profile_type_view_id == 2) || (campaign.toggle_profile_type_view_advance && campaign.profile_type_view_id == 0 && campaign.profile_type_id == 1)}"
                    data-tab="personal-profile">
                    <div ng-repeat="manager in campaign.managers">
                      <div class="campaign-user ui two column stackable grid">
                        <div class="user-info-col ten wide column" ng-if="!site_campaign_hide_creator_info && !isCreatorNameOnly">
                          <h2 class="ui campaign-user-name header" ng-if="!public_settings.site_campaign_enable_organization_name">{{manager.first_name
                            + ' ' + manager.last_name}}</h2>
                          <h2 class="ui campaign-user-name header" ng-if="public_settings.site_campaign_enable_organization_name">{{organization_name.value}}</h2>
                          <p class="ui campaign-user-name header" ng-if="public_settings.site_campaign_enable_organization_name">{{'ein_field_label'
                            | translate}}{{organization_name.ein}}</p>
                          <p ng-show="!public_settings.site_campaign_enable_campaign_bio">{{manager.bio}}</p>
                          <p ng-show="public_settings.site_campaign_enable_campaign_bio">{{campaign.settings.bio_enable}}</p>
                          <div class="campaign-user-links" ng-show="manager.person_websites && manager.person_websites.length">
                            <h4 class="site-link-title ui header" translate>
                              <i class="globe icon"></i> campaign_page_wbsite_link</h4>
                            <div class="ui divided vertical list">
                              <div class="item" ng-repeat="website in manager.person_websites">
                                <a href="{{website.uri}}" target="_blank" class="site-link text-link">{{website.uri_text}}</a>
                              </div>
                            </div>
                          </div>
                        </div>
                        <!-- column end -->
                        <div class="user-img-col center aligned six wide column" ng-class="{'right floated': site_campaign_hide_creator_info || isCreatorNameOnly}">
                          <a ng-if="!site_campaign_hide_creator_info && !isCreatorNameOnly" class="user-img-wrap" href="">
                            <img width="200" height="200" class="ui circular image pp_placeholder" ng-hide="manager.person_files[0]"
                              src="images/placeholder-images/placeholder_profile_photo.png">
                            <img width="200" height="200" ng-if="manager.person_files[0]" ng-src="{{server + '/image/campaign_profile/' + manager.person_files[0].path_external}}"
                              class="ui circular image" id="campaign-user-pic">
                          </a>
                          <div class="contact-btn ui button" ng-if="!removeContactUser" translate>campaign_page_contact_creator</div>
                        </div>
                        <!-- column end -->
                      </div>
                    </div>
                  </div>
                  <!-- business profile -->
                  <div class="ui bottom attached tab" ng-class="{active: campaign.profile_type_id == 2 && campaign.business_organizations && !campaign.toggle_profile_type_view_advance || (campaign.toggle_profile_type_view_advance && campaign.profile_type_view_id == 1 && campaign.business_organizations) || (campaign.toggle_profile_type_view_advance && campaign.profile_type_view_id == 0 && campaign.business_organizations && campaign.profile_type_id == 2)}"
                    data-tab="business-profile">
                    <div ng-repeat="company in campaign.business_organizations">
                      <div class="campaign-company ui two column stackable grid">
                        <div class="company-info-col ten wide column" ng-if="!site_campaign_hide_creator_info && !isCreatorNameOnly">
                          <h2 class="ui campaign-user header">{{company.name}}</h2>
                          <p html-render html=company.description></p>
                          <div class="campaign-company-links" ng-show="company.business_websites">
                            <h4 class="site-link-title ui header" translate>
                              <i class="globe icon"></i>campaign_page_wbsite_link </h4>
                            <div class="ui divided vertical list">
                              <div class="item" ng-repeat="website in company.business_websites">
                                <a href="{{website.uri}}" target="_blank" class="site-link text-link">{{website.uri_text
                                  | limitTo : 50}}</a>
                              </div>
                            </div>
                          </div>
                        </div>
                        <div class="company-img-col center aligned six wide column" ng-class="{'right floated': site_campaign_hide_creator_info || isCreatorNameOnly}">
                          <div class="company-img-wrap" ng-if="!site_campaign_hide_creator_info && !isCreatorNameOnly">
                            <img width="200" height="200" class="ui circular image pp_placeholder" ng-hide="company.business_files[0]"
                              src="images/placeholder-images/placeholder_profile_photo.png">
                            <img width="200" height="200" ng-if="company.business_files[0]" ng-src="{{server + '/image/campaign_profile/' + company.business_files[0].path_external}}"
                              class="ui circular image" id="campaign-company-pic">
                          </div>
                          <div class="contact-btn ui button" ng-if="!removeContactUser" translate>campaign_page_contact_creator</div>
                        </div>
                      </div>
                    </div>
                    <!-- column end -->
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="campaign-bottom-section">
          <div class="ui page grid">
            <div class="ui column">
              <div id="campaign-tabs">
                <div class="ui top attached pointing secondary menu menu-tabs mob-colps" ng-hide="hidef && hidec && hides && hideb">
                  <a class="item active" data-tab="campaign" ng-click="toggleHash('campaign_page_campaigntitle')" id="campaign"
                    ng-hide="hidef && hidec && hides && hideb">{{'campaign_page_campaigntitle' | translate}}</a>
                  <a ng-show="displayRewardsMobileTab" class="item" data-tab="rewards" ng-click="toggleHash('campaign_page_rewardstitle')"
                    id="rewards">{{'campaign_page_rewardstitle' | translate}}
                  </a>
                  <a class="item" data-tab="faq" ng-click="toggleHash('campaign_page_faq')" id="faq" ng-show="(showFaq || ((showFaq || faqs)  && public_settings.site_theme_campaign_faq_option !='2')) && !isRemoveCampaignFaq">
                    {{'campaign_page_faq' | translate }}
                    <span class="ui label">{{campaign.faqs[0].faq_pairs.length || 0}}</span>
                  </a>
                  <a class="item" data-tab="backers" ng-click="toggleHash('campaign_page_backers')" ng-show="backer_show && !isBackersOnSidebar"
                    id="backer">{{' campaign_page_backers' | translate}}
                    <span class="ui label">{{backer_length}}</span>
                  </a>
                  <a class="item" data-tab="streams" ng-click="toggleHash('campaign_page_streams')" ng-show="(showStream || (($scope.showStream || campaign.streams.length) && public_settings.site_theme_campaign_stream_option !='2'))  && !isUpdatesOnMainBlock"
                    id="stream"> {{ 'campaign_page_streams' | translate}}
                    <span class="ui label">{{campaign.streams.length}}</span>
                  </a>
                  <a class="item" data-tab="comments" ng-click="toggleHash('campaign_page_comments')" id="comment"
                    ng-show="showComment && !isCommentsOnMainBlock && !public_settings.site_campaign_comments_display_replace_reward">{{
                        'campaign_page_comments' | translate }}
                    <span ng-if="comment_system =='custom'" class="ui label">{{sortOrFiltersComments.pagination.totalentries}}</span>
                  </a>
                  <a class="item" data-tab="files" ng-click="toggleHash('campaign_page_files')" id="file" ng-show="public_settings.dedicated_campaign_files && campaign.settings.campaign_files && campaign.settings.campaign_files.length">
                    {{ 'campaign_page_files' | translate }}
                    <span class="ui label">{{campaign.settings.campaign_files.length}}</span>
                  </a>
                </div>
                <div class="mob-view ui vertical menu fluid menu-tabs" ng-hide="hidef && hidec && hides && hideb">
                  <a class="item active" data-tab="campaign" ng-click="toggleHash('campaign_page_campaigntitle')"
                    id="mobile-campaign" ng-hide="hidef && hidec && hides && hideb">{{'campaign_page_campaigntitle' | translate}}
                  </a>
                  <a class="item" data-tab="rewards" ng-click="toggleHash('campaign_page_rewardstitle')" id="mobile-rewards"
                    ng-show="displayRewardsMobileTab">{{'campaign_page_rewardstitle' | translate}}
                    <span class="count-label ui label">{{campaign.pledges.length || 0}}</span>
                  </a>
                  <a class="item" data-tab="faq" ng-click="toggleHash('campaign_page_faq')" id="mobile-faq" ng-show="(showFaq || ((showFaq || faqs)  && public_settings.site_theme_campaign_faq_option !='2'))  && !isRemoveCampaignFaq"
                    ng-if="!isRemoveCampaignFaq">
                    {{'campaign_page_faq' | translate }}
                    <span class="count-label ui label">{{campaign.faqs[0].faq_pairs.length || 0}}</span>
                  </a>
                  <a class="item" data-tab="backers" ng-class="{'hide-mobile': moveBackersBelowCreatorAccordionMobile}" ng-click="toggleHash('campaign_page_backers')" ng-show="backer_show && !isBackersOnSidebar"
                    id="mobile-backer">{{' campaign_page_backers' | translate}}
                    <span class="count-label ui label">{{backer_length}}</span>
                  </a>
                  <a class="item" data-tab="streams" ng-click="toggleHash('campaign_page_streams')" ng-show="(showStream || (($scope.showStream || campaign.streams.length) && public_settings.site_theme_campaign_stream_option !='2')) && !isUpdatesOnMainBlock"
                    id="mobile-stream"> {{ 'campaign_page_streams' | translate}}
                    <span class="count-label ui label">{{campaign.streams.length}}</span>
                  </a>
                  <a class="item" data-tab="comments" ng-click="toggleHash('campaign_page_comments')" id="mobile-comment"
                    ng-show="showComment && !isCommentsOnMainBlock">{{ 'campaign_page_comments'
                        | translate }}
                    <span ng-if="comment_system =='custom'" class="count-label ui label">{{sortOrFiltersComments.pagination.totalentries}}</span>
                  </a>
                  <a class="item" data-tab="files" id="mobile-file" ng-click="toggleHash('campaign_page_files')" ng-show="public_settings.dedicated_campaign_files && campaign.settings.campaign_files && campaign.settings.campaign_files.length">
                    {{'campaign_page_files' | translate}}
                    <span class="count-label ui label">{{campaign.settings.campaign_files.length || 0}}</span>
                  </a>
                </div>

                <div class="ui middle attached tab segment" data-tab="rewards" id="rewards-seg">
                  <ul id="rewards-list" ng-show="campaign.pledges" class="rewards">
                    <h3 class="ui inverted top attached header center aligned" id="campaign-rewards" translate>
                      campaign_pledge_campaign_reward</h3>
                    <div ng-repeat="pledge in campaign.pledges_to_show track by $index | orderBy:'amount'" id="rewards-section">
                      <div class="pledge-level" ng-if="enableRewardVariation" ng-class="{'ended': dateInPast(campaign.ends,campaign.seconds_remaining) || campaign.entry_status_id != 2 || campaign.campaign_started=='f'|| (thresholdallowed && campaign.funded_amount + pledge.amount > campaign.maximum_allowed_funds_raised), 'sold-out': pledge.total_pledges == pledge.item_limit, 'reward-var-enabled' : enableRewardVariation, 'sold-out': rewardExpired(pledge.expires)}">

                        <li class="bonus-1">
                          <div class="ui basic segment">
                            <div class="ui basic dimmable dimmed segment reward-bg-wrap">
                              <div class="ui inverted simple dimmer" ng-if="pledge.total_pledges == pledge.item_limit  || rewardExpired(pledge.expires)">
                                <div class="content">
                                  <div class="center">
                                    <h2 class="ui icon header" translate>
                                      <i class="emphasized frown icon"></i> campaign_pledge_campaign_reward_soldout
                                    </h2>
                                  </div>
                                </div>
                              </div>
                              <div class="reward-amount">
                                <span ng-bind-html="pledge.amount | formatCurrency:campaign.currencies[0].code_iso4217_alpha:public_setting.site_campaign_decimal_option"></span>
                                <span class="currency"> {{campaign.currencies[0].code_iso4217_alpha}}</span>
                                <span style="font-size:16px;" ng-show="pledge.shipping">{{'campaign_pledge_campaign_reward_shippingtext'
                                  | translate}}</span>
                              </div>
                              <h4 class="ui header"> {{pledge.name}}</h4>
                              <p class="reward-desc fr-view" ng-hide="reward_html_editor" html-render html="pledge.description"></p>
                              <div ng-show="reward_html_editor" html-render html="pledge.description" class="reward-desc fr-view"></div>
                              <div id="{{'reward-variation-' + $index}}" class="reward-variation">
                                <div class="reward-variation-item" ng-repeat="variation in pledge.attributes.variation">
                                  <label>{{variation.name}}</label>
                                  <div class="ui fluid selection dropdown">
                                    <input type="hidden" name="variation_value">
                                    <i class="dropdown icon"></i>
                                    <div class="default text">{{variation.name}}</div>
                                    <div class="menu">
                                      <div class="item" data-value="{{$index}}" ng-repeat="choiceItem in variation.choice track by $index">{{choiceItem.value}}</div>
                                    </div>
                                  </div>
                                </div>
                              </div>
                              <div class="bottom">
                                <div class="reward-backers" ng-if="pledge.total_backers>0">
                                  <i class="users icon"></i>
                                  <span class="backer-number"> {{pledge.total_backers}} </span>
                                  <span>{{'campaign_pledge_campaign_reward_backer' | translate}}
                                    <span ng-if="pledge.total_backers>1">{{'plural_letter' | translate}}</span>
                                  </span>
                                </div>

                                <div class="reward-backers" ng-if="pledge.total_backers == 0">
                                  <i class="users basic icon"></i>{{'campaign_pledge_campaign_nobacker' | translate}}</div>
                                <div class="limit" ng-if="pledge.item_limit != null">{{'campaign_pledge_campaign_reward_limited'
                                  | translate}} {{pledge.item_limit - pledge.total_pledges}}
                                  {{'campaign_pledge_campaign_reward_limited_leftoff'
                                  | translate}} {{pledge.item_limit}}</div>
                                <div class="reward-etd" ng-if="pledge.estimated_delivery_time">
                                  {{'campaign_pledge_campaign_reward_estimated_shiping'
                                  | translate}}
                                  <span class="f-delivery-date">{{pledge.estimated_delivery_time | formatDate:"MMMM YYYY"}}
                                  </span>
                                </div>
                              </div>
                              <button class="choose-reward-btn ui large fluid button" ng-click="dateInPast(campaign.ends,campaign.seconds_remaining) || campaign.entry_status_id != 2 || pledge.total_pledges == pledge.item_limit || (thresholdallowed && campaign.funded_amount + pledge.amount > campaign.maximum_allowed_funds_raised) || campaign.campaign_started=='f' || submitPledge($event, pledge, $index)">
                                <span ng-show="!customText.toggle" translate>campaign_page_choose_reward_text</span>
                                <span ng-show="customText.toggle">{{pledge.rewardCustom}}</span>
                              </button>
                            </div>
                          </div>
                        </li>
                      </div>

                      <div class="pledge-level" ng-if="!enableRewardVariation" ng-click="dateInPast(campaign.ends,campaign.seconds_remaining) || campaign.entry_status_id != 2 || pledge.total_pledges == pledge.item_limit || (thresholdallowed && campaign.funded_amount + pledge.amount > campaign.maximum_allowed_funds_raised) || campaign.campaign_started=='f' || submitPledge($event, pledge, $index)"
                        ng-class="{'ended': dateInPast(campaign.ends,campaign.seconds_remaining) || campaign.entry_status_id != 2 || campaign.campaign_started=='f'|| (thresholdallowed && campaign.funded_amount + pledge.amount > campaign.maximum_allowed_funds_raised), 'sold-out': pledge.total_pledges == pledge.item_limit, 'sold-out': rewardExpired(pledge.expires)}">

                        <li class="bonus-1">
                          <div class="ui basic segment">
                            <div class="ui basic dimmable dimmed segment reward-bg-wrap">
                              <div class="ui inverted simple dimmer" ng-if="pledge.total_pledges == pledge.item_limit || rewardExpired(pledge.expires)">
                                <div class="content">
                                  <div class="center">
                                    <h2 class="ui icon header" translate>
                                      <i class="emphasized frown icon"></i> campaign_pledge_campaign_reward_soldout
                                    </h2>
                                  </div>
                                </div>
                              </div>
                              <div class="reward-amount">
                                <span ng-bind-html="pledge.amount | formatCurrency:campaign.currencies[0].code_iso4217_alpha:public_setting.site_campaign_decimal_option"></span>
                                <span class="currency"> {{campaign.currencies[0].code_iso4217_alpha}}</span>
                                <span style="font-size:16px;" ng-show="pledge.shipping">{{'campaign_pledge_campaign_reward_shippingtext'
                                  | translate}}</span>
                              </div>
                              <h4 class="ui header"> {{pledge.name}}</h4>
                              <p class="reward-desc fr-view" ng-hide="reward_html_editor" html-render html="pledge.description"></p>
                              <div ng-show="reward_html_editor" html-render html="pledge.description" class="reward-desc fr-view"></div>
                              <div class="bottom">
                                <div class="reward-backers" ng-if="pledge.total_backers>0">
                                  <i class="users icon"></i>
                                  <span class="backer-number"> {{pledge.total_backers}} </span>
                                  <span>{{'campaign_pledge_campaign_reward_backer' | translate}}
                                    <span ng-if="pledge.total_backers>1">{{'plural_letter' | translate}}</span>
                                  </span>
                                </div>

                                <div class="reward-backers" ng-if="pledge.total_backers == 0">
                                  <i class="users basic icon"></i>{{'campaign_pledge_campaign_nobacker' | translate}}</div>
                                <div class="limit" ng-if="pledge.item_limit != null">{{'campaign_pledge_campaign_reward_limited'
                                  | translate}} {{pledge.item_limit - pledge.total_pledges}}
                                  {{'campaign_pledge_campaign_reward_limited_leftoff'
                                  | translate}} {{pledge.item_limit}}</div>
                                <div class="reward-etd" ng-if="pledge.estimated_delivery_time">
                                  {{'campaign_pledge_campaign_reward_estimated_shiping'
                                  | translate}}
                                  <span class="f-delivery-date">{{pledge.estimated_delivery_time | formatDate:"MMMM YYYY"}}
                                  </span>
                                </div>
                              </div>
                            </div>
                          </div>
                        </li>
                      </div>
                    </div>
                    <div class="reward-pagination">
                      <div semantic-pagination ng-model="rewardPagination.page" items-per-page-nav="3" total-pages="rewardPagination.pagination.numpages"
                        update-function="filterRewards()" pagination-name="rewards"></div>
                    </div>
                  </ul>
                </div>

                <div class="ui middle attached tab segment active" data-tab="campaign" id="campaign-seg">
                  <div class="campaign-info ui two column stackable grid addborder">

                    <!-- partials for lining up elements on screen -->

                    <div class="left-col ten wide column" ng-if="!public_settings.site_campaign_page_line_up_sidebar">
                      <div ng-include src="'views/templates/partials/campaign/campaign-image.html'"></div>
                      <div ng-include src="'views/templates/partials/campaign/campaign-about.html'"></div>
                    </div>

                    <div class="right-col six wide column" ng-if="!public_settings.site_campaign_page_line_up_sidebar">
                      <div ng-include src="'views/templates/partials/campaign/pledge/campaign-pledge-contribute-share.html'"></div>
                      <div ng-include src="'views/templates/partials/campaign/pledge/campaign-pledge-rewards-backers.html'"></div>
                    </div>

                    <div class="left-col ten wide column" ng-if="public_settings.site_campaign_page_line_up_sidebar">
                      <div ng-include src="'views/templates/partials/campaign/campaign-image.html'"></div>
                    </div>

                    <div class="right-col six wide column" ng-if="public_settings.site_campaign_page_line_up_sidebar">
                      <div ng-include src="'views/templates/partials/campaign/pledge/campaign-pledge-contribute-share.html'"></div>
                    </div>

                    <div class="left-col ten wide column" ng-if="public_settings.site_campaign_page_line_up_sidebar">
                      <div ng-include src="'views/templates/partials/campaign/campaign-about.html'"></div>
                    </div>

                    <div class="right-col six wide column" ng-if="public_settings.site_campaign_page_line_up_sidebar">
                      <div ng-include src="'views/templates/partials/campaign/pledge/campaign-pledge-rewards-backers.html'"></div>
                    </div>


                    <!-- column end -->
                  </div>
                </div>

                <!-- tab end -->
                <div class="ui middle attached tab segment " data-tab="faq" id="faq-seg" ng-show="!isRemoveCampaignFaq">
                  <div class="campaign-info ui two column stackable grid addborder">
                    <div class="left-col left floated ten wide column">
                      <div class="ui warning message" ng-show="!FAQ || faqs==0" translate>campaign_page_nofaq</div>
                      <div class="faq-info" ng-repeat="faq in FAQ">
                        <div class="campaign-faq-header">
                          <h2 class="ui header">{{faq.name}}</h2>
                          <p>{{faq.description}}</p>
                        </div>
                        <div class="ui divider"></div>

                        <div class=" campaign-faq-list ui  accordion" ng-repeat="pair in faq.faq_pairs | orderBy: 'display_priority'"
                          ng-Accord>
                          <div class="campaign-faq-list1">
                            <h3 class="ui header title" id="faq-title">
                              <i class="dropdown icon"></i> {{pair.question}}
                            </h3>
                            <div class="content" id="faq-campaign">
                              {{pair.answer}}
                            </div>
                          </div>
                          <!-- <div class="ui divider"></div> -->
                        </div>
                      </div>
                    </div>
                    <!-- column end -->
                    <div class="right-col six wide column">
                      <div ng-include src="'views/templates/partials/campaign/pledge/campaign-pledge-contribute-share.html'"></div>
                      <div ng-include src="'views/templates/partials/campaign/pledge/campaign-pledge-rewards-backers.html'"></div>
                    </div>
                    <!-- column end -->
                  </div>
                  <!-- campaign-info end -->
                </div>
                <!-- tab end -->

                <div class="ui middle attached tab segment " data-tab="backers" id="backer-seg" ng-show="!isBackersOnSidebar">
                  <div id="backer-list" class="campaign-info ui two column stackable grid addborder">
                    <div class="left ten wide column">
                      <div class="ui warning message" ng-show="backer_length==0" translate>campaign_page_nobackers
                      </div>

                      <div ng-repeat="backer in campaign.backers" class="campaign-backerbox" ng-class="{'no-profile-link' : backer.anonymous_contribution || backer.anonymous_contribution_partial}">
                        <div class="campaign-backer ui segment">
                          <div class="campaign-backer-top ui two column stackable grid">
                            <div class="left-col five wide column">
                              <div class="linkdiv header backer-user" id="linkdiv">
                                <img class="ui avatar image" ng-src="{{server + '/image/campaign_profile/'+backer.person_files[0].path_external}}"
                                  ng-if="backer.person_files">
                                <img src="images/placeholder-images/placeholder_profile_photo.png" class="ui avatar image pp_placeholder"
                                  ng-if="!backer.person_files">
                                <span>{{backer.first_name}} {{backer.last_name}}</span>
                                <span ng-show="backer.anonymous_contribution" translate>campaign_page_anonymous_backer</span>
                              </div>
                            </div>
                            <div class="right-col eleven wide column">
                              <h3 class="backed-amount ui header" ng-bind-html="backer.total_amount | formatCurrency:campaign.currencies[0].code_iso4217_alpha:public_setting.site_campaign_decimal_option"></h3>
                            </div>
                          </div>
                          <div class="backed-campaigns" ng-if="backer.total_backed<2 && !isHideBackedCampaignsAmount">
                            <i class="certificate icon"></i>{{'campaign_page_backed' | translate}}
                            {{backer.total_backed}}
                            {{'campaign_page_backed_campaign' | translate}}</div>
                          <div class="backed-campaigns" ng-if="backer.total_backed>1 && !isHideBackedCampaignsAmount">
                            <i class="certificate icon"></i>{{'campaign_page_backed' | translate}}
                            {{backer.total_backed}}
                            {{'campaign_page_backed_campaigns' | translate}}</div>
                          <div class="ui message" ng-repeat="pledge in backer.notes" ng-if="pledge.note">
                            <small>{{pledge.created | formatDate:"MMM DD YYYY"}}</small>
                            <p>{{pledge.note}}</p>
                          </div>
                        </div>
                      </div>
                      <div class="semantic-pagination" semantic-pagination ng-model="backers_pagination.page"
                        total-pages="backers_pagination.numpages" update-function="getBackers()"></div>
                    </div>
                    <div class="right six wide column">
                      <div ng-include src="'views/templates/partials/campaign/pledge/campaign-pledge-contribute-share.html'"></div>
                      <div ng-include src="'views/templates/partials/campaign/pledge/campaign-pledge-rewards-backers.html'"></div>
                    </div>
                  </div>
                </div>
                <!-- tab end -->

                <div class="ui middle attached tab segment " data-tab="streams" id="stream-seg" ng-show="!isUpdatesOnMainBlock">
                  <div id="stream-list" class="campaign-info ui two column stackable grid addborder">
                    <div class="left-col ten wide column">
                      <div class="ui warning message" ng-show="campaign.streams.length==0" translate>campaign_page_nostream</div>

                      <div class="stream-full" ng-show="show_section.streamDetail">
                        <div class="ui green button" ng-click="show_section.streamDetail=false; $location.search('').replace()"
                          translate> campaign_page_goback
                        </div>
                        <div class="stream-full-content ui segment">
                          <div class="stream-header">
                            <h4 class="ui header left floated">{{'campaign_page_stream_text' | translate}} #{{stream.sindex}}</h4>
                            <h4 class="ui header right floated">{{toDate(stream.modified)  | formatDate:"MMM D, YYYY h:mm A"}}</h4>
                          </div>
                          <h3 class="stream-title ui header">{{stream.title}}</h3>
                          <div html-render html="stream.message" id="streamfull" class="fr-view"></div>
                        </div>
                      </div>
                      <!-- stream-full end -->

                      <div class="stream-partial" ng-hide="show_section.streamDetail">
                        <div class="stream-item ui segment" ng-repeat="stream in campaign.streams">
                          <div>
                            <div class="stream-header">
                              <h4 class="ui header left floated">{{'campaign_page_stream_text' | translate}} #{{campaign.streams.length
                                - $index}}
                              </h4>
                              <h4 class="ui header right floated">{{toDate(stream.modified) | formatDate:"MMM D, YYYY h:mm A"}}</h4>
                            </div>
                            <div class="stream-content">
                              <h3 class="stream-title ui header">
                                <a class="text-link">{{stream.title}}</a>
                              </h3>
                              <div html-convert-to-text="stream.message" max-char="250"></div>
                            </div>
                          </div>
                        </div>
                        <div class="stream-pagi">
                          <pagination ng-show="stream_pagination.numpages.length>1" ng-model="stream_filter.page"
                            total-items="campaign.streams.length" max-size="10" boundary-links="true" rotate="false"
                            items-per-page="stream_pagination.entriesperpage" previous-text="&lsaquo;" next-text="&rsaquo;"
                            first-text="&laquo;" last-text="&raquo;"></pagination>
                        </div>
                      </div>
                      <!-- stream-partial end -->
                    </div>
                    <div class="right-col six wide column">
                      <div ng-include src="'views/templates/partials/campaign/pledge/campaign-pledge-contribute-share.html'"></div>
                      <div ng-include src="'views/templates/partials/campaign/pledge/campaign-pledge-rewards-backers.html'"></div>
                    </div>
                  </div>
                </div>
                <!-- tab end -->

                <div class="ui middle attached tab segment addborder " data-tab="comments" id="comment-seg" ng-show="!isCommentsOnMainBlock">
                  <div class="campaign-info ui grid stackable">
                    <!-- DISQUS start -->
                    <div ng-if="comment_system =='disqus' && !disqus_shortname" class="sixteen wide column">
                        <div class="ui warning message">
                            {{'campaign_comment_disqus_shortname_missing_msg'|translate}}
                        </div>
                      </div>
                    <div id="insert_disqus" ng-if="comment_system == 'disqus'">
                    </div>
                    <!-- DISQUS End -->
                    <!-- Custom Comment start -->
                    <div ng-if="comment_system == 'custom'" class="left-col ten wide column">
                      <div class="campaign-comments ui comments">
                        <h3 class="ui dividing header" translate>custom_comment_header</h3>
                        <div class="comment-sort-action" ng-if="comments.length" data-ng-cloak>
                          <div class="ui selection dropdown">
                            <input type="hidden" name="gender">
                            <div class="text" translate>custom_comment_sort_order_descend</div>
                            <i class="dropdown icon"></i>
                            <div class="menu">
                              <div class="item" ng-click="getComments(_,'created')" data-value="created" translate>custom_comment_sort_order_ascend</div>
                              <div class="item active selected" ng-click="getComments(_,'-created')" data-value="-created"
                                translate>custom_comment_sort_order_descend</div>
                            </div>
                          </div>
                          <div class="item" data-ng-repeat="comment in comments track by $index">
                            <div class="comment" ng-style="comments_background_style">
                              <a class="avatar" ng-href="/profile/{{comment.comment_person[0].id}}" ng-if="comments_show_comment_picture && comment.comment_person[0].id != null">
                                <img ng-if="comment.comment_person[0].person_files[0].path_external" ng-src="{{server +'/image/campaign_profile/'+ comment.comment_person[0].person_files[0].path_external}}">
                                <img ng-if="!comment.comment_person[0].person_files[0].path_external" ng-src="images/placeholder-images/placeholder_profile_photo.png">
                              </a>
                              <div class="avatar" ng-if="comment.comment_person[0].id == null">
                                <img ng-src="images/placeholder-images/placeholder_profile_photo.png">
                              </div>
                              <div class="content">
                                <a class="author" ng-style="comments_font_color" ng-show="comment.comment_person[0].id != null"
                                  ng-href="/profile/{{comment.comment_person[0].id}}">{{comment.comment_person[0].first_name}}
                                  {{comment.comment_person[0].last_name}}
                                </a>
                                <span class="author" ng-style="comments_font_color" ng-show="comment.comment_person[0].id == null"
                                  translate="custom_comment_anonymous_user"></span>
                                <div class="metadata">
                                  <span class="date" ng-if="!public_settings.site_campaign_comments_display_verbose_date"
                                    ng-style="comments_font_color">{{'custom_comment_time'
                                    | translate}} {{comment.created | formatDate:"MMM D, YYYY h:mm A"}}</span>
                                  <span class="date" ng-if="public_settings.site_campaign_comments_display_verbose_date"
                                    ng-style="comments_font_color">{{'custom_comment_commented_text'
                                    | translate}} {{comment.timeNumber}}{{comment.timePeriod
                                    | translate}}</span>

                                </div>
                                <div class="text subject" ng-style="comments_font_color" ng-if="comment.title">
                                  {{comment.title}}
                                </div>
                                <div class="text" ng-style="comments_font_color">
                                  {{comment.message}}
                                </div>
                                <div class="actions">
                                  <!-- can only vote and reply to other people's comments  -->
                                  <span ng-if="comment.person_id != user.person_id">
                                    <a class="upvote ui label " ng-class="{'active': comment.logged_in_person_has_voted_up == 't'}"
                                      ng-click="commentAction('upvote',comment.comment_id)">
                                      <i class="chevron up icon"></i>{{comment.total_votes_up}}</a>
                                    <a class="downvote ui label" ng-class="{'active': comment.logged_in_person_has_voted_down == 't'}"
                                      ng-click="commentAction('downvote',comment.comment_id)">
                                      <i class="chevron down icon"></i>{{comment.total_votes_down}}</a>
                                    <a class="reply ui label" ng-if="user.person_id" ng-click="commentAction('reply',comment.comment_person[0].first_name+' '+comment.comment_person[0].last_name)">
                                      <i class="reply icon"></i>{{'custom_comment_reply_button' | translate}}</a>
                                  </span>
                                  <!-- can only edit/delete their own comments  -->
                                  <span ng-if="comment.person_id == user.person_id || user.person_type_id == 1">
                                    <a ng-if="comment.person_id == user.person_id" class="upvote ui label">
                                      <i class="chevron up icon"></i>{{comment.total_votes_up}}</a>
                                    <a ng-if="comment.person_id == user.person_id" class="downvote ui label">
                                      <i class="chevron down icon"></i>{{comment.total_votes_down}}</a>
                                    <a class="delete ui label" ng-click="openModalById('delete-comment',comment.comment_id)"
                                      translate>custom_comment_delete_button</a>
                                    <a class="update ui label" ng-click="openModalById('update-comment',comment.comment_id)"
                                      translate>custom_comment_update_button</a>
                                  </span>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                        <div class="ui basic segment center aligned" ng-if="comments.length">
                          <div semantic-pagination ng-model="sortOrFiltersComments.page" total-pages="sortOrFiltersComments.pagination.numpages"
                            update-function="getComments()"></div>
                        </div>
                        <div class="ui warning message" ng-if="!comments.length" translate>
                          custom_comment_no_comment_message
                        </div>
                        <div class="ui warning message" ng-if="!user.person_id" translate>
                          custom_comment_login_message
                        </div>
                        <form class="ui form comment-form" validate ng-model="comment_form" ng-if="user.person_id">
                          <div class="ui divider"></div>
                          <h2 class="ui header" translate>custom_comment_form_header</h2>
                          <div class="field">
                            <label translate>custom_comment_form_subject</label>
                            <input type="text" name="comment_title" ng-model="comment_form.comment_title">
                          </div>
                          <div class="field">
                            <label translate>custom_comment_form_comment</label>
                            <textarea id="custom_comment_message" name="comment_message" ng-model="comment_form.message"
                              required></textarea>
                          </div>
                          <div class="field">
                            <div class="ui blue labeled submit button" ng-click="addComment(comment_form);" translate>
                              custom_comment_form_submit
                            </div>
                            <div class="ui checkbox" ng-model="comment_form.anonymous" ng-if="is_anonymous_available && !public_settings.custom_comment_anonymous_force">
                              <input type="checkbox" name="anonymous">
                              <label translate="custom_comment_anonymous_message"></label>
                            </div>
                          </div>
                        </form>
                      </div>
                      <div class="ui modal" id="vote-anonymous">
                        <i class="close icon"></i>
                        <div class="content" translate="custom_comment_vote_anonymous_content"></div>
                        <div class="actions">
                          <div class="ui green button" ng-click="setUpVote(true)" translate="custom_comment_vote_anonymous_action"></div>
                          <div class="ui blue button" ng-click="setUpVote(false)" translate="custom_comment_vote_not_anonymous_action"></div>
                        </div>
                      </div>
                      <div class="ui modal" id="update-comment">
                        <i class="close icon"></i>
                        <div class="header">
                          <h3 class="ui header" translate>custom_comment_update_form_header</h3>
                        </div>
                        <div class="content">
                          <div class="fluid ui form">
                            <div class="field">
                              <label translate>custom_comment_update_form_subject</label>
                              <input type="text" ng-model="old_comment[0].title" placeholder="Subject" required>
                            </div>
                            <div class="field">
                              <label translate>custom_comment_update_form_comment</label>
                              <textarea placeholder="Comment Text" ng-model="old_comment[0].message" required></textarea>
                            </div>
                          </div>
                        </div>
                        <div class="actions">
                          <div class="ui green button" ng-click="updateComment(old_comment[0])" translate>custom_comment_update_form_submit
                          </div>
                        </div>
                      </div>
                      <div class="ui small modal" id="delete-comment">
                        <i class="close icon"></i>
                        <div class="header">
                          <h3 class="ui header" translate>custom_comment_delete_form_header</h3>
                        </div>
                        <div class="content" translate>
                          custom_comment_delete_form_message
                        </div>
                        <div class="actions">
                          <div class="ui green button" ng-click="deleteComment(current_selected_comment_id)" translate>
                            custom_comment_delete_form_submit</div>
                        </div>
                      </div>
                    </div>
                    <div class="right-col six wide column" ng-if="comment_system =='custom'">
                      <div ng-include src="'views/templates/partials/campaign/pledge/campaign-pledge-contribute-share.html'"></div>
                      <div ng-include src="'views/templates/partials/campaign/pledge/campaign-pledge-rewards-backers.html'"></div>
                    </div>
                  </div>
                </div>
                <div class="ui middle attached tab segment " data-tab="files" id="file-seg">
                  <div class="campaign-info ui grid stackable">
                    <div class="left-col ten wide column">
                      <h3 class="ui dividing header" translate="campaign_page_files"></h3>
                      <div class="file-list ui items" ng-repeat="campaignFile in campaign.settings.campaign_files">
                        <div class="item">
                          <div class="ui image">
                            <i class="huge outline icon" ng-class="campaignFile.icon"></i>
                          </div>
                          <div class="middle aligned content">
                            <div class="header" ng-bind="campaignFile.title"></div>
                            <div class="description">
                              <p ng-bind="campaignFile.description"></p>
                            </div>
                            <div class="extra">
                              <a ng-href="{{server + '/static/images/' + campaignFile.path}}" target="_blank" translate="campaign_page_files_view"></a>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="right-col six wide column">
                      <div ng-include src="'views/templates/partials/campaign/pledge/campaign-pledge-contribute-share.html'"></div>
                      <div ng-include src="'views/templates/partials/campaign/pledge/campaign-pledge-rewards-backers.html'"></div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div ng-bind-html="gaScript"></div>
        <div ng-bind-html="fbScript"></div>
        <div ng-bind-html="rcScript"></div>
        <div class="ui modal manager-bio-modal">
          <i class="close icon"></i>
          <div class="header">
            <h3 class="ui header" translate>campaign_page_biography </h3>
          </div>
          <div class="content">
            <div class="manager-item" ng-repeat="manager in campaign.managers">
              <div class="ui two column stackable grid">
                <div class="six wide column">
                  <img ng-hide="manager.person_files[0]" src="images/placeholder-images/placeholder_profile_photo.png"
                    class="ui right floated circular image">
                  <img ng-if="manager.person_files[0]" ng-src="{{server + '/image/campaign_profile/' + manager.person_files[0].path_external}}"
                    class="ui right floated circular image" id="campaign-user-pic">
                </div>
                <div class="ten wide column manager-name">
                  <h3 class="ui header">{{manager.first_name}} {{manager.last_name}}</h3>
                </div>
              </div>
              <div class="ui two column stackable grid">
                <div class="ten wide column">
                  <p>{{manager.bio}}</p>
                </div>
                <div class="six wide column">
                  <h2 class="ui header" translate> campaign_page_website </h2>
                  <div class="ui link list">
                    <div ng-repeat="link in manager.person_websites">
                      <a class="item" ng-href="{{link.uri}}" target="_blank">{{link.uri_text}}</a>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <script src="scripts/social-message.js" type="text/javascript"></script>
        <div class="ui modal small user-not-found">
          <i class="close icon"></i>
          <div class="content">
            <div class="description">
              <div class="ui header center aligned">User not found.</div>
            </div>
          </div>
        </div>
        <div class="ui small modal" id="confirm-reward">
          <i class="close icon"></i>
          <div class="header">
            <h3 class="ui red center aligned header"> {{'campaign_pledge_campaign_contribute_option' | translate}} </h3>
            <div class="content">
              <div class="ui basic segment center aligned">
                <a class="ui green button" ng-click="dateInPast(campaign.ends,campaign.seconds_remaining) || campaign.entry_status_id != 2 || miniContributeReward()">{{'campaign_pledge_campaign_contribute_option_1'
                  | translate}} </a>
                <div class="ui horizontal divider">{{'campaign_pledge_campaign_contribute_option_or' | translate}}</div>
                <a class="ui  green button" ng-click="dateInPast(campaign.ends,campaign.seconds_remaining) || campaign.entry_status_id != 2 || guestContributeReward()">
                  {{'campaign_pledge_campaign_contribute_option_2' | translate}} </a>
              </div>
            </div>
          </div>
        </div>
        <div class="ui small modal" id="confirm-option">
          <i class="close icon"></i>
          <div class="header">
            <h3 class="ui red center aligned header">{{'campaign_pledge_campaign_select_option' | translate}} </h3>
          </div>
          <div class="content">
            <div class="ui basic segment center aligned">
              <a class="ui green button" ng-click="dateInPast(campaign.ends,campaign.seconds_remaining) || campaign.entry_status_id != 2 || miniContribute()">{{'campaign_pledge_campaign_contribute_option_1'
                | translate}}</a>
              <div class="ui horizontal divider">{{'campaign_pledge_campaign_contribute_option_or' | translate}} </div>
              <a class="ui  green button" ng-click="dateInPast(campaign.ends,campaign.seconds_remaining) || campaign.entry_status_id != 2 || guestContribute()">{{'campaign_pledge_campaign_contribute_option_2'
                | translate}}</a>
            </div>
          </div>
        </div>
        <div class="ui modal contribution-instruction">
          <i class="close icon"></i>
          <div class="header" translate="campaign_pledge_instruction"></div>
          <div class="content">
            <div class="description" ng-bind-html="contributionInstruction"></div>
          </div>
        </div>
        <div class="ui modal rewards-popup-modal" id="reward-modal">
          <i class="close icon"></i>
          <div class="header" translate="campaign_pledge_rewards"></div>
          <div class="content">
            <div class="description">
              <ul ng-show="campaign.pledges" class="rewards">
                <div ng-show="true" ng-click="submitContribute()" class="pledge-level">
                  <li class="bonus-1">
                    <div class="ui basic segment">
                      <div class="ui basic dimmable dimmed segment reward-bg-wrap">
                        <div class="reward-amount">
                          <span>{{'campaign_pledge_campaign_contribute_for_no_reward'| translate}}</span>
                        </div>
                        <p class="reward-desc fr-view" ng-hide="reward_html_editor" html-render html="pledge.description"></p>
                      </div>
                    </div>
                  </li>
                </div>
                <div ng-repeat="pledge in campaign.pledges_to_show | orderBy:'amount'" id="rewards-section">
                  <div ng-click="dateInPast(campaign.ends,campaign.seconds_remaining) || campaign.entry_status_id != 2 || pledge.total_pledges == pledge.item_limit || (thresholdallowed && campaign.funded_amount + pledge.amount > campaign.maximum_allowed_funds_raised) || campaign.campaign_started=='f' || submitPledge($event, pledge, $index)"
                    class="pledge-level" ng-class="{'ended': dateInPast(campaign.ends,campaign.seconds_remaining) || campaign.entry_status_id != 2 || campaign.campaign_started=='f'|| (thresholdallowed && campaign.funded_amount + pledge.amount > campaign.maximum_allowed_funds_raised), 'sold-out': pledge.total_pledges == pledge.item_limit}">
                    <li class="bonus-1">
                      <div class="ui basic segment">
                        <div class="ui basic dimmable dimmed segment reward-bg-wrap">
                          <div class="ui inverted simple dimmer" ng-if="pledge.total_pledges == pledge.item_limit">
                            <div class="content">
                              <div class="center">
                                <h2 class="ui icon header" translate>
                                  <i class="emphasized frown icon"></i> campaign_pledge_campaign_reward_soldout
                                </h2>
                              </div>
                            </div>
                          </div>
                          <div class="reward-amount">
                            <span ng-bind-html="pledge.amount | formatCurrency:campaign.currencies[0].code_iso4217_alpha:public_setting.site_campaign_decimal_option"></span>
                            <span class="currency"> {{campaign.currencies[0].code_iso4217_alpha}}</span>
                            <span style="font-size:16px;" ng-show="pledge.shipping">{{'campaign_pledge_campaign_reward_shippingtext'
                              | translate}}</span>
                          </div>
                          <h4 class="ui header"> {{pledge.name}}</h4>
                          <p class="reward-desc fr-view" ng-hide="reward_html_editor" html-render html="pledge.description"></p>
                          <div ng-show="reward_html_editor" html-render html="pledge.description" class="reward-desc fr-view"></div>
                          <div class="bottom">
                            <div class="reward-backers" ng-if="pledge.total_backers>0">
                              <i class="users icon"></i>
                              <span class="backer-number"> {{pledge.total_backers}} </span>
                              <span>{{'campaign_pledge_campaign_reward_backer' | translate}}
                                <span ng-if="pledge.total_backers>1">{{'plural_letter' | translate}}</span>
                              </span>
                            </div>
                            <div class="reward-backers" ng-if="pledge.total_backers == 0">
                              <i class="users basic icon"></i>{{'campaign_pledge_campaign_nobacker' | translate}}</div>
                            <div class="limit" ng-if="pledge.item_limit != null">{{'campaign_pledge_campaign_reward_limited'
                              | translate}} {{pledge.item_limit - pledge.total_pledges}}
                              {{'campaign_pledge_campaign_reward_limited_leftoff'
                              | translate}} {{pledge.item_limit}}</div>
                            <div class="reward-etd" ng-if="pledge.estimated_delivery_time">
                              {{'campaign_pledge_campaign_reward_estimated_shiping'
                              | translate}}
                              <span class="f-delivery-date">{{pledge.estimated_delivery_time | formatDate:"MMMM YYYY"}}
                              </span>
                            </div>
                          </div>
                        </div>
                      </div>
                    </li>
                  </div>
                </div>
              </ul>
              <!-- CHANGES -->
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="ui tab" data-tab="widget-preview">
      <div id="widget-view" ng-class="{'hide-border-top':public_settings.site_enable_advanced_widget}">
        <div class="ui page grid">
          <div class="column">
            <!-- WIDGET CODE -->
            <h1 class="ui header" translate="campaign_preview_widget_code_header"></h1>
            <div class="campaign-widget-code campaign-bg ui middle attached basic segment">
              <div class="formbg ui grid">
                <div class="column">
                  <p translate="campaign_widget_widget_code_instruction"></p>
                  <div class="widget-embed-code" widget-code-select ng-include src="'views/templates/partials/widget-code.html'"></div>
                </div>
              </div>
            </div>
            <div id="sedra-widget-container-area"></div>
            <sedra-widget>
            </sedra-widget>
          </div>
        </div>
      </div>
    </div>

    <div class="ui page grid">
      <div class="column">
        <div class="agreement-wrap">
          <div class="agreement ui form" ng-show="create">
            <div class="inline field">
              <div class="ui red pointing right label" ng-show="!agreed && tos_not_checked" translate="">please_confirm_tos</div>
              <div class="ui checkbox" ng-model="agreed" ng-class="{'has-error': !agreed && tos_not_checked}" id="creationCheck">
                <input type="checkbox" id="terms">
                <label for="terms"> {{'pledge_campaign_checkbox' | translate}}
                  <a href="tos" target="_blank">
                    <em> {{'pledge_campaign_term_service' | translate}}</em>
                  </a>
                  <a href="privacy" target="_blank">
                    <em>{{'pledge_campaign_privacy' | translate}}</em>
                  </a>
                  {{'ampersand' | translate}}
                  <a href="cookies" target="_blank">
                    <em> {{'cookies_policy_text' | translate}}</em>
                  </a>
                </label>
              </div>
            </div>
          </div>
        </div>
        <div ng-include src="'views/templates/partials/response-message.html'"></div>
        <div class="floating-message loading-message" ng-show="loadingText">
          <div class="ui message">
            <div class="success-text header">
              <i class="spinner loading icon"></i>
              <span translate>campaign_preview_loading_text</span>
            </div>
          </div>
        </div>
        <div ng-show="missingFields.header" class="floating-message set-to-review-notice">
          <div class="ui error message">
            <div class="success-text header" translate ng-bind='missingFields.header'>
            </div>
          </div>
        </div>
        <div ng-show="!approve_campaign && confirmNotice" class="floating-message set-to-review-notice">
          <div class="ui error message">
            <div class="success-text header">
              {{'campaign_preview_review_notice1'|translate}}
              <a ng-href="{{cpath}}">&nbsp;{{'campaign_preview_review_here'|translate}} </a>
              {{'campaign_preview_review_notice2'|translate}}
            </div>
          </div>
        </div>
        <div ng-show="approve_campaign &&  confirmNotice" class="floating-message set-to-review-notice">
          <div class="ui error message">
            <div class="success-text header">
              {{'campaign_preview_review_notice_auto_approve'|translate}} &nbsp;
              <a ng-href="{{cpath}}">{{'campaign_preview_review_here'|translate}} </a>
              {{'campaign_preview_review_notice2'|translate}}
            </div>
          </div>
        </div>
        <div ng-controller="CampaignStepCtrl">
          <div class="ui yellow large message campaign-edited-message" ng-if="campaign.entry_status_id == 1 && !public_settings.site_auto_approve_new_campaigns"
            translate="">campaign_step_editing_message</div>
          <div class="ui yellow large message campaign-edited-message" ng-if="campaign.entry_status_id == 1 && isPreviewDone && public_settings.site_auto_approve_new_campaigns"
            translate="campaign_preview_text_launch_reminder2"></div>
        </div>

        <div class="review-btn-wrap ui grid">
          <div class="show-preview-btn three wide column">
            <a class=" ui orange button left aligned" href="{{cpath}} " target="_blank" translate>
              campaign_preview_True_Preview
            </a>
          </div>
          <div class="send-preview-btn thirteen wide column">
            <div class="launch-campaign-action" ng-include src="'views/templates/partials/campaign/create/campaign-launch.html'"></div>
          </div>
        </div>

      </div>
    </div>
  </div>
</div>
<!-- mainbody-wrap end -->

<script src="scripts/social-message.js" type="text/javascript"></script>