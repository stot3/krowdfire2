<div class="mainbody-wrap" id="inline-contribution" ng-cloak>
  <div class="background-wrap">
    <div class="ui page grid">
      <div class="ui column" ng-if="!isContributionLayout1" id="default-contribution">
        <div class="campaign-disclaimer-text" ng-if="displayCampaignDisclaimer.toggle && displayCampaignDisclaimer.text">
          <div class="ui warning message" ng-bind-html="displayCampaignDisclaimer.text"></div>
        </div>
        <div class="pledge-campaign-top-header">
          <div class="ui two column stackable grid">
            <div class="four wide column campaign-img">
              <a ng-href="{{campaign_loc}}">
                <img ng-if="campaign.files.length" ng-repeat="file in campaign.files | filter:{region_id: RESOURCE_REGIONS.campaign.thumbnail} | orderBy:'-file_id' | limitTo: 1" ng-src="{{server + '/image/campaign_thumbnail_xl/' + file.path_external}}" class="ui image"
                />
                <img ng-if="campaign.files.length == 0" src="/images/placeholder-images/placeholder_campaign_thumb.png" class="ui image" />
              </a>
            </div>
            <div class="twelve wide column">
              <h1 class="ui header"><a ng-href="{{campaign_loc}}"> {{campaign.name}} </a></h1>
              <h4 ng-if="!public_settings.site_campaign_enable_organization_name"> {{'guest_contribution_by' | translate}} {{campaign.managers[0].first_name}} {{campaign.managers[0].last_name}}</h4>
              <h4 ng-if="public_settings.site_campaign_enable_organization_name"> {{'guest_contribution_by' | translate}} {{organization_name.value}}</h4>
              <p ng-if="public_settings.site_campaign_enable_organization_name"> {{'ein_label' | translate}}{{organization_name.ein}}</p>
              <p ng-bind-html="campaign.blurb"></p>
            </div>
          </div>
        </div>
        <div class="pledge-campaign-info">
          <div class="ic-contribution-summary">
            <h2 class="section-header ui inverted top attached header">
              <span class="section-label-header">{{'guest_contribution_contribution_summary'|translate}}</span>
              <div class="contribution-selection" ng-if="!forceAnonymousPledge" ng-show="(guestOption == 2 || guestOption == 4) && !contributionTypeRadio && !anonymousContributionTypeOnly">
                <div class="ui dropdown card-type" id="contributionMethod">
                  <div class="text"> {{contribution[0].name | translate}}</div>
                  <i class="dropdown icon" style="margin-left: 10px;"></i>
                  <input type="hidden" name="card-type" />
                  <div class="menu">
                    <div ng-repeat="type in contribution" ng-click="contributionSelected(type)" class="item">{{type.name | translate }}</div>
                  </div>
                </div>
              </div>
            </h2>
            <div class="campaign-bg ui middle attached basic segment">
              <div class="formbg ui two column stackable grid reward-summary">
                <div class="five wide column left-col" ng-if="tippingOptions.toggle && !tippingOptions.toggle_bottom_tip">
                  <h3 class="ui header" translate>guest_contribution_website_tip</h3>
                  <p translate>guest_contribution_website_tip_note</p>
                </div>
                <div class="eleven wide column right-col" ng-if="tippingOptions.toggle && !tippingOptions.toggle_bottom_tip">
                  <div class="ui buttons tipping-options-selection field" ng-class="{'error' : tipTypeError}" ng-if="(tippingOptions.toggle_dynamic && tippingOptions.toggle_tiers) || (tippingOptions.toggle_dynamic && tippingOptions.toggle_no_tip) || (tippingOptions.toggle_tiers && tippingOptions.toggle_no_tip)">
                    <div class="ui button" ng-class="{ 'green': selectedTipType == 'tiers' }" ng-if="tippingOptions.toggle_tiers" ng-click="tipTypeSelection('tiers')" translate>
                      guest_contribution_choose_tip
                    </div>
                    <div class="or" ng-if="tippingOptions.toggle_tiers && tippingOptions.toggle_dynamic"></div>
                    <div class="ui button" ng-class="{ 'green': selectedTipType == 'dynamic' }" ng-if="tippingOptions.toggle_dynamic" ng-click="tipTypeSelection('dynamic')" translate>
                      guest_contribution_enter_tip_amount
                    </div>
                    <div class="or" ng-if="tippingOptions.toggle_no_tip"></div>
                    <div class="ui button" ng-class="{ 'green': selectedTipType == 'no_tip' }" ng-if="tippingOptions.toggle_no_tip" ng-click="tipTypeSelection('no_tip')" translate>
                      guest_contribution_no_tip
                    </div>
                  </div>
                  <div class="ui red pointing prompt label transition visible" ng-if="tipTypeError" translate>guest_contribution_select_tip_option</div>
                  <div ng-if="(tippingOptions.toggle_dynamic && !tippingOptions.toggle_tiers && !tippingOptions.toggle_no_tip) || selectedTipType == 'dynamic'" class="ui dynamic-tipping-form form tipping-option">
                    <div class="field">
                      <div class="ui left labeled input">
                        <div class="ui label" ng-bind-html=" ' ' | formatCurrency:tipInfo.code_iso4217_alpha:public_setting.site_campaign_decimal_option"></div>
                        <input name="dynamic_tip" type="text" ng-model="tip.dollar_amount">
                      </div>
                    </div>
                  </div>
                  <div ng-if="(!tippingOptions.toggle_dynamic && tippingOptions.toggle_tiers && !tippingOptions.toggle_no_tip) || selectedTipType == 'tiers'" class="tipping-option">
                    <div class="tip-field field" ng-if="tippingOptions.tiers[0]">
                      <div class="ui selection dropdown tip-tiers">
                        <input type="hidden" name="tip_tier">
                        <i class="dropdown icon"></i>
                        <div class="default text">
                          <span ng-if="tippingOptions.toggle_tier_names">{{tipTiersDefaultName}} -</span>
                          <span>{{ tipTiersDefaultAmount | formatCurrency:tipInfo.code_iso4217_alpha:public_setting.site_campaign_decimal_option}}</span>
                        </div>
                        <div class="menu">
                          <div class="item" data-value="{{$index}}" ng-repeat="tier in tippingOptions.tiers track by $index" ng-click="tipTierSelection(tier.value, tier.type, tier.dollar_amount, tier.name, $index)">
                            <span ng-if="tippingOptions.toggle_tier_names">{{tier.name}} -</span>
                            <span>{{tier.dollar_amount | formatCurrency:tipInfo.code_iso4217_alpha:public_setting.site_campaign_decimal_option}}</span>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div ng-if="selectedTipType == 'no_tip'" class="tipping-option" translate>
                    guest_contribution_no_tip_selected
                  </div>
                </div>
                <div class="five wide column left-col">
                  <h3 class="ui header" translate> guest_contribution_confirm_rewards </h3>
                  <p translate>
                    guest_contribution_confirm_rewards_note
                  </p>
                </div>
                <div class="eleven wide column right-col">
                  <div ng-click="scrollToRewardParam()" ng-if="campaign.pledges" class="ui green label change-reward" translate> guest_contribution_choose_rewards </div>
                  <div class="ui segment reward-wrap" ng-if="campaign.pledges">
                    <div ng-if="pledgeLevel">
                      <div class="ui two column stackable grid reward-header">
                        <div class="ten wide column reward-title">
                          <h3 class="title">{{campaign.pledges[pledgeindex].name}}</h3>
                        </div>
                        <div class="right aligned six wide column reward-amount">
                          {{'guest_contribution_choose_minimum'|translate}}
                          <div class="amount" ng-if="campaign.pledges[pledgeindex].amount">
                            <span ng-bind-html="campaign.pledges[pledgeindex].amount | formatCurrency:campaign.currencies[0].code_iso4217_alpha:public_setting.site_campaign_decimal_option"></span>
                            <span class="currency" ng-bind-html="campaign.currencies[0].code_iso4217_alpha"></span>
                          </div>
                          <span style="font-size:16px;" ng-show="campaign.pledges[pledgeindex].shipping"> {{'guest_contribution_shipping'| translate}} </span>
                        </div>
                      </div>
                      <div class="reward-description fr-view" html-render html="campaign.pledges[pledgeindex].description"></div>
                      <div class="reward-etd" ng-if="campaign.pledges[pledgeindex].estimated_delivery_time">{{'guest_contribution_estimate_delivery' | translate}} {{campaign.pledges[pledgeindex].estimated_delivery_time | formatDate:"MMM D, YYYY" }}</div>
                    </div>
                    <div ng-if="!pledgeLevel">
                      <div translate> guest_contribution_noreward_message</div>
                    </div>
                  </div>
                  <div class="ui two column stackable grid pledge-amount">
                    <div class="eight wide column your-pledge">
                      <h4 class="title" translate> guest_contribution_your_contribution </h4>
                      <form class="ui form contribution-form">
                        <div class="field">
                          <div ng-show="allowDecimalNotation == 2 || allowDecimalNotation == 3" class="contribution-input with-decimals">
                            <div class="ui currency-symbol label" ng-bind-html=" ' ' | formatCurrency:campaign.currencies[0].code_iso4217_alpha:public_setting.site_campaign_decimal_option"></div>
                            <div class="input-wrap">
                              <input name="contribution_amount" ng-class="{'has-error': pledgeAmount < campaign.pledges[pledgeindex].amount  || pledgeAmount == null ||pledgeAmount < public_settings.site_theme_campaign_min_contribute_amount || (pledgeAmount > max_amoumt && allow_max)}"
                                type="text" min="{{campaign.pledges[pledgeindex].amount || 1}}" ng-model="campaignFundingGoal.value" number-with-decimals>
                            </div>
                            <div ng-if="allowDecimalNotation == 2" class="ui label decimal-value">
                              <span>.00</span>
                            </div>
                          </div>
                        </div>
                        <div class="field">
                          <div ng-show="allowDecimalNotation == 1" class="contribution-input">
                            <div class="ui label currency-symbol" ng-bind-html=" ' ' | formatCurrency:campaign.currencies[0].code_iso4217_alpha:public_setting.site_campaign_decimal_option"></div>
                            <div class="input-wrap">
                              <input name="contribution_amount_decimal" ng-class="{'has-error': pledgeAmount < campaign.pledges[pledgeindex].amount  || pledgeAmount == null ||pledgeAmount < public_settings.site_theme_campaign_min_contribute_amount || (pledgeAmount > max_amoumt && allow_max)}"
                                type="text" min="{{campaign.pledges[pledgeindex].amount || 1}}" ng-model="campaignFundingGoal.value" number-with-decimals ng-attr-allow-decimal="true">
                            </div>
                          </div>
                        </div>
                      </form>
                    </div>
                    <div class="eight wide column extra-pledge" ng-if="pledgeLevel">
                      <h4 class="title" translate>guest_contribution_selected_reward </h4>
                      <div class="amount" ng-if="pledgeAmount-campaign.pledges[pledgeindex].amount > 0" ng-bind-html="pledgeAmount-campaign.pledges[pledgeindex].amount  | formatCurrency:campaign.currencies[0].code_iso4217_alpha:public_setting.site_campaign_decimal_option"></div>
                      <div class="amount" ng-if="pledgeAmount-campaign.pledges[pledgeindex].amount <= 0" ng-bind-html="0 | formatCurrency:campaign.currencies[0].code_iso4217_alpha:public_setting.site_campaign_decimal_option"></div>
                    </div>
                  </div>

                  <!-- CUSTOMER ENTER COUPON FORM -->
                  <div class="ui two column stackable grid pledge-amount" ng-if = "pledgeLevel && public_settings.site_campaign_coupon_management.toggle">
                    <div class="ten wide column your-pledge">
                      <h4 class="title" translate>pledge_campaign_enter_coupon</h4>
                      <form ng-submit = "applyCode(couponCode)" class="ui large form contribution-form">
                        <div class = "two fields">
                          <div class="contribution-input">
                            <div class="ui green button" ng-click="applyCoupon(couponCode)" translate>
                              pledge_campaign_apply
                            </div>
                            <div class="input-wrap">
                              <input name="coupon_code_input" type="text"
                                min="{{selectedReward.amount || public_settings.site_theme_campaign_min_contribute_amount}}" ng-model="couponCode" ng-attr-allow-decimal="true">
                            </div>
                          </div>
                        </div>
                      </form>
                      <h5 ng-show="couponAppliedMessage" class="title"><em>{{couponAppliedMessage}}</em></h5>
                    </div>
                  </div>
                  <!--END CUSTOMER COUPON ENTER FORM-->

                  <div class="ui form" id="reward-variation-form" ng-if="enableRewardVariation">
                    <div id="reward-variation" class="reward-variation ui two column stackable grid ">
                      <div class="reward-variation-item eight wide column" ng-repeat="variation in selectedReward.attributes.variation">
                        <div class="field">
                          <label translate>{{variation.name}}</label>
                          <div class="ui fluid selection dropdown" ng-model="$parent.selectedRewardAttrs[$index]">
                            <input type="hidden" name="variation_value">
                            <i class="dropdown icon"></i>
                            <div class="default text">{{variation.name}}</div>
                            <div class="menu">
                              <div class="item" data-value="{{$index}}" ng-repeat="choiceItem in variation.choice track by $index">{{choiceItem.value}}</div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="anonymous-contribution-checkbox ui checkbox" ng-model="$parent.selecteContributionAnon" ng-show="(anonymousContributionTypeOnly && contributionTypeRadio) || (anonymousContributionTypeOnly && !contributionTypeRadio)">
                    <input type="checkbox">
                    <label translate> pledge_campaign_anon_contribution_only_label </label>
                  </div>
                </div>

                <div class="five wide column left-col" ng-show="(guestOption == 2 || guestOption ==4) && contributionTypeRadio  && !anonymousContributionTypeOnly">
                  <h3 class="ui header" translate>guest_contribution_type</h3>
                  <p translate>
                    guest_contribution_type_note
                  </p>
                </div>
                <div class="eleven wide column right-col" ng-show="(guestOption == 2 || guestOption ==4) && contributionTypeRadio  && !anonymousContributionTypeOnly">
                  <div class="ui two column stackable grid pledge-amount">
                    <div class="eight wide column your-pledge">
                      <div class="grouped inline fields">
                        <div class="field" ng-repeat="type in contribution">
                          <div class="ui radio checkbox" ng-if="$first" ng-click="contributionSelected(type)">
                            <input type="radio" name="contribution_types" checked="checked">
                            <label>{{type.name | translate }}</label>
                          </div>
                          <div class="ui radio checkbox" ng-if="!$first" ng-click="contributionSelected(type)">
                            <input type="radio" name="contribution_types">
                            <label>{{type.name | translate }}</label>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <!--Charity Section-->
                <div class="five wide column left-col" ng-if="public_settings.site_campaign_charity_helper_enable && campaign.charity_id">
                  <h3 class="ui header" translate>pledge_campaign_charity</h3>
                  <p translate>
                    pledge_campaign_charity_note
                  </p>
                </div>
                <div class="eleven wide column right-col" ng-if="public_settings.site_campaign_charity_helper_enable && campaign.charity_id">
                  <div class="ui two column stackable grid pledge-amount">
                    <div class="eight wide column your-pledge">
                      <div class="grouped inline fields">
                        <div class="ui checkbox" ng-model="charity.is_a_gift">
                          <input type="checkbox" name="is_a_gift_aid">
                          <label translate>charity_helper_is_a_gift</label>
                        </div>
                        <div class="ui checkbox" ng-show="charity.is_a_gift && !public_settings.site_campaign_charity_helper_alternate_form" ng-model="charity.is_a_tax_payer">
                          <input type="checkbox" name="is_a_tax_payer">
                          <label translate>charity_helper_is_a_uk_taxpayer</label>
                        </div>
                        <div class="ui checkbox charity-checkbox" ng-show="charity.is_a_gift && public_settings.site_campaign_charity_helper_alternate_form" ng-model="charity.is_a_tax_payer">
                          <input type="checkbox" name="is_a_tax_payer">
                          <label translate>charity_helper_is_a_uk_taxpayer_alternate</label>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="ui form charity-form" ng-show="charity.is_a_tax_payer && charity.is_a_gift && !public_settings.site_campaign_charity_helper_alternate_form">
                    <div class="fields">
                      <div class="row">
                        <div class="field">
                          <label translate>charity_helper_fullname_header</label>
                          <input name="charity_full_name" type="text" placeholder="{{'charity_helper_fullname_placeholder' | translate}}" ng-model="charity.fullname">
                        </div>
                      </div>
                      <div class="row">
                        <div class="eleven wide field">
                          <label translate>charity_helper_address_header</label>
                          <input name="charity_full_address" type="text" placeholder="{{'charity_helper_address_placeholder'| translate}} " ng-model="charity.address">
                        </div>
                      </div>
                      <div class="row">
                        <div class=" six wide field">
                          <label translate>charity_helper_postcode_header</label>
                          <input name="charity_postcode" type="text" placeholder="{{'charity_helper_postcode_placeholder' | translate}}" ng-model="charity.postcode">
                        </div>
                      </div>
                      <div class="ui checkbox" ng-model="charity.charity_final_confirmation">
                        <input type="checkbox" name="charity_final_confirmation">
                        <label>{{'charity_helper_final_confirmation_placeholder_1' | translate}}{{charity_percentage_fee}}{{'charity_helper_final_confirmation_placeholder_2'
                          | translate}}</label>
                      </div>
                    </div>
                  </div>
                  <div class="ui form charity-form" ng-show="charity.is_a_tax_payer && charity.is_a_gift && public_settings.site_campaign_charity_helper_alternate_form">
                    <div class="fields">
                      <div class="row">
                        <div class="field">
                          <label translate>charity_helper_fullname_header</label>
                          <input name="charity_full_name" type="text" placeholder="{{'charity_helper_fullname_placeholder' | translate}}" ng-model="charity.fullname">
                        </div>
                      </div>
                      <div class="ui checkbox" ng-model="charity.overseas">
                        <input type="checkbox" name="is_a_tax_payer">
                        <label translate>charity_helper_house_overseas</label>
                      </div>
                      <div class="row">
                        <div class="eleven wide field">
                          <label translate>charity_helper_house_number_header</label>
                          <input name="House Number" type="text" placeholder="{{'charity_helper_house_number_placeholder'| translate}} " ng-model="charity.house_number">
                        </div>
                      </div>
                      <div class="row">
                        <div class="eleven wide field">
                          <label translate>charity_helper_street_header</label>
                          <input name="Street" type="text" placeholder="{{'charity_helper_street_placeholder'| translate}} " ng-model="charity.street">
                        </div>
                      </div>
                      <div class="row">
                        <div class="eleven wide field">
                          <label translate>charity_helper_town_header</label>
                          <input name="Town or City" type="text" placeholder="{{'charity_helper_town_placeholder'| translate}} " ng-model="charity.city">
                        </div>
                      </div>
                      <div class="row">
                        <div class=" six wide field">
                          <label translate>{{'charity_helper_postcode_header'| translate}}
                            <span class="optional-text" translate="campaign_creation_optional_text">(Optional)</span>
                          </label>
                          <input name="charity_postcode" type="text" placeholder="{{'charity_helper_postcode_placeholder' | translate}}" ng-model="charity.postcode">
                        </div>
                      </div>
                      <div class="row">
                        <div class="eleven wide field">
                          <label translate> Country</label>
                          <select class="charity-country" ng-model="charity.country" ui-select2>
                            <option value="{{country.country_id}}" class="item" ng-repeat="country in countries">{{country.name}}</option>
                          </select>
                        </div>
                      </div>
                      <div class="ui checkbox" ng-model="charity.charity_final_confirmation">
                        <input type="checkbox" name="charity_final_confirmation">
                        <label>{{'charity_helper_final_confirmation_placeholder_alternate' | translate}}</label>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="five wide column left-col" ng-show="isEnableContributionMessage">
                  <h3 class="ui header" translate>pledge_camapaign_contribution_message_notes</h3>
                </div>
                <div class="eleven wide column right-col" ng-show="isEnableContributionMessage">
                  <div class="ui form">
                    <div class="field">
                      <textarea rows="5" ng-model="$parent.contributionMessage"></textarea>
                    </div>
                  </div>
                </div>
                <div class="five wide column left-col" ng-if="tippingOptions.toggle && tippingOptions.toggle_bottom_tip">
                  <h3 class="ui header" translate>guest_contribution_website_tip</h3>
                  <p translate>guest_contribution_website_tip_note</p>
                </div>
                <div class="eleven wide column right-col" ng-if="tippingOptions.toggle && tippingOptions.toggle_bottom_tip">
                  <div class="tipping-options-wrap" ng-if="tippingOptions.toggle">
                    <div class="ui buttons tipping-options-selection field" ng-class="{'error' : tipTypeError}" ng-if="(tippingOptions.toggle_dynamic && tippingOptions.toggle_tiers) || (tippingOptions.toggle_dynamic && tippingOptions.toggle_no_tip) || (tippingOptions.toggle_tiers && tippingOptions.toggle_no_tip)">
                      <div class="ui button" ng-class="{ 'green': selectedTipType == 'tiers' }" ng-if="tippingOptions.toggle_tiers" ng-click="tipTypeSelection('tiers')" translate>
                        guest_contribution_choose_tip
                      </div>
                      <div class="or" ng-if="tippingOptions.toggle_tiers && tippingOptions.toggle_dynamic"></div>
                      <div class="ui button" ng-class="{ 'green': selectedTipType == 'dynamic' }" ng-if="tippingOptions.toggle_dynamic" ng-click="tipTypeSelection('dynamic')" translate>
                        guest_contribution_enter_tip_amount
                      </div>
                      <div class="or" ng-if="tippingOptions.toggle_no_tip"></div>
                      <div class="ui button" ng-class="{ 'green': selectedTipType == 'no_tip' }" ng-if="tippingOptions.toggle_no_tip" ng-click="tipTypeSelection('no_tip')" translate>
                        guest_contribution_no_tip
                      </div>
                    </div>
                    <div class="ui red pointing prompt label transition visible" ng-if="tipTypeError" translate>guest_contribution_select_tip_option</div>
                    <div ng-if="(tippingOptions.toggle_dynamic && !tippingOptions.toggle_tiers && !tippingOptions.toggle_no_tip) || selectedTipType == 'dynamic'" class="ui dynamic-tipping-form form tipping-option">
                      <div class="field">
                        <div class="ui left labeled input">
                          <div class="ui label" ng-bind-html=" ' ' | formatCurrency:tipInfo.code_iso4217_alpha:public_setting.site_campaign_decimal_option"></div>
                          <input name="dynamic_tip" type="text" ng-model="tip.dollar_amount">
                        </div>
                      </div>
                    </div>
                    <div ng-if="(!tippingOptions.toggle_dynamic && tippingOptions.toggle_tiers && !tippingOptions.toggle_no_tip) || selectedTipType == 'tiers'" class="tipping-option">
                      <div class="tip-field field" ng-if="tippingOptions.tiers[0]">
                        <div class="ui selection dropdown tip-tiers">
                          <input type="hidden" name="tip_tier">
                          <i class="dropdown icon"></i>
                          <div class="default text">
                            <span ng-if="tippingOptions.toggle_tier_names">{{tipTiersDefaultName}} -</span>
                            <span>{{ tipTiersDefaultAmount | formatCurrency:tipInfo.code_iso4217_alpha:public_setting.site_campaign_decimal_option}}</span>
                          </div>
                          <div class="menu">
                            <div class="item" data-value="{{$index}}" ng-repeat="tier in tippingOptions.tiers track by $index" ng-click="tipTierSelection(tier.value, tier.type, tier.dollar_amount, tier.name, $index)">
                              <span ng-if="tippingOptions.toggle_tier_names">{{tier.name}} -</span>
                              <span>{{tier.dollar_amount | formatCurrency:tipInfo.code_iso4217_alpha:public_setting.site_campaign_decimal_option}}</span>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div ng-if="selectedTipType == 'no_tip'" class="tipping-option" translate>
                      guest_contribution_no_tip_selected
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="ic-contribution-summary">
            <h2 class="section-header ui inverted top attached header">
              <span class="section-label-header">{{'guest_contribution_account_info'|translate}}</span>
              <div class="contribution-selection" ng-if="acceptExtraPledgeData" ng-show="(guestOption == 2 || guestOption == 4)">
                <div class="ui dropdown card-type" id="contributionMethod">
                  <div class="text"> {{ accountInformationCapture[0].translation | translate }} </div>
                  <i class="dropdown icon" style="margin-left: 10px;"></i>
                  <input type="hidden" name="card-type" />
                  <div class="menu">
                    <div ng-repeat="type in accountInformationCapture" ng-click="accountTypeSelected(type)" class="item">{{type.translation | translate }}</div>
                  </div>
                </div>
              </div>
            </h2>
          </div>
          <div class="shipping-info campaign-bg ui middle attached basic segment">
            <div class="formbg ui two column stackable grid">
              <div class="ui corner red label" data-content="Required Field" sui-popup="">
                <i class="white asterisk icon"></i>
              </div>
              <div class="five wide column left-col">
                <h3 class="ui header" translate> guest_contribution_personal_info </h3>
                <p translate ng-show="!campaign.pledges[pledgeindex] && guest_contrib_option == 3">
                  guest_contribution_personal_info_note
                </p>
                <p translate ng-show="campaign.pledges[pledgeindex] || (guest_contrib_option != 3 && !campaign.pledges[pledgeindex])">
                  guest_contribution_personal_info_reward_note
                </p>
              </div>
              <div class="eleven wide column right-col">
                <div class="personal-info-fields">
                  <form class="ui form select-login-option">
                    <div class="grouped inline fields" ng-show="!onlyOneOptionHide">
                      <div class="field" ng-show="(guest_contrib_option == 3 || guest_contrib_option == 1 || guest_contrib_option == 6 || guest_contrib_option == 8)">
                        <div class="ui radio checkbox" ng-model="$parent.guestOption" id="optionlogin" ng-click="clearForm()">
                          <input type="radio" name="guest-options" value="1">
                          <label> {{'guest_contribution_login'|translate }} </label>
                        </div>
                      </div>
                      <div class="field" ng-show="guest_contrib_option == 3 || guest_contrib_option == 1 || guest_contrib_option == 6 || guest_contrib_option == 8">
                        <div class="ui radio checkbox" ng-model="$parent.guestOption" id="optionaccount" ng-click="clearForm()">
                          <input type="radio" name="guest-options" value="2">
                          <label> {{'guest_contribution_create_new_account'| translate}}</label>
                        </div>
                      </div>
                      <div class="field" ng-show="guest_contrib_option==2 || guest_contrib_option==3 || guest_contrib_option == 5 || guest_contrib_option == 6 || guest_contrib_option == 7 || guest_contrib_option == 8">
                        <div class="ui radio checkbox" ng-model="$parent.guestOption" id="optionexpress" ng-click="clearForm()">
                          <input type="radio" name="guest-options" value="4">
                          <label> {{'guest_contribution_express_checkout'|translate }} </label>
                        </div>
                      </div>
                    </div>
                  </form>
                  <div ng-show="guestOption == 1">
                    <div id="okta-widget-inline" ng-show="socialLogin() === true && !socialLoginFail" style="margin: auto; padding-bottom: 3rem; min-width: 400px">
                      <div id="widget-container"></div>
                    </div>
                      <script>
                        var oktaInstanceCreated = false;
                        let interval = setInterval(function() {
                          const scope = angular.element($('#widget-container')).scope();
                          if (scope === undefined || scope.public_settings === undefined || oktaInstanceCreated) return;
                          oktaInstanceCreated = true;
                          clearInterval(interval);
                          const oktaBaseConfig = {idps: [],
                            idpDisplay: "SECONDARY",
                            helpLinks: {
                              forgotPassword: 'javascript:angular.element($("#widget-container")).scope().forgotPassword()'
                            },
                            authParams: {
                            },
                          }
                          if (scope.oktaConfig === undefined || scope.oktaConfig === null){
                            return;
                          }
                          var config = {...scope.oktaConfig, ...oktaBaseConfig};
                          const settings = scope.public_settings.social_login;
                          config.baseUrl = settings.okta_domain
                          config.clientId = settings.okta_clientId
                          if (settings.providers){
                            for(const [provider, {toggle, idpId}] of Object.entries(settings.providers)){
                              if (toggle === true){
                                config.idps.push({type: provider.toUpperCase(), id: idpId})
                              }
                            }
                          }
                          try {
                            let signIn = angular.element($('#widget-container')).scope().oktaSignIn(config);
                            signIn.renderEl({ el: '#widget-container' }).then(async function(res){
                              if (res.status === 'SUCCESS') {
                                const accessToken = res.tokens.accessToken.value;
                                const idToken = res.tokens.idToken.value;
                                const oktaId = res.tokens.idToken.claims.sub;
                                const email = res.tokens.idToken.claims.email;
                                const validateResult = await angular.element($('#widget-container')).scope().oktaSocialValidate(idToken);

                              } else {
                              }
                            });
                            signIn.on('ready', function (context) {
                              $("#okta-signin-submit").attr("type", "button");
                              $("#okta-signin-submit").click(oktaFormSubmit);
                              $('#okta-signin-username').keyup(function(event) {
                                if (event.which === 13) {
                                  event.preventDefault();
                                  oktaFormSubmit();
                                }
                              });
                              $('#okta-signin-password').keyup(function(event) {
                                if (event.which === 13) {
                                  event.preventDefault();
                                  oktaFormSubmit();
                                }
                              });
                            });
                          } catch (error){
                            // load default if okta init fails
                            angular.element($('#inline-contribution')).scope().socialLoginFail = true;
                            angular.element($('#inline-contribution')).scope().$apply();
                          }
                          async function oktaFormSubmit(){
                            const scope = angular.element($('#widget-container')).scope();
                            try {
                              const res = await scope.loginUser();
                              if (res !== undefined && res.authenticated === 0) {
                                console.log("Internal user not found. Attempting Okta endpoint")
                                const okta_result = await angular.element($('#widget-container')).scope().oktaValidate();
                                if (okta_result.authenticated !== undefined && okta_result.authenticated !== 1) {
                                  throw { error: "Authentication through Okta backend endpoint failed", okta_result };
                                }
                              }
                            } catch (e) {
                              const errorMsg = await scope.translate("login_page_invalid_credentials");
                              $(".o-form-error-container").replaceWith(`<div><div class="okta-form-infobox-error infobox infobox-error" role="alert"><span class="icon error-16"></span><p>${errorMsg}</p></div></div>`)
                            }
                          }

                        }, 100);
                    </script>
                    
                  </div>
                  <form class="ui form general-login-info-form" ng-show="(guestOption == 1 && socialLogin() === false) || (guestOption == 1 && socialLoginFail === true)">
                    <div class="two fields">
                      <div class="field">
                        <label translate> guest_contribution_email </label>
                        <input name="email" type="text" placeholder="{{'guest_contribution_email_message'| translate}}" ng-model="accountInfo.email">
                      </div>
                      <div class="field">
                        <label translate> guest_contribution_password </label>
                        <input name="password" type="password" placeholder="{{'guest_contribution_password' | translate}}" ng-model="accountInfo.password">
                      </div>
                    </div>
                    <!-- <div class="ui black button" ng-click="goBackToCampaign()" translate> guest_contribution_go_back</div>
                    <div class="ui green button" ng-click="loginUser()" id="loginbtn" translate> guest_contribution_login</div>
                    <div class="ui grey button" ng-click="forgotPassword()" id="loginbtn" translate>guest_contribution_forgot_password</div> -->
                  </form>
                  <div ng-show="guestOption == 1">
                    <div class="ui black button" ng-click="goBackToCampaign()" translate> guest_contribution_go_back</div>
                    <div class="ui green button" ng-click="loginUser()" id="loginbtn" translate> guest_contribution_login</div>
                    <div class="ui grey button" ng-click="forgotPassword()" ng-show="socialLogin() === false || socialLoginFail === true" id="loginbtn" translate>guest_contribution_forgot_password</div>
                  </div>
                  <form class="ui form create-new-account-info-form" ng-if="guestOption == 2">
                    <div class="two fields">
                      <div class="field">
                        <label translate> guest_contribution_fname </label>
                        <input name="first_name" type="text" placeholder="{{'guest_contribution_fname_placeholder' | translate}}" ng-model="accountInfo.first_name">
                      </div>
                      <div class="field">
                        <label translate> guest_contribution_lname </label>
                        <input name="last_name" type="text" placeholder="{{'guest_contribution_lname_placeholder'| translate}} " ng-model="accountInfo.last_name">
                      </div>
                    </div>
                    <div class="two fields">
                      <div class="field">
                        <label translate> guest_contribution_email </label>
                        <input name="email" type="text" placeholder="{{'guest_contribution_email_message' | translate}}" ng-model="accountInfo.email" id="newemail">
                      </div>
                      <div class="field" ng-show="payment_gateway == 2">
                        <label translate>guest_campaign_Phone_Number</label>
                        <input name="phone_number" numbers-Only type="text" placeholder="{{'guest_campaign_Phone_Number_placeholder'|translate}}" ng-model="person.number">
                      </div>
                    </div>
                    <div class="two fields">
                      <div class="field">
                        <label translate> guest_contribution_password </label>
                        <input name="password" type="password" placeholder="{{'guest_contribution_password_placeholder' | translate}} " ng-model="accountInfo.password" id="newpass">
                      </div>
                      <div class="field">
                        <label translate> guest_contribution_confirm_password </label>
                        <input name="confirm_password" type="password" placeholder="{{'guest_contribution_confirm_password' | translate}}" ng-model="accountInfo.password_confirm">
                      </div>
                    </div>
                    <div class="two fields" ng-show="payment_gateway == 2">
                      <div class="field">
                        <label translate>guest_contribution_employer</label>
                        <input name="employer" type="text" placeholder="{{'guest_contribution_employer_placeholder'|translate}}" ng-model="person.employer">
                      </div>
                      <div class="field">
                        <label translate>guest_contribution_occupation</label>
                        <input name="occupation" type="text" placeholder="{{'guest_contribution_occupation_placeholder'|translate}}" ng-model="person.occupation">
                      </div>
                    </div>
                  </form>

                  <div ng-if="acceptExtraPledgeData" ng-show="guestOption == 2 && selectAccountCaptureType == 2">
                    <div class="ui divider"></div>
                    <form class="ui form create-new-business-info-form">
                      <div class="two fields">
                        <div class="field">
                          <label translate> guest_contribution_organization_name </label>
                          <input name="organization_name" type="text" placeholder="{{'guest_contribution_organization_name' | translate}}" ng-model="accountInfo.organization_name">
                        </div>
                        <div class="field">
                          <label translate> guest_contribution_organization_email </label>
                          <input name="organization_email" type="text" placeholder="{{'guest_contribution_organization_email' | translate}}" ng-model="accountInfo.organization_email">
                        </div>
                      </div>
                    </form>
                  </div>

                  <form class="ui form guest-info-form" ng-show="guestOption == 3">
                    <div class="two fields" ng-show="payment_gateway == 1">
                      <div class="field">
                        <label translate> guest_contribution_email </label>
                        <input name="email" type="text" placeholder=" {{'guest_contribution_email_message'| translate}}" ng-model="creditCard.email">
                      </div>
                      <div class="field"></div>
                    </div>
                    <div class="two fields" ng-show="payment_gateway == 2">
                      <div class="field">
                        <label translate> guest_contribution_fname </label>
                        <input ng-class="{'has-error': !accountInfo.first_name
                          && guestOption == 3 && payment_gateway == 2}" type="text" placeholder="{{'guest_contribution_fname_placeholder' | translate}}" ng-model="accountInfo.first_name">
                      </div>
                      <div class="field">
                        <label translate> guest_contribution_lname </label>
                        <input ng-class="{'has-error': !accountInfo.last_name && guestOption == 3 && payment_gateway == 2}" type="text" placeholder="{{'guest_contribution_lname_placeholder'| translate}} " ng-model="accountInfo.last_name">
                      </div>
                    </div>
                    <div class="two fields" ng-if="payment_gateway == 2">
                      <div class="field">
                        <label translate> guest_contribution_email </label>
                        <input ng-class="{'has-error': !accountInfo.email && guestOption == 3 && payment_gateway == 2}" type="text" placeholder="{{'guest_contribution_email_message' | translate}}" ng-model="accountInfo.email" id="newemail">
                      </div>
                      <div class="field">
                        <label translate>guest_campaign_Phone_Number</label>
                        <input numbers-Only ng-class="{'has-error': !person.number  && guestOption == 3 && payment_gateway == 2}" type="text" placeholder="{{'guest_campaign_Phone_Number_placeholder'|translate}}" ng-model="person.number">
                      </div>
                    </div>
                    <div class="two fields" ng-show="payment_gateway == 2">
                      <div class="field">
                        <label translate>guest_contribution_employer</label>
                        <input ng-class="{'has-error': !person.employer && guestOption == 3 && payment_gateway == 2 }" type="text" placeholder="{{'guest_contribution_employer_placeholder'|translate}}" ng-model="person.employer">
                      </div>
                      <div class="field">
                        <label translate>guest_contribution_occupation</label>
                        <input ng-class="{'has-error': !person.occupation && guestOption == 3 && payment_gateway == 2}" type="text" placeholder="{{'guest_contribution_occupation_placeholder'|translate}}" ng-model="person.occupation">
                      </div>
                    </div>
                  </form>
                  <!-- Form Express Checkout Start -->
                  <form class="ui form express-form" ng-show="guestOption == 4">
                    <div class="two fields" ng-show="payment_gateway == 1 || payment_gateway == 3">
                      <div class="field">
                        <label translate> guest_contribution_fname </label>
                        <input name="first_name" type="text" placeholder=" {{'guest_contribution_fname_placeholder'| translate}}" ng-model="express.fname">
                      </div>
                      <div class="field">
                        <label translate> guest_contribution_lname </label>
                        <input name="last_name" type="text" placeholder=" {{'guest_contribution_lname_placeholder'| translate}}" ng-model="express.lname">
                      </div>
                    </div>
                    <div class="two fields" ng-show="payment_gateway == 1 || payment_gateway == 3">
                      <div class="field">
                        <label translate> guest_contribution_email </label>
                        <input name="email" type="text" placeholder=" {{'guest_contribution_email_message'| translate}}" ng-model="express.email">
                      </div>
                      <div class="field"></div>
                    </div>
                  </form>
                  <div ng-if="acceptExtraPledgeData" ng-show="guestOption == 4 && selectAccountCaptureType == 2">
                    <div class="ui divider"></div>
                    <form class="ui form create-new-business-info-form">
                      <div class="two fields">
                        <div class="field">
                          <label translate> guest_contribution_organization_name </label>
                          <input name="organization_name" type="text" placeholder="{{'guest_contribution_organization_name' | translate}}" ng-model="accountInfo.organization_name">
                        </div>
                        <div class="field">
                          <label translate> guest_contribution_organization_email </label>
                          <input name="organization_email" type="text" placeholder="{{'guest_contribution_organization_email' | translate}}" ng-model="accountInfo.organization_email">
                        </div>
                      </div>
                    </form>
                  </div>
                  <!-- Form Express Checkout End -->
                </div>
              </div>
            </div>
          </div>
          <h2 class="section-header ui inverted top attached header" ng-hide="guestOption == 1" translate> guest_contribution_payment_info </h2>
          <div class="campaign-bg ui middle attached basic segment" ng-hide="guestOption == 1 ">
            <div class="formbg ui two column stackable grid" ng-if="payment_gateway == 1">
              <div class="ui corner red label" data-content="Required Field" sui-popup="">
                <i class="white asterisk icon"></i>
              </div>
              <div class="five wide column left-col">
                <h3 class="ui header" translate> guest_contribution_payment_info_creditcard </h3>
                <p translate>
                  guest_contribution_payment_info_creditcard_note
                </p>
              </div>
              <div ng-if="!site_stripe_tokenization_settings.toggle" class="eleven wide column right-col">
                <form class="ui credit-card-form form" ng-init="initStripePayment()">
                  <div class="two fields">
                    <div class="field">
                      <label translate> guest_contribution_payment_card_number </label>
                      <input name="card_number" type="text" placeholder="{{'guest_contribution_payment_card_number'|translate}}" ng-model="creditCard.number" ng-change="checkCardType()" class="creditCardNumber">
                    </div>
                    <div class="field"></div>
                  </div>
                  <div class="two fields">
                    <div class="expdate-field-wrap field">
                      <div class="two fields">
                        <div class="exp-date-field field">
                          <label translate>guest_contribution_payment_expiration_month</label>
                          <div class="input-wrap">
                            <input name="card_exp_month" type="text" class="exp-date" placeholder="{{'guest_contribution_payment_expiration_date_month' | translate}}" ng-model="creditCard.exp_month" numbers-only maxlength="2">
                          </div>
                        </div>
                        <div class="exp-date-field field">
                          <label translate>guest_contribution_payment_expiration_year</label>
                          <input name="card_exp_year" type="text" class="exp-date" placeholder="{{'guest_contribution_payment_expiration_date_year' | translate}}" ng-model="creditCard.exp_year" numbers-only maxlength="2">
                        </div>
                      </div>
                    </div>
                    <div class="cvc-field-wrap four wide field">
                      <label id="cvc"> {{'guest_contribution_payment_cvc'| translate}}
                        <i class="info circle icon" data-content="{{'pledge_campaign_creditcard_cvc_note'| translate }}" sui-popup></i>
                      </label>
                      <input name="cvc" placeholder="{{'guest_contribution_payment_cvc_placeholder'| translate}}" type="text" class="cvc-code cardCVC" ng-model="creditCard.cvc" numbers-only>
                    </div>
                  </div>
                </form>
              </div>
              <div ng-if="site_stripe_tokenization_settings.toggle" class="eleven wide column right-col">
                <form class="ui stripe-credit-card-form form stripe-elements-form" ng-init="initStripeElement()">
                  <div class="two fields" ng-show="guestOption == 3">
                    <div class="field">
                      <input type="text" name="namecard" placeholder="{{'pledge_campaign_name_on_card'| translate}}" ng-model="stripeExtraDetails.name">
                    </div>
                    <div class="field"></div>
                  </div>
                  <div class="two fields">
                    <div class="field">
                      <label translate> guest_contribution_payment_card_number </label>
                      <div id="card-number-element-wrap">
                        <i class="pf pf-credit-card" id="brand-icon"></i>
                      </div>
                      <div id="card-number-element"></div>
                    </div>
                    <div class="field"></div>
                  </div>

                  <div class="two fields">
                    <div class="three wide field">
                      <label translate> guest_contribution_payment_card_expiry_date </label>
                      <div id="card-expiry-element"></div>
                    </div>
                    <div class="four wide field">
                      <label id="cvc"> {{'guest_contribution_payment_cvc'| translate}}
                        <i class="info circle icon" data-content="{{'pledge_campaign_creditcard_cvc_note'| translate }}" sui-popup></i>
                      </label>
                      <div id="card-cvc-element"></div>
                    </div>
                  </div>

                  <div id="card-errors" role="alert"></div>
                  <!-- <button>Submit Payment</button> -->
                </form>
              </div>
            </div>
            <div class="formbg ui two column stackable grid" ng-if="payment_gateway == 2">
              <div class="ui corner red label" data-content="Required Field" sui-popup="">
                <i class="white asterisk icon"></i>
              </div>
              <div class="five wide column left-col">
                <h3 class="ui header" translate>guest_contribution_payment_info_creditcard </h3>
              </div>
              <div class="eleven wide column right-col">
                <div class="ui credit-card form">
                  <div class="two fields">
                    <div class="field">
                      <label translate>guest_contribution_payment_card__name</label>
                      <input ng-class="{'has-error': !creditCard.name  && payment_gateway ==2 }" type="text" placeholder="{{'guest_contribution_payment_card__name'|translate}}" ng-model="creditCard.name">
                    </div>
                    <div class="field"></div>
                  </div>
                  <div class="two fields">
                    <div class="field">
                      <label translate> guest_contribution_payment_card_number </label>
                      <input class="creditCardNumber" ng-class="{'has-error': !creditCard.number  && payment_gateway ==2 }" type="text" placeholder="{{'guest_contribution_payment_card_number'| translate}}" ng-model="creditCard.number">
                    </div>
                  </div>
                  <div class="fields">
                    <div class="expdate-field-wrap field">
                      <label> {{'guest_contribution_payment_expiration_date' | translate}}
                        <i class="info circle icon" data-content=" The two digit month and year of your credit card expiration date"></i>
                      </label>
                      <div class="two fields">
                        <div class="exp-date-field field">
                          <input ng-class="{'has-error': !creditCard.exp_month  && payment_gateway ==2}" type="text" class="exp-date" placeholder="{{'guest_contribution_payment_expiration_date_month'|translate}}" ng-model="creditCard.exp_month" numbers-only maxlength="2">
                        </div>
                        <div class="exp-date-field field">
                          <input ng-class="{'has-error': !creditCard.exp_year  && payment_gateway ==2}" type="text" class="exp-date" placeholder="{{'guest_contribution_payment_expiration_date_year'|translate}}" ng-model="creditCard.exp_year" numbers-only maxlength="2">
                        </div>
                      </div>
                    </div>
                    <div class="field">
                      <label id="cvc"> {{'guest_contribution_payment_cvc'|translate}}
                        <i class="info circle icon" data-content="{{'pledge_campaign_creditcard_cvc_note'| translate }}"></i>
                      </label>
                      <input ng-class="{'has-error': !creditCard.cvc  && payment_gateway ==2 }" placeholder="{{'guest_contribution_payment_cvc'|translate}}" type="text" class="cvv-code" ng-model="creditCard.cvc" numbers-only maxlength="5">
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <h2 class="section-header ui inverted top attached header" translate ng-if="(campaign.pledges[pledgeindex].shipping.length && guestOption != 1) && !(acceptExtraPledgeData && (guestOption == 2 || guestOption == 4))">
            guest_contribution_shipping_info
          </h2>
          <h2 class="section-header ui inverted top attached header" translate ng-if="(campaign.pledges[pledgeindex].shipping.length && guestOption != 1) && (acceptExtraPledgeData && (guestOption == 2 || guestOption == 4))">
            guest_contribution_shipping_info
          </h2>
          <h2 class="section-header ui inverted top attached header" translate ng-if="!(campaign.pledges[pledgeindex].shipping.length && guestOption != 1) && (acceptExtraPledgeData && (guestOption == 2 || guestOption == 4))">
            guest_contribution_address_info
          </h2>
          <div class="shipping-info campaign-bg ui middle attached basic segment" ng-if="(campaign.pledges[pledgeindex].shipping.length && guestOption != 1) || (acceptExtraPledgeData && (guestOption == 2 || guestOption == 4))">
            <div class="formbg ui two column stackable grid">
              <div class="ui corner red label" data-content="Required Field" sui-popup="">
                <i class="white asterisk icon"></i>
              </div>
              <div class="five wide column left-col">
                <h3 class="ui header" translate> guest_contribution_shipping_address </h3>
                <p translate>guest_contribution_shipping_address_message</p>
              </div>
              <div class="eleven wide column right-col">
                <div ng-if="!alt_shipping && !site_campaign_alt_city_input_toggle">
                  <form class="ui form new-shipping-address-form">
                    <div class="field">
                      <label translate> guest_contribution_shipping_address </label>
                      <input type="text" placeholder="{{'guest_contribution_shipping_street_address' | translate}} " ng-model="address.street1" name="street_address">
                    </div>
                    <div class="two fields">
                      <div class="field" id="select-city">
                        <label translate> guest_contribution_shipping_city </label>
                        <div ui-select style="width:100%;" ng-model="selectedCity.selected" theme="select2" reset-search-input="false">
                          <div ui-select-match placeholder="{{'guest_contribution_shipping_city_placeholder' | translate}} ">
                            {{$select.selected.name}}
                          </div>
                          <div ui-select-choices repeat="city in cities | filter: $select.search" refresh="searchCities($select.search)" refresh-delay="200">
                            <div ng-bind-html="city.name"></div>
                          </div>
                        </div>
                      </div>
                      <div class="field">
                        <label translate> guest_contribution_shipping_postal_code </label>
                        <input name="mail_code" ng-model="address.mail_code" placeholder="{{'guest_contribution_shipping_postal_code' | translate}}">
                      </div>
                    </div>
                  </form>
                </div>
                <div ng-if="!alt_shipping && site_campaign_alt_city_input_toggle">
                  <form class="ui form new-shipping-address-form">
                    <div class="field">
                      <label translate> guest_contribution_shipping_address </label>
                      <input type="text" placeholder="{{'guest_contribution_shipping_street_address' | translate}} " ng-model="address.street1" name="street_address">
                    </div>
                    <div class="two fields">
                      <div class="field" id="select-city">
                        <label translate> pledge_campaign_shipping_address_city</label>
                        <input name="city" type="text" ng-model="address.city_alt" placeholder="{{'pledge_campaign_shipping_address_city_placeholder' | translate}}">
                      </div>
                      <div class="field">
                        <label translate> guest_contribution_shipping_postal_code </label>
                        <input name="mail_code" ng-model="address.mail_code" placeholder="{{'guest_contribution_shipping_postal_code' | translate}}">
                      </div>
                    </div>
                  </form>
                </div>
                <div ng-if="alt_shipping && !site_campaign_alt_city_input_toggle">
                  <form class="ui form new-shipping-address-form">
                    <div class="two fields">
                      <div class="field">
                        <label translate="guest_contribution_shipping_country"></label>
                        <div class="ui selection dropdown altCountry">
                          <input name="country" type="hidden" ng-attr-value="{{selectedCountry.selected.name}}">
                          <div class="text" ng-bind="selectedCountry.selected.name"></div>
                          <i class="dropdown icon"></i>
                          <div class="menu">
                            <div class="item" ng-repeat="country in countries" ng-bind="country.name" ng-click="setCountry(country)"></div>
                          </div>
                        </div>
                      </div>
                      <div class="field">
                        <label translate="guest_contribution_shipping_postal_code"></label>
                        <input name="mail_code" type="text" ng-model="address.mail_code" placeholder="{{'guest_contribution_shipping_postal_code' | translate}}">
                      </div>
                    </div>
                    <div class="two fields">
                      <div class="field" id="select-subcountry">
                        <label translate="guest_contribution_sub_country"></label>
                        <div ui-select style="width:100%;" ng-model="selectedSubcountry.selected" theme="select2" reset-search-input="false" ng-disabled="!selectedCountry.selected">
                          <div ui-select-match placeholder="{{'guest_contribution_sub_country_placeholder'| translate}}">
                            {{$select.selected.name}}
                          </div>
                          <div ui-select-choices repeat="subcountry in subcountries | filter: $select.search">
                            <div ng-bind="subcountry.name"></div>
                          </div>
                        </div>
                      </div>
                      <div class="field" id="select-city">
                        <label translate="guest_contribution_shipping_city"></label>
                        <div ui-select style="width:100%;" ng-model="selectedCity.selected" theme="select2" reset-search-input="false" ng-disabled="!selectedSubcountry.selected">
                          <div ui-select-match placeholder="{{'guest_contribution_shipping_city_placeholder'| translate}}">
                            {{$select.selected.name}}
                          </div>
                          <div ui-select-choices repeat="city in cities | filter: $select.search" refresh="searchCities($select.search)" refresh-delay="200">
                            <div ng-bind-html="city.name"></div>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="field">
                      <label translate="guest_contribution_shipping_address"></label>
                      <input name="street_address" type="text" ng-model="address.street1" placeholder="{{'guest_contribution_shipping_address'|translate}}">
                    </div>
                  </form>
                </div>
                <div ng-if="alt_shipping && site_campaign_alt_city_input_toggle">
                  <form class="ui form new-shipping-address-form">
                    <div class="field" id="address">
                      <label translate="guest_contribution_shipping_address"></label>
                      <input name="street_address" type="text" ng-model="address.street1" placeholder="{{'guest_contribution_shipping_address'|translate}}">
                    </div>
                    <div class="two fields">
                      <div class="field" id="select-city">
                        <label translate> pledge_campaign_shipping_address_city</label>
                        <input name="city" type="text" ng-model="address.city_alt" placeholder="{{'pledge_campaign_shipping_address_city_placeholder' | translate}}">
                      </div>
                      <div class="field" id="mail-code">
                        <label translate="guest_contribution_shipping_postal_code"></label>
                        <input name="mail_code" type="text" ng-model="address.mail_code" placeholder="{{'guest_contribution_shipping_postal_code' | translate}}">
                      </div>
                    </div>
                    <div class="two fields">
                      <div class="field" id="select-country">
                        <label translate="guest_contribution_shipping_country"></label>
                        <div class="ui selection dropdown altCountry">
                          <input name="country" type="hidden" ng-attr-value="{{selectedCountry.selected.name}}">
                          <div class="text" ng-bind="selectedCountry.selected.name" translate>guest_contribution_shipping_country_placeholder</div>
                          <i class="dropdown icon"></i>
                          <div class="menu">
                            <div class="item" ng-repeat="country in countries" ng-bind="country.name" ng-click="setCountry(country)"></div>
                          </div>
                        </div>
                      </div>
                      <div class="field" id="select-subcountry">
                        <label translate="guest_contribution_sub_country"></label>
                        <div ui-select style="width:100%;" ng-model="selectedSubcountry.selected" theme="select2" reset-search-input="false" ng-disabled="!selectedCountry.selected">
                          <div ui-select-match placeholder="{{'guest_contribution_sub_country_placeholder'| translate}}">
                            {{$select.selected.name}}
                          </div>
                          <div ui-select-choices repeat="subcountry in subcountries | filter: $select.search">
                            <div ng-bind="subcountry.name"></div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </form>
                </div>
                <div class="ui warning message" ng-show="shipping_error">{{'shipping_error_message'|translate}}</div>
                <table class="ui table" ng-if="shipOptions.length>0">
                  <thead>
                    <tr>
                      <th translate> guest_contribution_shipping_type</th>
                      <th translate> guest_contribution_shipping_country</th>
                      <th translate> guest_contribution_sub_country</th>
                      <th translate>guest_contribution_shipping_cost</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr ng-class="{'positive': $index == costIndex}" ng-repeat="shipping in shipOptions" ng-init="shippingOptionString(shipping.shipping_option_type_id)">
                      <td>{{shipping_option}}</td>
                      <td>{{shipping.country}}</td>
                      <td>{{shipping.sub_country}}</td>
                      <td class="payment-amnt" ng-bind-html="shipOptions[0].cost || 0 | formatCurrency:campaign.currencies[0].code_iso4217_alpha:public_setting.site_campaign_decimal_option"></td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>

          <h2 class="ui inverted top attached header" translate="guest_campaign_Phone_Number_Info" ng-if="(campaign.pledges[pledgeindex].shipping.length && guestOption != 1) || (acceptExtraPledgeData && (guestOption == 2 || guestOption == 4))"></h2>
          <div class="shipping-info campaign-bg ui middle attached basic segment" ng-if="(campaign.pledges[pledgeindex].shipping.length && guestOption != 1) || (acceptExtraPledgeData && (guestOption == 2 || guestOption == 4))">
            <div class="formbg ui two column stackable grid">
              <div class="ui corner red label" data-content="Required Field" sui-popup="" ng-if="acceptExtraPledgeData">
                <i class="white asterisk icon"></i>
              </div>
              <div class="five wide column left-col">
                <h3 class="ui header" translate="guest_campaign_Phone_Number"></h3>
                <p translate>guest_campaign_phone_number_message</p>
              </div>
              <div class="eleven wide column right-col">
                <div ng-if="hasNumber">
                  <div class="ui red message error-message" ng-if="(!toggle.selectedNumber && toggle.newNumber) || !(toggle.newNumber||newNumberCreated.number && newNumberCreated.phonetype )" translate="guest_campaign_phone_number_message"></div>
                  <div class="ui selection fluid dropdown number-select">
                    <div class="default text" translate="guest_campaign_shipping_choose_phone_number">
                    </div>
                    <i class="dropdown icon"></i>
                    <div class="menu">
                      <div ng-repeat="pNumber in personalNumbers" ng-click="contactPhoneSelected(pNumber)" class="item">{{pNumber.number}} | {{phonetype[pNumber.phone_number_type_id-1].name | translate}}</div>
                    </div>
                  </div>
                  <div class="ui horizontal divider contrib-divider" translate="guest_campaign_cerditcard_or"></div>
                  <div class="ui center aligned basic segment">
                    <div class="ui black button hover" translate="guest_campaign_create_new_phone_number">
                    </div>
                  </div>
                </div>
                <div ng-hide="toggle.newNumber" class="newNumber">
                  <div class="ui form" id="new-phone-number-form">
                    <div class="two fields">
                      <div class="field">
                        <label translate="guest_campaign_Phone_Number"></label>
                        <input type="text" maxLength="25" ng-model="newNumberCreated.number" name="new_phone_number" placeholder="{{'guest_campaign_Phone_Number' | translate}}" />
                      </div>
                      <div class="field">
                        <label translate="guest_campaign_Phone_Type"></label>
                        <div class="ui selection dropdown">
                          <div class="text" ng-bind="Ptype"></div>
                          <input type="hidden" name="new_phone_type">
                          <i class="dropdown icon"></i>
                          <div class="menu">
                            <div class="item" ng-repeat="type in phonetype" id="phone_type_{{type.name}}" ng-click="phoneTypeSelected(type)">{{type.name | translate}}</div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="ui basic segment payment-total">
            <table class="ui very basic table payments">
              <tbody>
                <tr>
                  <td class="payment-label" translate> guest_contribution_your_contribution </td>
                  <td class="payment-amnt">
                    <span ng-bind-html="pledgeAmount | formatCurrency:campaign.currencies[0].code_iso4217_alpha:public_setting.site_campaign_decimal_option"></span>
                    <span class="currency" ng-bind-html="campaign.currencies[0].code_iso4217_alpha"></span>
                  </td>
                </tr>

                <tr ng-if="couponCodeValid && currentCoupon">
                  <td class="payment-label" translate> pledge_campaign_your_discount </td>
                  <td class="payment-amnt red">
                    <span ng-if="amountDiscounted > 0" ng-bind-html="'-' + (amountDiscounted | formatCurrency:campaign.currencies[0].code_iso4217_alpha:public_setting.site_campaign_decimal_option)"></span>
                    <span ng-if="amountDiscounted > 0" class="currency" ng-bind-html="campaign.currencies[0].code_iso4217_alpha"></span>
                </td>
                </tr>

                <tr ng-if="tip.dollar_amount">
                  <td translate> guest_contribution_your_tip </td>
                  <td>
                    <span ng-bind-html="tip.dollar_amount | formatCurrency:tipInfo.code_iso4217_alpha:public_setting.site_campaign_decimal_option"></span>
                    <span class="currency" ng-bind-html="tipInfo.code_iso4217_alpha"></span>
                  </td>
                </tr>
                
                <tr ng-if="shipOptions.length">
                  <td class="payment-label" translate> guest_contribution_your_shipping</td>
                  <td class="payment-amnt">
                    <span ng-bind-html="shipOptions[0].cost || 0 | formatCurrency:campaign.currencies[0].code_iso4217_alpha:public_setting.site_campaign_decimal_option"></span>
                    <span class="currency" ng-bind-html="campaign.currencies[0].code_iso4217_alpha"></span>
                  </td>
                </tr>
                
              </tbody>
              <tfoot>
                <tr>
                  <td translate> guest_contribution_total_payment </td>
                  <td>
                    <span ng-bind-html="total(shipOptions[0].cost, tip.dollar_amount, currentCoupon) | formatCurrency:campaign.currencies[0].code_iso4217_alpha:public_setting.site_campaign_decimal_option"></span>
                    <span class="currency" ng-bind-html="campaign.currencies[0].code_iso4217_alpha"></span>
                  </td>
                </tr>
                
              </tfoot>
            </table>
          </div>
          <div class="agreement ui form" ng-show="public_settings.site_tos_contribution_ui">
            <div class="ui red pointing error right label" ng-show="tos_not_checked && !agreed" translate="">please_confirm_tos</div>
            <div class="ui checkbox" ng-model="agreed" ng-class="{'has-error': tos_not_checked && !agreed}" id="termcheck">
              <input type="checkbox" id="terms">
              <label for="terms"> {{'guest_contribution_checkbox'| translate}}
                <a href="tos" target="_blank">
                  <em> {{'guest_contribution_term_service' | translate}} </em>
                </a>&
                <a href="privacy" target="_blank">
                  <em> {{'guest_contribution_privacy_statement'| translate}} </em>
                </a>
              </label>
            </div>
          </div>
          <div class="pledge-btns ui right aligned basic btn segment" ng-hide="guestOption == 1">
            <div id="paypal-button-container"></div>
          </div>
          <div ng-include src="'views/templates/partials/response-message.html'"></div>
          <div class="ui right floated basic btn segment" ng-hide="guestOption == 1">
            <div class="ui black button" ng-click="goBackToCampaign()" translate> guest_contribution_go_back</div>
            <div accessible-form class="ui right labeled icon blue button" ng-click="submit()" id="pledgebutton" ng-show="payment_gateway == 1">{{'guest_contribution_pledgebutton'|translate}}
              <i class="right arrow icon"></i>
            </div>
            <div accessible-form class="ui right labeled icon blue button" ng-click="submitWidgetPledge()" id="pledgebutton" ng-show="payment_gateway == 2">{{'guest_contribution_pledgebutton'|translate}}
              <i class="right arrow icon"></i>
            </div>
          </div>
        </div>
      </div>
      <div class="ui column" ng-if="isContributionLayout1" id="contribution-layout-1">
        <div class="campaign-disclaimer-text" ng-if="displayCampaignDisclaimer.toggle && displayCampaignDisclaimer.text">
          <div class="ui warning message" ng-bind-html="displayCampaignDisclaimer.text"></div>
        </div>
        <div class="pledge-campaign-top-header">
          <div class="ui two column stackable grid">
            <div class="four wide column campaign-img">
              <img ng-if="campaign.files.length" ng-repeat="file in campaign.files | filter:{region_id: RESOURCE_REGIONS.campaign.thumbnail} | orderBy:'-file_id' | limitTo: 1" ng-src="{{server + '/image/campaign_thumbnail_xl/' + file.path_external}}" class="ui image"
              />
              <img ng-if="campaign.files.length == 0" src="images/placeholder-images/placeholder_campaign_thumb.png" class="ui image" />
            </div>
            <div class="twelve wide column">
              <h1 class="ui header"> {{campaign.name}} </h1>
              <h4 ng-if="!public_settings.site_campaign_enable_organization_name"> {{'guest_contribution_by' | translate}} {{campaign.managers[0].first_name}} {{campaign.managers[0].last_name}}</h4>
              <h4 ng-if="public_settings.site_campaign_enable_organization_name"> {{'guest_contribution_by' | translate}} {{organization_name.value}}</h4>
              <p ng-if="public_settings.site_campaign_enable_organization_name">{{'ein_label' | translate}}{{organization_name.ein}}</p>
              <p ng-bind-html="campaign.blurb"></p>
            </div>
          </div>
        </div>
        <div class="pledge-campaign-info">
          <div class="ic-contribution-summary">
            <div class="campaign-bg ui basic segment">
              <div class="formbg ui two column stackable grid reward-summary">
                <div class="eight wide column left-col">
                  <div class="tipping-options-wrap" ng-if="tippingOptions.toggle">
                    <h3 class="ui header" translate>guest_contribution_website_tip</h3>
                    <p translate>guest_contribution_website_tip_note</p>

                    <div class="ui buttons tipping-options-selection field" ng-class="{'error' : tipTypeError}" ng-if="(tippingOptions.toggle_dynamic && tippingOptions.toggle_tiers) || (tippingOptions.toggle_dynamic && tippingOptions.toggle_no_tip) || (tippingOptions.toggle_tiers && tippingOptions.toggle_no_tip)">
                      <div class="ui button" ng-class="{ 'green': selectedTipType == 'tiers' }" ng-if="tippingOptions.toggle_tiers" ng-click="tipTypeSelection('tiers')" translate>
                        guest_contribution_choose_tip
                      </div>
                      <div class="or" ng-if="tippingOptions.toggle_tiers && tippingOptions.toggle_dynamic"></div>
                      <div class="ui button" ng-class="{ 'green': selectedTipType == 'dynamic' }" ng-if="tippingOptions.toggle_dynamic" ng-click="tipTypeSelection('dynamic')" translate>
                        guest_contribution_enter_tip_amount
                      </div>
                      <div class="or" ng-if="tippingOptions.toggle_no_tip"></div>
                      <div class="ui button" ng-class="{ 'green': selectedTipType == 'no_tip' }" ng-if="tippingOptions.toggle_no_tip" ng-click="tipTypeSelection('no_tip')" translate>
                        guest_contribution_no_tip
                      </div>
                    </div>
                    <div class="ui red pointing prompt label transition visible" ng-if="tipTypeError" translate>guest_contribution_select_tip_option</div>
                    <div ng-if="(tippingOptions.toggle_dynamic && !tippingOptions.toggle_tiers && !tippingOptions.toggle_no_tip) || selectedTipType == 'dynamic'" class="ui dynamic-tipping-form form tipping-option">
                      <div class="field">
                        <div class="ui left labeled input">
                          <div class="ui label" ng-bind-html=" ' ' | formatCurrency:tipInfo.code_iso4217_alpha:public_setting.site_campaign_decimal_option"></div>
                          <input name="dynamic_tip" type="text" ng-model="tip.dollar_amount">
                        </div>
                      </div>
                    </div>
                    <div ng-if="(!tippingOptions.toggle_dynamic && tippingOptions.toggle_tiers && !tippingOptions.toggle_no_tip) || selectedTipType == 'tiers'" class="tipping-option">
                      <div class="tip-field field" ng-if="tippingOptions.tiers[0]">
                        <div class="ui selection dropdown tip-tiers">
                          <input type="hidden" name="tip_tier">
                          <i class="dropdown icon"></i>
                          <div class="default text">
                            <span ng-if="tippingOptions.toggle_tier_names">{{tipTiersDefaultName}} -</span>
                            <span>{{tipTiersDefaultAmount | formatCurrency:tipInfo.code_iso4217_alpha:public_setting.site_campaign_decimal_option}}</span>
                          </div>
                          <div class="menu">
                            <div class="item" data-value="{{$index}}" ng-repeat="tier in tippingOptions.tiers track by $index" ng-click="tipTierSelection(tier.value, tier.type, tier.dollar_amount, tier.name, $index)">
                              <span ng-if="tippingOptions.toggle_tier_names">{{tier.name}} -</span>
                              <span>{{tier.dollar_amount | formatCurrency:tipInfo.code_iso4217_alpha:public_setting.site_campaign_decimal_option}}</span>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div ng-if="selectedTipType == 'no_tip'" class="tipping-option" translate>
                      guest_contribution_no_tip_selected
                    </div>
                  </div>
                  <h3 class="ui header" translate> guest_contribution_confirm_rewards </h3>
                  <p translate>
                    guest_contribution_confirm_rewards_note
                  </p>
                  <div class="ui two column stackable grid pledge-amount">
                    <div class="eight wide column your-pledge">
                      <h4 class="title" translate> guest_contribution_your_contribution </h4>
                      <form class="ui form contribution-form">
                        <div class="field">
                          <div ng-show="allowDecimalNotation == 2 || allowDecimalNotation == 3" class="contribution-input with-decimal">
                            <div class="ui currency label" ng-bind-html=" ' ' | formatCurrency:campaign.currencies[0].code_iso4217_alpha:public_setting.site_campaign_decimal_option"></div>
                            <div class="input-wrap">
                              <input name="contribution_amount" ng-class="{'has-error': pledgeAmount < campaign.pledges[pledgeindex].amount  || pledgeAmount == null ||pledgeAmount < public_settings.site_theme_campaign_min_contribute_amount || (pledgeAmount > max_amoumt && allow_max)}"
                                type="text" min="{{campaign.pledges[pledgeindex].amount || 1}}" ng-model="campaignFundingGoal.value" number-with-decimals>
                            </div>
                            <div ng-if="allowDecimalNotation == 2" class="ui label decimal-value">
                              <span>.00</span>
                            </div>
                          </div>
                        </div>
                        <div class="field">
                          <div ng-show="allowDecimalNotation == 1" class="contribution-input">
                            <div class="ui currency-symbol label" ng-bind-html=" ' ' | formatCurrency:campaign.currencies[0].code_iso4217_alpha:public_setting.site_campaign_decimal_option"></div>
                            <div class="input-wrap">
                              <input name="contribution_amount_decimal" ng-class="{'has-error': pledgeAmount < campaign.pledges[pledgeindex].amount  || pledgeAmount == null ||pledgeAmount < public_settings.site_theme_campaign_min_contribute_amount || (pledgeAmount > max_amoumt && allow_max)}"
                                type="text" min="{{campaign.pledges[pledgeindex].amount || 1}}" ng-model="campaignFundingGoal.value" number-with-decimals ng-attr-allow-decimal="true">
                            </div>
                          </div>
                        </div>
                      </form>
                    </div>
                    <div class="eight wide column extra-pledge" ng-if="pledgeLevel">
                      <h4 class="title" translate>guest_contribution_selected_reward </h4>
                      <div class="amount" ng-if="pledgeAmount-campaign.pledges[pledgeindex].amount > 0" ng-bind-html="pledgeAmount-campaign.pledges[pledgeindex].amount  | formatCurrency:campaign.currencies[0].code_iso4217_alpha:public_setting.site_campaign_decimal_option"></div>
                      <div class="amount" ng-if="pledgeAmount-campaign.pledges[pledgeindex].amount <= 0" ng-bind-html="0 | formatCurrency:campaign.currencies[0].code_iso4217_alpha:public_setting.site_campaign_decimal_option"></div>
                    </div>
                  </div>
                  <div class="ui form" id="reward-variation-form" ng-if="enableRewardVariation">
                    <div id="reward-variation" class="reward-variation ui two column stackable grid">
                      <div class="reward-variation-item eight wide column" ng-repeat="variation in selectedReward.attributes.variation">
                        <div class="field">
                          <label translate>{{variation.name}}</label>
                          <div class="ui fluid selection dropdown" ng-model="$parent.selectedRewardAttrs[$index]">
                            <input type="hidden" name="variation_value">
                            <i class="dropdown icon"></i>
                            <div class="default text">{{variation.name}}</div>
                            <div class="menu">
                              <div class="item" data-value="{{$index}}" ng-repeat="choiceItem in variation.choice track by $index">{{choiceItem.value}}</div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="anonymous-contribution-checkbox ui checkbox" ng-model="$parent.selecteContributionAnon" ng-show="(anonymousContributionTypeOnly && contributionTypeRadio) || (anonymousContributionTypeOnly && !contributionTypeRadio)">
                    <input type="checkbox">
                    <label translate> pledge_campaign_anon_contribution_only_label </label>
                  </div>
                  <div class="contribution-selection" ng-if="!forceAnonymousPledge" ng-show="(guestOption == 2 || guestOption ==4) && !contributionTypeRadio && !anonymousContributionTypeOnly">
                    <div class="ui selection dropdown card-type" id="contributionMethod">
                      <div class="text"> {{contribution[0].name | translate}}</div>
                      <i class="dropdown icon" style="margin-left: 10px;"></i>
                      <input type="hidden" name="card-type" />
                      <div class="menu">
                        <div ng-repeat="type in contribution" ng-click="contributionSelected(type)" class="item">{{type.name | translate }}</div>
                      </div>
                    </div>
                  </div>
                  <div class="contribution-type" ng-show="contributionTypeRadio && !anonymousContributionTypeOnly">
                    <h3 class="ui header" translate>guest_contribution_type</h3>
                    <p translate>
                      guest_contribution_type_note
                    </p>
                    <div class="grouped inline fields">
                      <div class="field" ng-repeat="type in contribution">
                        <div class="ui radio checkbox" ng-if="$first" ng-click="contributionSelected(type)">
                          <input type="radio" name="contribution_types" checked="checked">
                          <label>{{type.name | translate }}</label>
                        </div>
                        <div class="ui radio checkbox" ng-if="!$first" ng-click="contributionSelected(type)">
                          <input type="radio" name="contribution_types">
                          <label>{{type.name | translate }}</label>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="charity-helper" ng-if="public_settings.site_campaign_charity_helper_enable && campaign.charity_id" style="margin-top:15px;">
                    <h3 class="ui header" translate>pledge_campaign_charity</h3>
                    <p translate>
                      pledge_campaign_charity_note
                    </p>
                    <div class="ui two column stackable grid pledge-amount">
                      <div class="eight wide column your-pledge">
                        <div class="grouped inline fields">
                          <div class="ui checkbox" ng-model="charity.is_a_gift">
                            <input type="checkbox" name="is_a_gift_aid">
                            <label translate>charity_helper_is_a_gift</label>
                          </div>
                          <div class="ui checkbox" ng-show="charity.is_a_gift && !public_settings.site_campaign_charity_helper_alternate_form" ng-model="charity.is_a_tax_payer">
                            <input type="checkbox" name="is_a_tax_payer">
                            <label translate>charity_helper_is_a_uk_taxpayer</label>
                          </div>
                          <div class="ui checkbox charity-checkbox" ng-show="charity.is_a_gift && public_settings.site_campaign_charity_helper_alternate_form" ng-model="charity.is_a_tax_payer">
                            <input type="checkbox" name="is_a_tax_payer">
                            <label translate>charity_helper_is_a_uk_taxpayer_alternate</label>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="ui form charity-form" ng-show="charity.is_a_tax_payer && charity.is_a_gift && !public_settings.site_campaign_charity_helper_alternate_form">
                      <div class="fields">
                        <div class="row">
                          <div class="field">
                            <label translate>charity_helper_fullname_header</label>
                            <input name="charity_full_name" type="text" placeholder="{{'charity_helper_fullname_placeholder' | translate}}" ng-model="charity.fullname">
                          </div>
                        </div>
                        <div class="row">
                          <div class="eleven wide field">
                            <label translate>charity_helper_address_header</label>
                            <input name="charity_full_address" type="text" placeholder="{{'charity_helper_address_placeholder'| translate}} " ng-model="charity.address">
                          </div>
                        </div>
                        <div class="row">
                          <div class=" six wide field">
                            <label translate>charity_helper_postcode_header</label>
                            <input name="charity_postcode" type="text" placeholder="{{'charity_helper_postcode_placeholder' | translate}}" ng-model="charity.postcode">
                          </div>
                        </div>
                        <div class="ui checkbox" ng-model="charity.charity_final_confirmation">
                          <input type="checkbox" name="charity_final_confirmation">
                          <label>{{'charity_helper_final_confirmation_placeholder_1' | translate}}{{charity_percentage_fee}}{{'charity_helper_final_confirmation_placeholder_2'
                            | translate}}</label>
                        </div>
                      </div>
                    </div>
                    <div class="ui form charity-form" ng-show="charity.is_a_tax_payer && charity.is_a_gift && public_settings.site_campaign_charity_helper_alternate_form">
                      <div class="fields">
                        <div class="row">
                          <div class="field">
                            <label translate>charity_helper_fullname_header</label>
                            <input name="charity_full_name" type="text" placeholder="{{'charity_helper_fullname_placeholder' | translate}}" ng-model="charity.fullname">
                          </div>
                        </div>
                        <div class="ui checkbox" ng-model="charity.overseas">
                          <input type="checkbox" name="is_a_tax_payer">
                          <label translate>charity_helper_house_overseas</label>
                        </div>
                        <div class="row">
                          <div class="eleven wide field">
                            <label translate>charity_helper_house_number_header</label>
                            <input name="House Number" type="text" placeholder="{{'charity_helper_house_number_placeholder'| translate}} " ng-model="charity.house_number">
                          </div>
                        </div>
                        <div class="row">
                          <div class="eleven wide field">
                            <label translate>charity_helper_street_header</label>
                            <input name="Street" type="text" placeholder="{{'charity_helper_street_placeholder'| translate}} " ng-model="charity.street">
                          </div>
                        </div>
                        <div class="row">
                          <div class="eleven wide field">
                            <label translate>charity_helper_town_header</label>
                            <input name="Town or City" type="text" placeholder="{{'charity_helper_town_placeholder'| translate}} " ng-model="charity.city">
                          </div>
                        </div>
                        <div class="row">
                          <div class=" six wide field">
                            <label translate>{{'charity_helper_postcode_header'| translate}}
                              <span class="optional-text" translate="campaign_creation_optional_text">(Optional)</span>
                            </label>
                            <input name="charity_postcode" type="text" placeholder="{{'charity_helper_postcode_placeholder' | translate}}" ng-model="charity.postcode">
                          </div>
                        </div>
                        <div class="row">
                          <div class="eleven wide field">
                            <label translate> Country</label>
                            <select class="charity-country" ng-model="charity.country" ui-select2>
                              <option value="{{country.country_id}}" class="item" ng-repeat="country in countries">{{country.name}}</option>
                            </select>
                          </div>
                        </div>
                        <div class="ui checkbox" ng-model="charity.charity_final_confirmation">
                          <input type="checkbox" name="charity_final_confirmation">
                          <label>{{'charity_helper_final_confirmation_placeholder_alternate' | translate}}</label>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="contribution-message" ng-show="isEnableContributionMessage">
                    <h3 class="ui header" translate>pledge_camapaign_contribution_message_notes</h3>
                    <div class="ui form">
                      <div class="field">
                        <textarea rows="5" ng-model="$parent.contributionMessage"></textarea>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="eight wide column right-col">
                  <div class="ui segment reward-wrap" ng-if="campaign.pledges">
                    <div ng-if="pledgeLevel">
                      <div class="reward-etd" ng-if="campaign.pledges[pledgeindex].estimated_delivery_time">{{'guest_contribution_estimate_delivery' | translate}} {{campaign.pledges[pledgeindex].estimated_delivery_time | formatDate:"MMMM DD, YYYY" }}</div>
                      <h3 class="reward-title ui header">{{campaign.pledges[pledgeindex].name}}</h3>
                      <div class="reward-description fr-view" html-render html="campaign.pledges[pledgeindex].description"></div>
                    </div>
                    
                    <div class="campaign-reward-info-bottom ui two column grid">
                      <div class="column">
                        <div class="reward-amount" ng-if="selectedReward">
                          <div class="amount" ng-if="campaign.pledges[pledgeindex].amount">
                            <span ng-bind-html="campaign.pledges[pledgeindex].amount | formatCurrency:campaign.currencies[0].code_iso4217_alpha:public_setting.site_campaign_decimal_option"></span>
                            <span class="currency" ng-bind-html="campaign.currencies[0].code_iso4217_alpha"></span>
                          </div>
                          <span class="shipping-label" ng-show="campaign.pledges[pledgeindex].shipping"> {{'guest_contribution_shipping'| translate}} </span>
                        </div>
                        <div class="no-reward-text" ng-if="!selectedReward">
                          <span translate> guest_contribution_noreward_message</span>
                        </div>
                      </div>
                      <div class="column">
                        <button ng-click="scrollToRewardParam()" class="ui green button change-reward">
                          <span translate> pledge_campaign_choose_reward</span>
                        </button>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="campaign-bg ui basic segment">
            <div class="formbg ui two column stackable grid">
              <div class="your-info-col eight wide column left-col">
                <h3 class="ui header" translate> guest_contribution_personal_info </h3>
                <p translate ng-show="!campaign.pledges[pledgeindex] && guest_contrib_option == 3">
                  guest_contribution_personal_info_note
                </p>
                <p translate ng-show="campaign.pledges[pledgeindex] || (guest_contrib_option != 3 && !campaign.pledges[pledgeindex])">
                  guest_contribution_personal_info_reward_note
                </p>
                <div class="personal-info-fields">
                  <form class="ui form select-login-option">
                    <div class="grouped inline fields" ng-show="!onlyOneOptionHide">
                      <div class="field" ng-show="guest_contrib_option == 3 || guest_contrib_option == 1 || guest_contrib_option == 6 || guest_contrib_option == 8">
                        <div class="ui radio checkbox" ng-model="$parent.guestOption" id="optionlogin" ng-click="clearForm()">
                          <input type="radio" name="guest-options" value="1">
                          <label> {{'guest_contribution_login'|translate }} </label>
                        </div>
                      </div>
                      <div class="field" ng-show="guest_contrib_option == 3 || guest_contrib_option == 1 || guest_contrib_option == 6 || guest_contrib_option == 8">
                        <div class="ui radio checkbox" ng-model="$parent.guestOption" id="optionaccount" ng-click="clearForm()">
                          <input type="radio" name="guest-options" value="2">
                          <label> {{'guest_contribution_create_new_account'| translate}}</label>
                        </div>
                      </div>
                      <div class="field" ng-show="guest_contrib_option == 2 || guest_contrib_option == 3 || guest_contrib_option == 5 || guest_contrib_option == 6 || guest_contrib_option == 7 || guest_contrib_option == 8">
                        <div class="ui radio checkbox" ng-model="$parent.guestOption" id="optionexpress" ng-click="clearForm()" ng-show="payment_gateway == 1">
                          <input type="radio" name="guest-options" value="4">
                          <label> {{'guest_contribution_express_checkout'|translate }} </label>
                        </div>
                      </div>
                    </div>
                  </form>
                  <form class="ui form general-login-info-form" ng-show="guestOption == 1">
                    <div class="field">
                      <label translate> guest_contribution_email </label>
                      <input name="email" type="text" placeholder="{{'guest_contribution_email_message'| translate}}" ng-model="accountInfo.email">
                    </div>
                    <div class="field">
                      <label translate> guest_contribution_password </label>
                      <input name="password" type="password" placeholder="{{'guest_contribution_password' | translate}}" ng-model="accountInfo.password">
                    </div>
                    <div class="ui black button" ng-click="goBackToCampaign()" translate> guest_contribution_go_back</div>
                    <div class="ui green button" ng-click="loginUser()" id="loginbtn" translate> guest_contribution_login</div>
                    <div class="ui grey button" ng-click="forgotPassword()" id="loginbtn" translate>guest_contribution_forgot_password</div>
                  </form>
                  <!-- Form Create Account Checkout Start -->
                  <form class="ui form create-new-account-info-form" ng-if="guestOption == 2">
                    <div class="field">
                      <label translate> guest_contribution_fname </label>
                      <input name="first_name" type="text" placeholder="{{'guest_contribution_fname_placeholder' | translate}}" ng-model="accountInfo.first_name">
                    </div>
                    <div class="field">
                      <label translate> guest_contribution_lname </label>
                      <input name="last_name" type="text" placeholder="{{'guest_contribution_lname_placeholder'| translate}} " ng-model="accountInfo.last_name">
                    </div>
                    <div class="field">
                      <label translate> guest_contribution_email </label>
                      <input name="email" type="text" placeholder="{{'guest_contribution_email_message' | translate}}" ng-model="accountInfo.email" id="newemail">
                    </div>
                    <div class="field" ng-show="payment_gateway == 2">
                      <label translate>guest_campaign_Phone_Number</label>
                      <input name="phone_number" numbers-Only type="text" placeholder="{{'guest_campaign_Phone_Number_placeholder'|translate}}" maxLength="25" ng-model="person.number">
                    </div>
                    <div class="field">
                      <label translate> guest_contribution_password </label>
                      <input name="password" type="password" placeholder="{{'guest_contribution_password_placeholder' | translate}} " ng-model="accountInfo.password" id="newpass">
                    </div>
                    <div class="field">
                      <label translate> guest_contribution_confirm_password </label>
                      <input name="confirm_password" type="password" placeholder="{{'guest_contribution_confirm_password' | translate}}" ng-model="accountInfo.password_confirm">
                    </div>
                    <div class="field" ng-show="payment_gateway == 2">
                      <label translate>guest_contribution_employer</label>
                      <input name="employer" type="text" placeholder="{{'guest_contribution_employer_placeholder'|translate}}" ng-model="person.employer">
                    </div>
                    <div class="field" ng-show="payment_gateway == 2">
                      <label translate>guest_contribution_occupation</label>
                      <input name="occupation" type="text" placeholder="{{'guest_contribution_occupation_placeholder'|translate}}" ng-model="person.occupation">
                    </div>
                  </form>
                  <!-- Form Create Account Checkout End -->

                  <!-- Form Guest Checkout Start -->
                  <form class="ui form guest-info-form" ng-show="guestOption == 3">
                    <div class="field" ng-show="payment_gateway == 1">
                      <label translate> guest_contribution_email </label>
                      <input name="email" type="text" placeholder=" {{'guest_contribution_email_message'| translate}}" ng-model="creditCard.email">
                    </div>
                    <div class="field" ng-show="payment_gateway == 2">
                      <label translate> guest_contribution_fname </label>
                      <input ng-class="{'has-error': !accountInfo.first_name && guestOption == 3 && payment_gateway == 2}" type="text" placeholder="{{'guest_contribution_fname_placeholder' | translate}}" ng-model="accountInfo.first_name">
                    </div>
                    <div class="field" ng-show="payment_gateway == 2">
                      <label translate> guest_contribution_lname </label>
                      <input ng-class="{'has-error': !accountInfo.last_name && guestOption == 3 && payment_gateway == 2}" type="text" placeholder="{{'guest_contribution_lname_placeholder'| translate}} " ng-model="accountInfo.last_name">
                    </div>
                    <div class="field" ng-if="payment_gateway == 2">
                      <label translate> guest_contribution_email </label>
                      <input ng-class="{'has-error': !accountInfo.email && guestOption == 3 && payment_gateway == 2}" type="text" placeholder="{{'guest_contribution_email_message' | translate}}" ng-model="accountInfo.email" id="newemail">
                    </div>
                    <div class="field" ng-show="payment_gateway == 2">
                      <label translate>guest_campaign_Phone_Number</label>
                      <input numbers-Only ng-class="{'has-error': !person.number  && guestOption == 3 && payment_gateway == 2}" type="text" placeholder="{{'guest_campaign_Phone_Number_placeholder'|translate}}" ng-model="person.number">
                    </div>
                    <div class="field" ng-show="payment_gateway == 2">
                      <label translate>guest_contribution_employer</label>
                      <input ng-class="{'has-error': !person.employer && guestOption == 3 && payment_gateway == 2 }" type="text" placeholder="{{'guest_contribution_employer_placeholder'|translate}}" ng-model="person.employer">
                    </div>
                    <div class="field" ng-show="payment_gateway == 2">
                      <label translate>guest_contribution_occupation</label>
                      <input ng-class="{'has-error': !person.occupation && guestOption == 3 && payment_gateway == 2}" type="text" placeholder="{{'guest_contribution_occupation_placeholder'|translate}}" ng-model="person.occupation">
                    </div>
                  </form>
                  <!-- Form Guest Checkout End -->

                  <!-- Form Express Checkout Start -->
                  <form class="ui form express-form" ng-show="guestOption == 4">
                    <div class="field" ng-show="payment_gateway == 1">
                      <label translate> guest_contribution_fname </label>
                      <input name="first_name" type="text" placeholder=" {{'guest_contribution_fname_placeholder'| translate}}" ng-model="express.fname">
                    </div>
                    <div class="field" ng-show="payment_gateway == 1">
                      <label translate> guest_contribution_lname </label>
                      <input name="last_name" type="text" placeholder=" {{'guest_contribution_lname_placeholder'| translate}}" ng-model="express.lname">
                    </div>
                    <div class="field" ng-show="payment_gateway == 1">
                      <label translate> guest_contribution_email </label>
                      <input name="email" type="text" placeholder=" {{'guest_contribution_email_message'| translate}}" ng-model="express.email">
                    </div>
                  </form>
                  <!-- Form Express Checkout End -->
                </div>
                <div class="phone-info" ng-if="campaign.pledges[pledgeindex].shipping.length && guestOption != 1">
                  <div ng-if="hasNumber">
                    <div class="ui red message error-message" ng-if="(!toggle.selectedNumber && toggle.newNumber) || !(toggle.newNumber||newNumberCreated.number && newNumberCreated.phonetype )" translate="guest_campaign_phone_number_message"></div>
                    <div class="ui selection fluid dropdown number-select">
                      <div class="default text" translate="guest_campaign_shipping_choose_phone_number">
                      </div>
                      <input type="hidden" name="phone_value">
                      <i class="dropdown icon"></i>
                      <div class="menu">
                        <div ng-repeat="pNumber in personalNumbers" ng-click="contactPhoneSelected(pNumber)" class="item">{{pNumber.number}} | {{phonetype[pNumber.phone_number_type_id-1].name | translate}}</div>
                      </div>
                    </div>
                    <div class="ui horizontal divider contrib-divider" translate="guest_campaign_cerditcard_or"></div>
                    <div class="ui center aligned basic segment">
                      <div class="ui black button hover" translate="guest_campaign_create_new_phone_number">
                      </div>
                    </div>
                  </div>
                  <div ng-hide="toggle.newNumber" class="newNumber">
                    <div class="ui form" id="new-phone-number-form">
                      <div class="two fields">
                        <div class="field">
                          <label translate="guest_campaign_Phone_Number"></label>
                          <input maxLength="25" type="text" ng-model="newNumberCreated.number" name="new_phone_number" placeholder="{{'guest_campaign_Phone_Number_placeholder' | translate}}" />
                        </div>
                        <div class="field">
                          <label translate="guest_campaign_Phone_Type"></label>
                          <div class="ui selection dropdown">
                            <div class="default text" translate="guest_campaign_phone_type_placeholder" ng-bind="Ptype"></div>
                            <input type="hidden" name="new_phone_type">
                            <i class="dropdown icon"></i>
                            <div class="menu">
                              <div class="item" ng-repeat="type in phonetype" ng-click="phoneTypeSelected(type)">{{type.name | translate}}</div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <div class="address-info-col eight wide column left-col" ng-if="campaign.pledges[pledgeindex].shipping.length && guestOption != 1">
                <div ng-if="!alt_shipping && !site_campaign_alt_city_input_toggle">
                  <form class="ui form new-shipping-address-form">
                    <div class="field">
                      <label translate> guest_contribution_shipping_address </label>
                      <input type="text" placeholder="{{'guest_contribution_shipping_street_address' | translate}} " ng-model="address.street1" name="street_address">
                    </div>
                    <div class="two fields">
                      <div class="field" id="select-city">
                        <label translate> guest_contribution_shipping_city </label>
                        <div ui-select style="width:100%;" ng-model="selectedCity.selected" theme="select2" reset-search-input="false">
                          <div ui-select-match placeholder="{{'guest_contribution_shipping_city_placeholder' | translate}} ">
                            {{$select.selected.name}}
                          </div>
                          <div ui-select-choices repeat="city in cities | filter: $select.search" refresh="searchCities($select.search)" refresh-delay="200">
                            <div ng-bind-html="city.name"></div>
                          </div>
                        </div>
                      </div>
                      <div class="field">
                        <label translate> guest_contribution_shipping_postal_code </label>
                        <input name="mail_code" ng-model="address.mail_code" placeholder="{{'guest_contribution_shipping_postal_code' | translate}}">
                      </div>
                    </div>
                  </form>
                </div>
                <div ng-if="!alt_shipping && site_campaign_alt_city_input_toggle">
                  <form class="ui form new-shipping-address-form">
                    <div class="field">
                      <label translate> guest_contribution_shipping_address </label>
                      <input type="text" placeholder="{{'guest_contribution_shipping_street_address' | translate}} " ng-model="address.street1" name="street_address">
                    </div>
                    <div class="two fields">
                      <div class="field" id="select-city">
                        <label translate> pledge_campaign_shipping_address_city</label>
                        <input name="city" type="text" ng-model="address.city_alt" placeholder="{{'pledge_campaign_shipping_address_city_placeholder' | translate}}">
                      </div>
                      <div class="field">
                        <label translate> guest_contribution_shipping_postal_code </label>
                        <input name="mail_code" ng-model="address.mail_code" placeholder="{{'guest_contribution_shipping_postal_code' | translate}}">
                      </div>
                    </div>
                  </form>
                </div>
                <div ng-if="alt_shipping && !site_campaign_alt_city_input_toggle">
                  <form class="ui form new-shipping-address-form">
                    <div class="field">
                      <label translate="guest_contribution_shipping_address"></label>
                      <input name="street_address" type="text" ng-model="address.street1" placeholder="{{'guest_contribution_shipping_address'|translate}}">
                    </div>
                    <div class="two fields">
                      <div class="field" id="select-city">
                        <label translate> pledge_campaign_shipping_address_city</label>
                        <input name="city" type="text" ng-model="address.city_alt" placeholder="{{'pledge_campaign_shipping_address_city_placeholder' | translate}}">
                      </div>
                      <div class="field">
                        <label translate="guest_contribution_shipping_postal_code"></label>
                        <input name="mail_code" type="text" ng-model="address.mail_code" placeholder="{{'guest_contribution_shipping_postal_code' | translate}}">
                      </div>
                    </div>
                    <div class="two fields">
                      <div class="field">
                        <label translate="guest_contribution_shipping_country"></label>
                        <div class="ui selection dropdown altCountry">
                          <input name="country" type="hidden" ng-attr-value="{{selectedCountry.selected.name}}">
                          <div class="text" ng-bind="selectedCountry.selected.name"></div>
                          <i class="dropdown icon"></i>
                          <div class="menu">
                            <div class="item" ng-repeat="country in countries" ng-bind="country.name" ng-click="setCountry(country)"></div>
                          </div>
                        </div>
                      </div>
                      <div class="field" id="select-subcountry">
                        <label translate="guest_contribution_sub_country"></label>
                        <div ui-select style="width:100%;" ng-model="selectedSubcountry.selected" theme="select2" reset-search-input="false" ng-disabled="!selectedCountry.selected">
                          <div ui-select-match placeholder="{{'guest_contribution_sub_country_placeholder'| translate}}">
                            {{$select.selected.name}}
                          </div>
                          <div ui-select-choices repeat="subcountry in subcountries | filter: $select.search">
                            <div ng-bind="subcountry.name"></div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </form>
                </div>
                <div ng-if="alt_shipping && site_campaign_alt_city_input_toggle">
                  <h3 class="ui header" translate> guest_contribution_shipping_info </h3>
                  <form class="ui form new-shipping-address-form">
                    <div class="field" id="address">
                      <label translate="guest_contribution_shipping_address"></label>
                      <input name="street_address" type="text" ng-model="address.street1" placeholder="{{'guest_contribution_shipping_address'|translate}}">
                    </div>
                    <div class="field" id="select-city">
                      <label translate> pledge_campaign_shipping_address_city</label>
                      <input name="city" type="text" ng-model="address.city_alt" placeholder="{{'pledge_campaign_shipping_address_city_placeholder' | translate}}">
                    </div>
                    <div class="field" id="mail-code">
                      <label translate="guest_contribution_shipping_postal_code"></label>
                      <input name="mail_code" type="text" ng-model="address.mail_code" placeholder="{{'guest_contribution_shipping_postal_code' | translate}}">
                    </div>
                    <div class="field" id="select-country">
                      <label translate="guest_contribution_shipping_country"></label>
                      <div class="ui selection dropdown altCountry">
                        <input name="country" type="hidden" ng-attr-value="{{selectedCountry.selected.name}}">
                        <div class="text" ng-bind="selectedCountry.selected.name" translate>guest_contribution_shipping_country_placeholder</div>
                        <i class="dropdown icon"></i>
                        <div class="menu">
                          <div class="item" ng-repeat="country in countries" ng-bind="country.name" ng-click="setCountry(country)"></div>
                        </div>
                      </div>
                    </div>
                    <div class="field" id="select-subcountry">
                      <label translate="guest_contribution_sub_country"></label>
                      <div ui-select style="width:100%;" ng-model="selectedSubcountry.selected" theme="select2" reset-search-input="false" ng-disabled="!selectedCountry.selected">
                        <div ui-select-match placeholder="{{'guest_contribution_sub_country_placeholder'| translate}}">
                          {{$select.selected.name}}
                        </div>
                        <div ui-select-choices repeat="subcountry in subcountries | filter: $select.search">
                          <div ng-bind="subcountry.name"></div>
                        </div>
                      </div>
                    </div>
                  </form>
                </div>
                <div class="ui warning message" ng-show="shipping_error">{{'shipping_error_message'|translate}}</div>
                <table class="ui table" ng-if="shipOptions.length>0">
                  <thead>
                    <tr>
                      <th translate> guest_contribution_shipping_type</th>
                      <th translate> guest_contribution_shipping_country</th>
                      <th translate> guest_contribution_sub_country</th>
                      <th translate>guest_contribution_shipping_cost</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr ng-class="{'positive': $index == costIndex}" ng-repeat="shipping in shipOptions" ng-init="shippingOptionString(shipping.shipping_option_type_id)">
                      <td>{{shipping_option}}</td>
                      <td>{{shipping.country}}</td>
                      <td>{{shipping.sub_country}}</td>
                      <td class="payment-amnt" ng-bind-html="shipOptions[0].cost || 0 | formatCurrency:campaign.currencies[0].code_iso4217_alpha:public_setting.site_campaign_decimal_option"></td>
                    </tr>
                  </tbody>
                </table>
              </div>

              <div class="payment-info-col eight wide column right-col" ng-if="guestOption != 1">
                <div class="payment-gateway-1" ng-if="payment_gateway == 1">
                  <h3 class="ui header" translate> guest_contribution_payment_info_creditcard </h3>
                  <p translate>
                    guest_contribution_payment_info_creditcard_note
                  </p>
                  <form ng-if="!site_stripe_tokenization_settings.toggle" class="ui credit-card-form form" ng-init="initStripePayment()">
                    <div class="field">
                      <label translate> guest_contribution_payment_card_number </label>
                      <input name="card_number" type="text" placeholder="{{'guest_contribution_payment_card_number'|translate}}" ng-model="creditCard.number" ng-change="checkCardType()" class="creditCardNumber">
                    </div>
                    <div class="two fields">
                      <div class="expdate-field-wrap field">
                        <div class="two fields">
                          <div class="exp-date-field field">
                            <label translate>guest_contribution_payment_expiration_month</label>
                            <input name="card_exp_month" type="text" class="exp-date" placeholder="{{'guest_contribution_payment_expiration_date_month' | translate}}" ng-model="creditCard.exp_month" numbers-only maxlength="2">
                          </div>
                          <div class="exp-date-field field">
                            <label translate>guest_contribution_payment_expiration_year</label>
                            <input name="card_exp_year" type="text" class="exp-date" placeholder="{{'guest_contribution_payment_expiration_date_year' | translate}}" ng-model="creditCard.exp_year" numbers-only maxlength="2">
                          </div>
                        </div>
                      </div>
                      <div class="cvc-field-wrap field">
                        <label id="cvc"> {{'guest_contribution_payment_cvc'| translate}}
                          <i class="info circle icon" data-content="{{'pledge_campaign_creditcard_cvc_note'| translate }}" sui-popup></i>
                        </label>
                        <input name="cvc" placeholder="{{'guest_contribution_payment_cvc_placeholder'| translate}}" type="text" class="cvc-code cardCVC" ng-model="creditCard.cvc" numbers-only>
                      </div>
                    </div>
                  </form>
                  <form ng-if="site_stripe_tokenization_settings.toggle" class="ui stripe-credit-card-form form stripe-elements-form" ng-init="initStripeElement()">
                    <div class="fields" ng-show="guestOption == 3">
                      <input type="text" name="namecard" placeholder="{{'pledge_campaign_name_on_card'| translate}}" ng-model="stripeExtraDetails.name">
                    </div>
                    <div class="field stripe-elements-field">
                      <label translate> guest_contribution_payment_card_number </label>
                      <div id="card-number-element-wrap">
                        <i class="pf pf-credit-card" id="brand-icon"></i>
                      </div>
                      <div id="card-number-element"></div>
                    </div>

                    <div class="two fields">
                      <div class="three wide field">
                        <label translate> guest_contribution_payment_card_expiry_date </label>
                        <div id="card-expiry-element"></div>
                      </div>
                      <div class="four wide field">
                        <label id="cvc"> {{'guest_contribution_payment_cvc'| translate}}
                          <i class="info circle icon" data-content="{{'pledge_campaign_creditcard_cvc_note'| translate }}" sui-popup></i>
                        </label>
                        <div id="card-cvc-element"></div>
                      </div>
                    </div>

                    <div id="card-errors" role="alert"></div>
                    <!-- <button>Submit Payment</button> -->
                  </form>
                </div>
                <div class="payment-gateway-2" ng-if="payment_gateway == 2">
                  <h3 class="ui header" translate>guest_contribution_payment_info_creditcard </h3>
                  <div class="ui credit-card form">
                    <div class="field">
                      <label translate>guest_contribution_payment_card__name</label>
                      <input ng-class="{'has-error': !creditCard.name  && payment_gateway ==2 }" type="text" placeholder="{{'guest_contribution_payment_card__name'|translate}}" ng-model="creditCard.name">
                    </div>
                    <div class="two fields">
                      <div class="field">
                        <label translate> guest_contribution_payment_card_number </label>
                        <input class="creditCardNumber" ng-class="{'has-error': !creditCard.number  && payment_gateway ==2 }" type="text" placeholder="{{'guest_contribution_payment_card_number'| translate}}" ng-model="creditCard.number">
                      </div>
                    </div>
                    <div class="fields">
                      <div class="expdate-field-wrap field">
                        <label> {{'guest_contribution_payment_expiration_date' | translate}}
                          <i class="info circle icon" data-content=" The two digit month and year of your credit card expiration date"></i>
                        </label>
                        <div class="two fields">
                          <div class="exp-date-field field">
                            <input ng-class="{'has-error': !creditCard.exp_month  && payment_gateway ==2}" type="text" class="exp-date" placeholder="{{'guest_contribution_payment_expiration_date_month'|translate}}" ng-model="creditCard.exp_month" numbers-only maxlength="2">
                          </div>
                          <div class="exp-date-field field">
                            <input ng-class="{'has-error': !creditCard.exp_year  && payment_gateway ==2}" type="text" class="exp-date" placeholder="{{'guest_contribution_payment_expiration_date_year'|translate}}" ng-model="creditCard.exp_year" numbers-only maxlength="2">
                          </div>
                        </div>
                      </div>
                      <div class="field">
                        <label id="cvc"> {{'guest_contribution_payment_cvc'|translate}}
                          <i class="info circle icon" data-content="{{'pledge_campaign_creditcard_cvc_note'| translate }}"></i>
                        </label>
                        <input ng-class="{'has-error': !creditCard.cvc  && payment_gateway ==2 }" placeholder="{{'guest_contribution_payment_cvc'|translate}}" type="text" class="cvv-code" ng-model="creditCard.cvc" numbers-only maxlength="5">
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <div class="payment-summary-col eight wide column right-col">
                <div class="ui basic segment payment-total">
                  <h4 class="payment-label ui header" translate> guest_contribution_total_payment </h4>
                  <table class="ui very basic table payments">
                    <tbody>
                      <tr>
                        <td class="payment-label" translate> guest_contribution_your_contribution </td>
                        <td class="payment-amnt">
                          <span ng-bind-html="pledgeAmount | formatCurrency:campaign.currencies[0].code_iso4217_alpha:public_setting.site_campaign_decimal_option"></span>
                          <span class="currency" ng-bind-html="campaign.currencies[0].code_iso4217_alpha"></span>
                        </td>
                      </tr>

                      <tr ng-if="tip.dollar_amount">
                        <td translate> guest_contribution_your_tip </td>
                        <td>
                          <span ng-bind-html="tip.dollar_amount | formatCurrency:tipInfo.code_iso4217_alpha:public_setting.site_campaign_decimal_option"></span>
                          <span class="currency" ng-bind-html="tipInfo.code_iso4217_alpha"></span>
                        </td>
                      </tr>

                      <tr ng-if="shippingOption.length">
                        <td class="payment-label" translate> guest_contribution_your_shipping</td>
                        <td class="payment-amnt">
                          <span ng-bind-html="shipOptions[0].cost || 0 | formatCurrency:campaign.currencies[0].code_iso4217_alpha:public_setting.site_campaign_decimal_option"></span>
                          <span class="currency" ng-bind-html="campaign.currencies[0].code_iso4217_alpha"></span>
                        </td>
                      </tr>
                      
                      <tr class="payment-row">
                        <td></td>
                        <td class="payment-amnt">
                          <span ng-bind-html="total(shipOptions[0].cost, tip.dollar_amount) | formatCurrency:campaign.currencies[0].code_iso4217_alpha:public_setting.site_campaign_decimal_option"></span>
                          <span class="currency" ng-bind-html="campaign.currencies[0].code_iso4217_alpha"></span>
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </div>
                <div class="ui pledge-btns basic btn segment" ng-hide="guestOption == 1">
                  <div class="ui black fluid large button" ng-click="goBackToCampaign()" translate> guest_contribution_go_back</div>
                  <div accessible-form class="ui fluid large blue button" ng-click="submit()" id="pledgebutton" ng-show="payment_gateway == 1">{{'guest_contribution_pledgebutton'|translate}}</div>
                  <div accessible-form class="ui fluid large blue button" ng-click="submitWidgetPledge()" id="pledgebutton" ng-show="payment_gateway == 2">{{'guest_contribution_pledgebutton'|translate}}</div>
                </div>
                <div class="agreement-text" ng-hide="guestOption == 1">
                  <p> {{'guest_contribution_checkbox_continue' | translate}}
                    <a href="tos" target="_blank">
                      <em> {{'pledge_campaign_term_service' | translate}}</em>
                    </a>
                    <a href="privacy" target="_blank">
                      <em>{{'pledge_campaign_privacy' | translate}}</em>
                    </a>
                    {{'ampersand' | translate}}
                    <a href="cookies" target="_blank">
                      <em> {{'cookies_policy_text' | translate}}</em>
                    </a>
                  </p>
                </div>
              </div>
              <div ng-include src="'views/templates/partials/response-message.html'"></div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<div class="ui page pledge-thank-you modal">
  <div ng-bind-html="gaScript"></div>
  <div ng-bind-html="fbScript"></div>
  <div ng-bind-html="rcScript"></div>
  <h1 class="ui icon inverted header" id="pledge-success">
    {{'guest_contribution_thankyou'| translate}}
  </h1>
  <div class="content">
    <div class="ui two column stackable grid">
      <div class="four wide column campaign-img">
        <img ng-if="campaign.files.length" ng-repeat="file in campaign.files | filter:{region_id: RESOURCE_REGIONS.campaign.thumbnail} | orderBy:'-file_id' | limitTo: 1" ng-src="{{server + '/image/campaign_thumbnail_xl/' + file.path_external}}" class="ui image"
        />
        <img ng-if="campaign.files.length == 0" src="/images/placeholder-images/placeholder_campaign_thumb.png" class="ui image" />
      </div>
      <div class="twelve wide column">
        <h1 class="ui header"> {{campaign.name}} </h1>
        <p ng-bind-html="campaign.blurb"></p>
      </div>
    </div>
    <div class="ui three column stackable grid contribution">
      <div class="left-col six wide column">
        <div class="contribution-header" translate>guest_contribution_reward_desc</div>
        <div class="data">
          {{rname}}
          <div ng-if="!rname" translate>
            <div class="data-text">
              guest_contribution_no_description
            </div>
          </div>
        </div>
      </div>
      <div class="left-col five wide column" ng-if="!tip.dollar_amount || tip.dollar_amount == 0">
        <div class="contribution-header" translate>guest_contribution_contributed_on</div>
        <div class="data">
          <div class="data-text">
            {{currdate}}
          </div>
        </div>
      </div>
      <div class="left-col five wide column" ng-if="!tip.dollar_amount || tip.dollar_amount == 0">
        <div class="contribution-header" translate>guest_contribution_amount_contributed</div>
        <div class="data">
          <div class="data-text" ng-bind-html="totalAmount | formatCurrency:campaign.currencies[0].code_iso4217_alpha:public_setting.site_campaign_decimal_option"></div>
        </div>
      </div>
      <div class="left-col three wide column" ng-if="tip.dollar_amount && tip.dollar_amount != 0">
        <div class="contribution-header" translate>guest_contribution_contributed_on</div>
        <div class="data">
          <div class="data-text">
            {{currdate}}
          </div>
        </div>
      </div>
      <div class="left-col four wide column" ng-if="tip.dollar_amount && tip.dollar_amount != 0">
        <div class="contribution-header" translate>guest_contribution_amount_contributed</div>
        <div class="data">
          <div class="data-text" ng-bind-html="totalAmount | formatCurrency:campaign.currencies[0].code_iso4217_alpha:public_setting.site_campaign_decimal_option"></div>
        </div>
      </div>
      <div class="left-col three wide column" ng-if="tip.dollar_amount && tip.dollar_amount != 0">
        <div class="contribution-header" translate>guest_contribution_tip_amount</div>
        <div class="data">
          <div class="data-text" ng-bind-html="tip.dollar_amount | formatCurrency:tipInfo.code_iso4217_alpha:public_setting.site_campaign_decimal_option"></div>
        </div>
      </div>
    </div>
    <!-- AddToAny BEGIN -->
    <div id="sm-share-wrap" class="ui basic segment">
      <h2 class="share-label ui header" translate>guest_contribution_no_share_your_ contribution</h2>
      <div class="a2a_kit a2a_kit_size_32 a2a_default_style social-media-share">
        <a class="a2a_button_facebook"></a>
        <a class="a2a_button_twitter"></a>
        <a class="a2a_button_email"></a>
        <a class="a2a_button_google_plus"></a>
        <a class="a2a_dd" href="https://www.addtoany.com/share_save"></a>
      </div>
    </div>
    <!-- AddToAny END -->
  </div>
  <div class=" inverted actions" ng-show="!(public_settings.site_campaign_pledge_redirect.toggle || (campaign.contribution_redirect && campaign.contribution_redirect.length > 0))">
    <a class="ui positive button redirect-link" href="/explore"> {{'guest_contribution_goto' | translate}}
    </a>
    <a class="ui positive button redirect-link" ng-click="gotolink(campaign_path)" translate>guest_contribution_goto_current_campaign
    </a>
  </div>
</div>
<!-- Forgot Password Modal -->
<div class="ui small modal forgot-password-modal">
  <i class="close icon"></i>
  <div class="header">
    <h3 class="ui header" translate> login_page_forgotpassword_modal</h3>
  </div>
  <div class="content">
    <p translate> login_page_forgotpassword_modal_enter_email_password_only </p>
    <div class="ui form basic segment email">
      <div class="field">
        <input type="text" name="email" placeholder="{{'login_page_forgotpassword_modal_enter_email_messgae' | translate}}" ng-model="email">
      </div>
    </div>
  </div>
  <div class="actions">
    <div class="ui positive button" ng-click="resetPassword()" translate>
      login_page_reset_password
    </div>
  </div>
</div>
<script type="text/javascript">
  a2a_config.linkname = a2a_config.localize.share_message_pledge_page;
  var myString = window.location.href;
  var stringArray = myString.split('inline');
  var id = stringArray[1].split('eid=');
  var myurl = stringArray[0] + window.b;
  a2a_config.linkurl = myurl;
</script>
<script type="text/javascript" src="https://static.addtoany.com/menu/page.js"></script>