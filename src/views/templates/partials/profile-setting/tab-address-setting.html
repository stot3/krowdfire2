<div class="sticky-bar ui sticky" sticky ng-cloak>
  <div class="sticky-action-bar ui page grid">
    <div class="column">

      <button class="ui black button" ng-click="goBackUser()" ng-show="showGoBack" translate>
        tab_address_setting_goback
      </button>
      <button accessible-form ng-click="setPrimary()" class="ui labeled green button small" ng-show="showadd" translate> tab_address_setting_set_primary </button>
      <button accessible-form ng-click="openModal('setting-add-address');newAddress()" class="ui labeled green button small" translate>tab_address_setting_add_address</button>

      <button accessible-form ng-click="multiDelete('address-table-personal', 'multi-delete-address', confirmDeleteAddress);" class="ui labeled red button small" ng-show="showbadd && showpersonal" translate> tab_address_setting_delete_address </button>
      <button accessible-form ng-click="multiDelete('address-table-business', 'multi-delete-address', confirmDeleteAddress);" class="ui labeled red button small"
      ng-show="showbadd && showbusiness" translate> tab_address_setting_delete_address </button>
      <div class="ui buttons" style="float: right;">
        <button class="ui  button" id="personalbtn" ng-click="showPersonal('p')">Personal</button>
        <div ng-if="companies.length" class="or"></div>
        <button ng-if="companies.length" class="ui button" id="businessbtn" ng-click="showPersonal('b')">Business</button>
      </div>
    </div>
  </div>
</div>


<div class="ui page grid" ng-show="showpersonal">
  <div class="column">
    <div ng-include src="'views/templates/partials/no-data-available.html'" ng-show="!personal_addresses || personal_addresses.length==0"></div>
    <div ng-if="personal_addresses && personal_addresses.length>0">
      <table class="ui compact table address-table-personal segment" ng-if="!alt_shipping">
        <thead>
          <tr>
            <th class="one wide center check-box">
              <div class="ui checkbox check-all" ng-click="checkAll('address-table-personal')">
                <input type="checkbox" name="select-all">
                <label></label>
              </div>
            </th>
            <th class="one wide center address-id" translate> tab_address_setting_id </th>
            <th class="four wide center address-name" translate> tab_address_setting_street </th>
            <th class="four wide center address-description" translate> tab_address_setting_city</th>
            <th class="two wide center address-postalcode" translate> tab_address_setting_postalcode </th>
            <th class="one wide center address-description"></th>
          </tr>
        </thead>
        <tbody>
          <tr class="address-row" ng-repeat="address in personal_addresses | orderBy:'id'">
            <td class="t-check-box">
              <div class="ui checkbox">
                <input type="checkbox" name="select-user">
                <label>
                  <a class="ui teal label" ng-if="address.primary_address" translate>
                    tab_address_setting_primary
                  </a>
                </label>
              </div>
            </td>
            <td class="t-id">
              {{address.address_id}}
            </td>
            <td class="t-address-name">
              <span title="{{address.street1}}">
                {{address.street1 | limitTo:25}}<span ng-if="address.street1.length > 25">...</span>
              </span>
            </td>
            <td class="t-address-description">
              <span title="{{address.city_full}}">
                {{address.city_full | limitTo:25}}<span ng-if="address.city_full.length > 25">...</span>
              </span>
            </td>
            <td class="t-address-postalcode">
              {{address.mail_code}}
            </td>
            <td class="t-address-edit">
              <a class="ui button small basic" ng-click="openModal('setting-add-address');selectAddress(address)" translate> tab_address_setting_edit </a>
            </td>
          </tr>
        </tbody>
      </table>
      <table class="ui compact table address-table-personal segment" ng-if="alt_shipping">
        <thead>
          <tr>
            <th class="one wide center check-box">
              <div class="ui checkbox check-all" ng-click="checkAll('address-table-personal')">
                <input type="checkbox" name="select-all">
                <label></label>
              </div>
            </th>
            <th class="one wide center address-id" translate> tab_address_setting_id </th>
            <th class="two wide center address-postalcode" translate> tab_address_setting_postalcode </th>
            <th class="four wide center address-description" translate> tab_address_setting_city</th>
            <th class="four wide center address-name" translate> tab_address_setting_street </th>
            <th class="one wide center address-description"></th>
          </tr>
        </thead>
        <tbody>
          <tr class="address-row" ng-repeat="address in personal_addresses | orderBy:'id'">
            <td class="t-check-box">
              <div class="ui checkbox">
                <input type="checkbox" name="select-user">
                <label>
                  <a class="ui teal label" ng-if="address.primary_address" translate>
                    tab_address_setting_primary
                  </a>
                </label>
              </div>
            </td>
            <td class="t-id">
              {{address.address_id}}
            </td>
            <td class="t-address-postalcode">
              {{address.mail_code}}
            </td>
            <td class="t-address-description">
              <span title="{{address.city_full}}">
                {{address.city_full | limitTo:25}}<span ng-if="address.city_full.length > 25">...</span>
              </span>
            </td>
            <td class="t-address-name">
              <span title="{{address.street1}}">
                {{address.street1 | limitTo:25}}<span ng-if="address.street1.length > 25">...</span>
              </span>
            </td>
            <td class="t-address-edit">
              <a class="ui button small basic" ng-click="openModal('setting-add-address');selectAddress(address)" translate> tab_address_setting_edit </a>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>


<div class="ui page grid" ng-show="showbusiness">
  <div class="column">
    <div ng-include src="'views/templates/partials/no-data-available.html'" ng-show="!business_addresses || business_addresses.length==0"></div>
    <div ng-if="business_addresses && business_addresses.length>0">
      <table class="ui compact table address-table-business segment" ng-if="!alt_shipping">
        <thead>
          <tr>
            <th class="one wide center check-box">
              <div class="ui checkbox check-all" ng-click="checkAll('address-table-business')">
                <input type="checkbox" name="select-all">
                <label></label>
              </div>
            </th>
            <th class="one wide center address-id" translate> tab_address_setting_id </th>
            <th class="one wide center address-company" translate>tab_address_company </th>
            <th class="four wide center address-name" translate> tab_address_setting_street </th>
            <th class="four wide center address-description" translate> tab_address_setting_city</th>
            <th class="two wide center address-postalcode" translate> tab_address_setting_postalcode </th>
            <th class="one wide center address-description"></th>
          </tr>
        </thead>
        <tbody>
          <tr class="address-row" ng-repeat="address in business_addresses | orderBy:'id'">

            <td class="t-check-box">
              <div class="ui checkbox">
                <input type="checkbox" name="select-user">
                <label>
                  <a class="ui teal label" ng-if="address.primary_address" translate>
                    tab_address_setting_primary
                  </a>
                </label>
              </div>
            </td>
            <td class="t-id">
              {{address.address_id}}
            </td>
            <td class="t-company">
              {{address.business_organization}}
            </td>
            <td class="t-address-name">
              <span title="{{address.street1}}">
                {{address.street1 | limitTo:25}}<span ng-if="address.street1.length > 25">...</span>
              </span>
            </td>
            <td class="t-address-description">
              <span title="{{address.city_full}}">
                {{address.city_full | limitTo:25}}<span ng-if="address.city_full.length > 25">...</span>
              </span>
            </td>
            <td class="t-address-postalcode">
              {{address.mail_code}}
            </td>
            <td class="t-address-edit">
              <a class="ui button small basic" ng-click="openModal('setting-add-address');selectAddress(address)" translate> tab_address_setting_edit </a>
            </td>
          </tr>
        </tbody>
      </table>
      <table class="ui compact table address-table-business segment" ng-if="alt_shipping">
        <thead>
          <tr>
            <th class="one wide center check-box">
              <div class="ui checkbox check-all" ng-click="checkAll('address-table-business')">
                <input type="checkbox" name="select-all">
                <label></label>
              </div>
            </th>
            <th class="one wide center address-id" translate> tab_address_setting_id </th>
            <th class="one wide center address-company" translate>tab_address_company </th>
            <th class="two wide center address-postalcode" translate> tab_address_setting_postalcode </th>
            <th class="four wide center address-description" translate> tab_address_setting_city</th>
            <th class="four wide center address-name" translate> tab_address_setting_street </th>
            <th class="one wide center address-description"></th>
          </tr>
        </thead>
        <tbody>
          <tr class="address-row" ng-repeat="address in business_addresses | orderBy:'id'">

            <td class="t-check-box">
              <div class="ui checkbox">
                <input type="checkbox" name="select-user">
                <label>
                  <a class="ui teal label" ng-if="address.primary_address" translate>
                    tab_address_setting_primary
                  </a>
                </label>
              </div>
            </td>
            <td class="t-id">
              {{address.address_id}}
            </td>
            <td class="t-company">
              {{address.business_organization}}
            </td>
            <td class="t-address-postalcode">
              {{address.mail_code}}
            </td>
            <td class="t-address-description">
              <span title="{{address.city_full}}">
                {{address.city_full | limitTo:25}}<span ng-if="address.city_full.length > 25">...</span>
              </span>
            </td>
            <td class="t-address-name">
              <span title="{{address.street1}}">
                {{address.street1 | limitTo:25}}<span ng-if="address.street1.length > 25">...</span>
              </span>
            </td>
            <td class="t-address-edit">
              <a class="ui button small basic" ng-click="openModal('setting-add-address');selectAddress(address)" translate> tab_address_setting_edit </a>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>


<div class="ui small modal" id="multi-delete-address">
  <i class="close icon"></i>
  <div class="header">
    <h3 class="ui blue header" translate> tab_address_setting_delete_items  </h3>
  </div>
  <div class="content">
    <p> {{'tab_address_setting_delete_items_message' | translate }} {{itemDeleteCount}} {{'tab_address_setting_delete_items_message2' | translate }} </p>
  </div>
  <div class="actions">
    <div class="ui positive button" ng-click="closeModal()" translate>
      tab_address_setting_yes
    </div>
    <div class="ui negative button" translate>
      tab_address_setting_no
    </div>
  </div>
</div>

<div class="ui modal" id="setting-add-address">
  <i class="close icon"></i>
  <div class="header" translate>
    tab_address_setting_edit_address
  </div>
  <div class="content" ng-if="!alt_shipping">
    <div name="addressForm" class="ui form address-form">
      <div class="ui basic campaign-bg segment">
        <div class=" ui two column stackable grid" ng-if="showbusiness">
          <div class="five wide column">
            <h3 class="ui header" translate>tab_address_company </h3>
          </div>
          <div class="eleven wide column">
            <div class="field"ng-show="companies.length" ng-if="!showBusName">
              <div class="ui selection dropdown" ng-model="company_selected"  id="company-dropdown">
                <input type="hidden" name="company_select">
                <div class="default text" id="defaulttext" translate="tab_address_company_select"></div>
                <i class="dropdown icon"></i>
                <div class="menu">
                  <div class="item" id="datavalue" data-value="{{company.id}}" ng-repeat="company in companies" ng-click="selectCompany(company.id)">{{company.name}}</div>
                </div>
              </div>
            </div>
            <div ng-if="showBusName">{{addressSelected.business_organization}}</div>
          </div>
        </div>
        <div class="ui two column stackable grid">
          <div class="five wide column">
            <h3 class="ui header" translate>  tab_address_setting_edit_address1 </h3>
          </div>

          <div class="eleven wide column">
            <div class="field">
              <div class="ui corner labeled input">
                <input type="text" ng-model="addressSelected.street1" ng-attr-placeholder="{{'tab_address_setting_edit_address1' | translate}}" name="address1" ng-keypress="saveAddressInfoEnter($event)">
                <div class="ui red corner label">
                  <i class="asterisk icon"></i>
                </div>
              </div>
            </div>
          </div>
        </div>


        <div class="ui two column stackable grid">
          <div class="five wide column">
            <h3 class="ui header" translate> tab_address_setting_edit_address2 </h3>
          </div>

          <div class="eleven wide column">
            <div class="field">
              <input type="text" ng-model="addressSelected.street2" ng-attr-placeholder="{{'tab_address_setting_edit_address2' | translate}}">
            </div>
          </div>
        </div>


        <div class="ui two column stackable grid">
          <div class="five wide column">
            <h3 class="ui header" translate>  tab_address_setting_edit_city </h3>
          </div>

          <div class="eleven wide column">
            <div class="field" id="select-city">
              <div ui-select style="width:100%;" ng-model="addressSelected.selected" theme="select2" reset-search-input="false">
                <div ui-select-match placeholder="{{'tab_address_setting_edit_city'| translate}}">{{$select.selected.name}}</div>
                <div ui-select-choices repeat="city in cities | filter: $select.search" refresh="searchCities($select.search)" refresh-delay="200">
                  <div ng-bind-html="city.name"></div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="ui two column stackable grid">
          <div class="five wide column">
            <h3 class="ui header" translate> tab_address_setting_edit_postalcode   </h3>
          </div>

          <div class="eleven wide column">
            <div class="field">
              <div class="ui corner labeled input">
                <input type="text" name="mail_code" ng-model="addressSelected.mail_code" ng-attr-placeholder="{{'tab_address_setting_edit_postalcode' | translate}}" ng-keypress="saveAddressInfoEnter($event)">
                <div class="ui red corner label">
                  <i class="asterisk icon"></i>
                </div>
              </div>
            </div>
          </div>
        </div>

      </div>
    </div>
  </div>
  <div class="content" ng-if="alt_shipping">
    <div name="addressForm" class="ui form address-form">
      <div class="ui basic campaign-bg segment">
        <div class=" ui two column stackable grid" ng-if="showbusiness">
          <div class="five wide column">
            <h3 class="ui header" translate>tab_address_company </h3>
          </div>
          <div class="eleven wide column">
            <div class="field" ng-show="companies.length" ng-if="!showBusName">
              <div class="ui selection dropdown" ng-model="company_selected" id="company-dropdown" ng-keypress="formPreventDefault($event)">
                <input type="hidden" name="company_select">
                <div class="default text" id="defaulttext" translate>tab_address_company_select</div>
                <i class="dropdown icon"></i>
                <div class="menu">
                  <div class="item" id="datavalue" data-value="{{company.id}}" ng-repeat="company in companies" ng-click="selectCompany(company.id)">{{company.name}}</div>
                </div>
              </div>
            </div>
            <div ng-if="showBusName">{{addressSelected.business_organization}}</div>
          </div>
        </div>

        <div class="ui two column stackable grid">
          <div class="five wide column">
            <h3 class="ui header" translate>  tab_address_setting_edit_country </h3>
          </div>

          <div class="eleven wide column">
            <div class="field" id="select-country">
              <div ui-select style="width:100%;" ng-model="addressCountrySelected.selected" theme="select2" reset-search-input="false">
                <div ui-select-match placeholder="{{'tab_address_setting_edit_country'| translate}}">
                  {{$select.selected.name}}
                </div>
                <div ui-select-choices repeat="country in countries | filter: $select.search">
                  <div ng-bind="country.name"></div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="ui two column stackable grid">
          <div class="five wide column">
            <h3 class="ui header" translate> tab_address_setting_edit_postalcode   </h3>
          </div>

          <div class="eleven wide column">
            <div class="field">
              <div class="ui corner labeled input">
                <input type="text" name="mail_code" ng-model="addressSelected.mail_code" ng-attr-placeholder="{{'tab_address_setting_edit_postalcode' | translate}}" ng-keypress="saveAddressInfoEnter($event)">
                <div class="ui red corner label">
                  <i class="asterisk icon"></i>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="ui two column stackable grid">
          <div class="five wide column">
            <h3 class="ui header" translate>  tab_address_setting_edit_subcountry </h3>
          </div>

          <div class="eleven wide column">
            <div class="field">
              <div ui-select style="width:100%;" ng-model="addressSubcountrySelected.selected" theme="select2" reset-search-input="false" ng-disabled="!addressCountrySelected.selected" ng-keypress="formPreventDefault($event)">
                <div ui-select-match placeholder="{{'tab_address_setting_edit_subcountry'| translate}}">{{$select.selected.name}}</div>
                <div ui-select-choices repeat="subcountry in subcountries | filter: $select.search">
                  <div ng-bind-html="subcountry.name"></div>
                </div>
              </div>
            </div>
          </div>
        </div>


        <div class="ui two column stackable grid">
          <div class="five wide column">
            <h3 class="ui header" translate>  tab_address_setting_edit_city </h3>
          </div>

          <div class="eleven wide column">
            <div class="field" id="select-city">
              <div ui-select style="width:100%;" ng-model="addressSelected.selected" theme="select2" reset-search-input="false" ng-disabled="!addressSubcountrySelected.selected">
                <div ui-select-match placeholder="{{'tab_address_setting_edit_city'| translate}}">{{$select.selected.name}}</div>
                <div ui-select-choices repeat="city in cities | filter: $select.search" refresh="searchCities($select.search)" refresh-delay="200" ng-keypress="formPreventDefault($event)">
                  <div ng-bind-html="city.city"></div>
                </div>
              </div>
            </div>
          </div>
        </div>


        <div class="ui two column stackable grid">
          <div class="five wide column">
            <h3 class="ui header" translate>  tab_address_setting_edit_address1 </h3>
          </div>

          <div class="eleven wide column">
            <div class="field">
              <div class="ui corner labeled input">
                <input type="text" ng-model="addressSelected.street1" name="address1" ng-attr-placeholder="{{'tab_address_setting_edit_address1' | translate}}" ng-keypress="saveAddressInfoEnter($event)">
                <div class="ui red corner label">
                  <i class="asterisk icon"></i>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="actions">
    <div class="ui approve button green" ng-click="saveAddressInfo($event)" translate>
      tab_address_setting_save
    </div>
    <div class="ui button" translate>
      tab_address_setting_cancel
    </div>
  </div>
</div>