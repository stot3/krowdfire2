<div class="ui page grid">
  <div class="column">
    <div class="action-btn ui icon labeled black button" ng-click="backCampaign(); goBackUser()">
      <i class="left angle icon"></i>
      <span translate>tab_campaign_back</span>
    </div>
  </div>
</div>
<div class="ui page grid manual_transaction">
  <div class="column columnBelowBack">
    <h2 class="section-title ui top attached inverted header">
      <span translate="tab_campaign_Manual_Transaction"></span>
    </h2>
    <div class="content">
      <form class="ui manual-trans-form form">
        <div class="ui grid two column stackable">
          <div class="six wide column">
            <div class="manual-transaction-account-type" style="margin-bottom: 15px;" ng-if="isProfileContribAttributes">
              <h4 class="ui dividing header" translate>{{'tab_campaign_manual_transaction_account_type_title'}}</h4>
              <div class="ui buttons account-type-selecion field">
                <div class="ui button" ng-class="{ 'green': selectedAccountType == 'Individual' }" ng-click="accountTypeSelected('Individual')" translate>
                  tab_campaign_manual_transaction_personal_account_type
                </div>
                <div class="or"></div>
                <div class="ui button" ng-class="{ 'green': selectedAccountType == 'Organization' }" ng-click="accountTypeSelected('Organization')" translate>
                  tab_campaign_manual_transaction_organization_account_type
                </div>
              </div>
            </div>
            
            <div class="personal-user-fields">
              <h4 class="ui dividing header" translate>{{'tab_campaign_details_personal_information'}}</h4>
              <div class="two fields">
                <div class="field">
                  <label>{{'tab_campaign_details_First_Name'|translate}}</label>
                  <input type="text" id="payment-input" name="first-name" ng-attr-placeholder="{{'tab_campaign_details_First_Name'|translate}}"
                    ng-model="user.first_name" ng-class="{'has-error':!user.first_name}">
                </div>
                <div class="field">
                  <label>{{'tab_campaign_details_Last_Name'| translate}}</label>
                  <input type="text" id="payment-input" name="last-name" ng-attr-placeholder="{{'tab_campaign_details_Last_Name'| translate}}"
                    ng-model="user.last_name" ng-class="{'has-error':!user.last_name}">
                </div>
              </div>
              <div class="field">
                <div class="two fields">
                  <div class="field">
                    <label>{{'tab_campaign_details_Email'|translate}}</label>
                    <input type="text" id="payment-input" name="email" ng-attr-placeholder="{{'tab_campaign_details_Email'|translate}}" ng-model="user.email"
                      ng-class="{'has-error':!user.email}">
                  </div>
                  <div class="field">
                    <label>{{'tab_campaign_details_Phone_Number'|translate}}</label>
                    <input type="text" id="payment-input" name="phone" ng-attr-placeholder="{{'tab_campaign_details_Phone_Number'|translate}}"
                      ng-model="user.phone" numbers-Only maxLength="25">
                  </div>
                </div>
              </div>
            </div>

            <div class="new-company-form" ng-if="isProfileContribAttributes && selectedAccountType == 'Organization'">
              <h4 class="ui dividing header" translate></h4>
              <div class="two fields">
                <div class="field">
                  <label>{{'tab_campaign_manual_transaction_organization_name_account_type_field_label'|translate}}</label>
                  <input type="text" name="company_name" ng-attr-placeholder="{{'tab_campaign_manual_transaction_organization_name_account_type_field_placeholder'| translate}}" ng-class="{'has-error':!organizationFields.name}" ng-model="organizationFields.name">
                </div>
                <div class="field">
                  <label>{{'tab_campaign_manual_transaction_organization_email_account_type_field_label'|translate}}</label>
                  <input name="businessEmail" type="text" ng-class="{'has-error':!organizationFields.email}" ng-model="organizationFields.email" placeholder="{{'tab_campaign_manual_transaction_organization_email_account_type_field_placeholder'|translate}}">
                </div>
              </div>
            </div>
            
            <div class="field" ng-show="payment_gateway==2">
              <div class="two fields">
                <div class="field">
                  <label>{{'tab_campaign_details_Occupation'|translate }}</label>
                  <input type="text" id="payment-input" name="occupation" ng-attr-placeholder="{{'tab_campaign_details_Occupation'|translate }}"
                    ng-model="user.occupation">
                </div>
                <div class="field">
                  <label>{{'tab_campaign_details_Employer'|translate}}</label>
                  <input type="text" id="payment-input" name="employer" ng-attr-placeholder="{{'tab_campaign_details_Employer'|translate}}"
                    ng-model="user.employer">
                </div>
              </div>
            </div>
            <div class="field">
              <label translate="tab_campaign_anonymous_contribution"></label>
              <div class="ui selection dropdown reward">
                <div class="text" translate="{{isAnonymous[0].name}}" style="color:rgba(0,0,0,0.8)"></div>
                <i class="dropdown icon"></i>
                <div class="menu">
                  <div class="item" ng-repeat="anonymous in isAnonymous" ng-click="setAnonymous(anonymous)" translate="{{anonymous.name}}"></div>
                </div>
              </div>
            </div>
          </div>
          <div class="ten wide column">
            <h4 class="ui dividing header" translate>{{'tab_campaign_details_Billing_Information'}}</h4>
            <!-- <div class="field">         -->
            <div class="two fields">
              <div class="field">
                <label>{{'tab_campaign_details_Amount'| translate}} </label>
                <input type="number" step="0.01" id="payment-input" min="0" name="amount" ng-attr-placeholder="{{'tab_campaign_details_Amount'| translate}}"
                  ng-model="user.amount" ng-class="{'has-error':!user.amount || user.amout < 0} ">
              </div>
              <div class="field">
                <label>{{'tab_campaign_details_Cheque_Reference_Number'| translate}}</label>
                <input type="text" id="payment-input" name="cheque" ng-attr-placeholder="{{'tab_campaign_details_Cheque_Reference_Number'| translate}}"
                  ng-model="user.cheque_ref" ng-class="{'has-error':!user.cheque_ref}">
              </div>
            </div>
            <div class="field" ng-if="isProfileContribAttributes">
              <div class="field start-date" id="start-date-field">
                <label> {{'tab_campaign_details_transaction_date'|translate}}</label>
                <quick-datepicker ng-class="{'startdate-selected' : user.created}" ng-model="user.created" disable-clear-button="true" date-format='EEEE, yyyy/MM/d' placeholder="{{get_started_funding_startdate_placeholder}}" date-filter="noPastDates">
                </quick-datepicker>
              </div>
            </div>
            <!-- </div> -->
            <div class="field" ng-show="campaignRewards" style="margin: 0;">
              <label>{{'tab_campaign_details_reward'|translate}}</label>
              <div class="three fields">
                <div class="seven wide field">
                  <div class="ui selection dropdown reward">
                    <div class="default text" translate="tab_campaign_details_reward"></div>
                    <i class="dropdown icon"></i>
                    <div class="menu">
                      <div class="item" ng-repeat="reward in campaignRewards" ng-bind="reward.name" ng-click="verifyReward(reward)"></div>
                    </div>
                  </div>
                </div>
                <div class="six wide field" ng-show="selectedReward.coupon && selectedReward.coupon.length > 0">
                  <div id = "coupon-code-input" class = "ui checkbox">
                    <label>{{'tab_campaign_transaction_details_apply'|translate}} {{selectedReward.coupon[0].name}} ({{selectedReward.coupon[0].code}})</label>
                    <input type="checkbox" name="coupon_code" ng-attr-placeholder="{{'tab_campaign_details_coupon'| translate}}">
                  </div>
                </div>
                <div class = "three wide field">
                  <div class="ui button clearBtn" translate="tab_campaign_transaction_details_reward_clear" ng-click="clearReward()"></div>
                </div>
              </div>
            </div>
            <div class="field" ng-if="tippingOptions.toggle">
              <label>{{'tab_campaign_transaction_details_tip_amount'|translate}}</label>
              <div class="ui buttons tipping-options-selection" ng-if="(tippingOptions.toggle_dynamic && tippingOptions.toggle_tiers) || (tippingOptions.toggle_dynamic && tippingOptions.toggle_no_tip) || (tippingOptions.toggle_tiers && tippingOptions.toggle_no_tip)">
                  <div class="ui button" ng-class="{ 'green': selectedTipType == 'tiers' }" ng-if="tippingOptions.toggle_tiers" ng-click="tipTypeSelection('tiers')" translate>
                    pledge_campaign_choose_tip
                  </div>
                  <div class="or" ng-if="tippingOptions.toggle_tiers && tippingOptions.toggle_dynamic"></div>
                  <div class="ui button" ng-class="{ 'green': selectedTipType == 'dynamic' }" ng-if="tippingOptions.toggle_dynamic" ng-click="tipTypeSelection('dynamic')" translate>
                    pledge_campaign_enter_tip_amount
                  </div>
                  <div class="or" ng-if="tippingOptions.toggle_no_tip"></div>
                  <div class="ui button" ng-class="{ 'green': selectedTipType == 'no_tip' }" ng-if="tippingOptions.toggle_no_tip" ng-click="tipTypeSelection('no_tip')" translate>
                    pledge_campaign_no_tip
                  </div>
                </div>
                <div class="ui red pointing prompt label transition visible" ng-if="tipTypeError" translate>pledge_campaign_select_tip_option</div>
                <div ng-if="(tippingOptions.toggle_dynamic && !tippingOptions.toggle_tiers && !tippingOptions.toggle_no_tip) || selectedTipType == 'dynamic'" class="ui dynamic-tipping-form form tipping-option">
                  <div class="field">
                    <div class="ui left labeled input">
                      <input name="dynamic_tip" type="text" ng-model="tip.value">
                    </div>
                  </div>
                </div>
                <div ng-if="(!tippingOptions.toggle_dynamic && tippingOptions.toggle_tiers && !tippingOptions.toggle_no_tip) || selectedTipType == 'tiers'" class="tipping-option">
                  <div class="tip-field field">
                    <div class="ui selection dropdown">
                      <input type="hidden" name="tip_tier">
                      <i class="dropdown icon"></i>
                      <div class="default text">
                        <span ng-if="tippingOptions.toggle_tier_names">{{tippingOptions.tiers[0].name}} -</span>
                        <span ng-if="tippingOptions.tiers[0].type == 'Dollar'">{{tippingOptions.tiers[0].value}}</span>
                        <span ng-if="tippingOptions.tiers[0].type == 'Percent'">{{(tippingOptions.tiers[0].value / 100) * user.amount | number : 2}}</span>
                      </div>
                      <div class="menu">
                        <div class="item" data-value="{{$index}}" ng-repeat="tier in tippingOptions.tiers track by $index" ng-click="tipTierSelection(tier.value, tier.type)">
                          <span ng-if="tippingOptions.toggle_tier_names">{{tier.name}} -</span>
                          <span ng-if="tier.type == 'Dollar'">{{tier.value}}</span>
                          <span ng-if="tier.type == 'Percent'">{{(tier.value / 100) * user.amount | number : 2}}</span>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div ng-if="selectedTipType == 'no_tip'" class="tipping-option" translate>
                  pledge_campaign_no_tip_selected
                </div>
            </div>
            <h4 ng-if="(shipAdd || isProfileContribAttributes) && !alt_shipping" class="ui dividing left aligned header" translate>{{'tab_campaign_details_Shipping_Information'}}</h4>
            <div ng-if="shipAdd || isProfileContribAttributes">
              <div ng-if="!alt_shipping">
                <div class="field">
                  <div class="two fields">
                    <div class="field">
                      <label>{{'tab_campaign_details_Street_Address1'|translate }}</label>
                      <input type="text" id="payment-input" name="address" ng-attr-placeholder="{{'tab_campaign_details_Street_Address1'|translate }}"
                        ng-model="user.address1">
                    </div>
                    <div class="field">
                      <label>{{'tab_campaign_details_Street_Address2'|translate }}</label>
                      <input type="text" id="payment-input" name="address-2" ng-attr-placeholder="{{'tab_campaign_details_Street_Address2'|translate }}"
                        ng-model="user.address2">
                    </div>
                  </div>
                </div>
                <div class="field">
                  <div class="two fields">
                    <div class="field">
                      <label translate="tab_campaign_details_City"></label>
                      <div ui-select style="width:100%;" ng-model="selectedCity.selected" theme="select2" reset-search-input="false">
                        <div ui-select-match ng-attr-placeholder="City">
                          {{$select.selected.name}}
                        </div>
                        <div ui-select-choices repeat="city in cities | filter: $select.search" refresh="searchCities($select.search)" refresh-delay="200">
                          <div ng-bind-html="city.name"></div>
                        </div>
                      </div>
                    </div>
                    <div class="field">
                      <label>{{'tab_campaign_details_Postal_Code'| translate}}</label>
                      <input type="text" id="payment-input" name="address-2" ng-attr-placeholder="{{'tab_campaign_details_Postal_Code'| translate}}"
                        ng-model="user.postal_code">
                    </div>
                  </div>
                </div>
              </div>
              <div ng-if="alt_shipping">
                <div class="ui form">
                  <div class="two fields">
                    <div class="field">
                      <label translate="tab_campaign_details_country"></label>
                      <div class="ui selection dropdown altCountry" ng-class="{'has-error': !selectedCountry.selected && !toggle.newAddress}">
                        <input type="hidden">
                        <div class="text" ng-bind="selectedCountry.selected.name"></div>
                        <i class="dropdown icon"></i>
                        <div class="menu">
                          <div class="item" ng-repeat="country in countries" ng-bind="country.name" ng-click="setCountry(country)"></div>
                        </div>
                      </div>
                    </div>
                    <div class="field">
                      <label translate="tab_campaign_details_subcountry"></label>
                      <div ng-class="{'has-error': !selectedSubcountry.selected && !toggle.newAddress}">
                        <div ui-select style="width:100%;" ng-model="selectedSubcountry.selected" theme="select2" reset-search-input="false" ng-disabled="!selectedCountry.selected">
                          <div ui-select-match placeholder="{{'tab_campaign_details_subcountry_placeholder'| translate}}">
                            {{$select.selected.name}}
                          </div>
                          <div ui-select-choices repeat="subcountry in subcountries | filter: $select.search">
                            <div ng-bind="subcountry.name"></div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="two fields">
                    <div class="field">
                      <label translate="tab_campaign_details_City"></label>
                      <div ng-class="{'has-error': !selectedCity.selected && !toggle.newAddress}">
                        <div ui-select style="width:100%;" ng-model="selectedCity.selected" theme="select2" reset-search-input="false" ng-disabled="!selectedSubcountry.selected">
                          <div ui-select-match placeholder="{{'tab_campaign_details_City_placeholder'| translate}}">
                            {{$select.selected.name}}
                          </div>
                          <div ui-select-choices repeat="city in cities | filter: $select.search" refresh="searchCities($select.search)" refresh-delay="200">
                            <div ng-bind-html="city.name"></div>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="field">
                      <label translate="tab_campaign_details_Postal_Code"></label>
                      <input type="text" ng-model="user.postal_code" placeholder="{{'tab_campaign_details_Postal_Code_placeholder' | translate}}">
                    </div>
                  </div>
                  <div class="field">
                    <label translate="tab_campaign_details_Street_Address1"></label>
                    <input type="text" ng-model="user.address1" placeholder="{{'tab_campaign_details_Street_Address_placeholder'|translate}}">
                  </div>
                  <div class="field">
                    <label translate="tab_campaign_details_Street_Address2"></label>
                    <input type="text" ng-model="user.address2" placeholder="{{'tab_campaign_details_Street_Address_placeholder'|translate}}">
                  </div>
                </div>
              </div>
            </div>

            <div class="field">
              <div class="ui checkbox notifyEmail" ng-model="email_notify">
                <input type="checkbox" name="email-notify" id="email-notify">
                <label translate>tab_campaign_Add_Transaction_Send_Email</label>
              </div>
            </div>
          </div>
          <div class="ui warning message" ng-show="transaction_error">
            <span> {{eMessage| translate}}</span>
          </div>
          <div class="ui attached red message submitError" ng-show="formError">{{"tab_campaign_transactoin_submit_form_error" | translate}}</div>
          <div class="ui attached red message submitError" ng-show="endpointError">{{"tab_campaign_transactoin_submit_endpoint_error" | translate}}</div>
          <div class="ui green button" ng-if="isProfileContribAttributes" tabindex="0" style="float:right;" ng-click="addProfileTransaction()">{{'tab_campaign_details_Add_Transaction' | translate}}</div>
          <div class="ui green button" ng-if="!isProfileContribAttributes" tabindex="0" style="float:right;" ng-click="addTransaction()">{{'tab_campaign_details_Add_Transaction' | translate}}</div>
      </form>
      </div>
    </div>
  </div>
</div>